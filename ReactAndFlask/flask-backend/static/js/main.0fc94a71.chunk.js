(this.webpackJsonpreactfrontend=this.webpackJsonpreactfrontend||[]).push([[0],{117:function(e,t,a){e.exports=a.p+"static/media/logo.df79d0ea.png"},227:function(e,t,a){},288:function(e,t,a){e.exports=a(516)},293:function(e,t,a){},462:function(e,t,a){},511:function(e,t,a){},515:function(e,t,a){},516:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(19),i=a.n(r),o=(a(293),a(10)),l=a(8),c=a(11),u=a(12),m=a(13),d=a(6),p=a.n(d),h=a(7),g=a(34),f=a(567),b=a(568),v=a(569),E=a(70),w=a(570),y=a(573),S="http://localhost:4010/",C=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","W","X","Y","Z"],_="instances/",k="models/",P="users/",x="racks/",O="datacenters/",M="logs/",D="permissions/",A="decommissions/",N="ParselTonguesUserAuth",I="";I="http://localhost:3000"===window.location.href||"http://localhost:3000/"===window.location.href?window.location.href:S;var j,L="https://oauth.oit.duke.edu/oauth/authorize.php?client_id="+encodeURIComponent(N)+"&client_secret="+encodeURIComponent("LpUwB*eiK4Iw#1gaCu5jYp1u5uRF3ERsdmuNUGoKYNzn7rHm7b")+"&redirect_uri="+encodeURIComponent(I)+"&response_type=token&state=1129&scope="+encodeURIComponent("basic"),T=200;function U(e,t){return S+e+t}!function(e){e.ADMIN="admin",e.USER="user"}(j||(j={}));var V,R,B=a(259),F=a(50),H=a.n(F),W=a(602),G=a(599),q=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(W.a,{open:this.props.open,autoHideDuration:4e3,onClose:this.props.closeStatus},s.a.createElement(G.a,{elevation:6,variant:"filled",severity:this.props.severity},s.a.createElement("div",null,this.props.message,s.a.createElement(B.a,{"aria-label":"close",color:"inherit",size:"small",onClick:this.props.closeStatus},s.a.createElement(H.a,{fontSize:"inherit"}))))))}}]),t}(s.a.Component),z=a(117),K=a.n(z),J=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={username:"",password:"",statusMessage:"",showStatus:!1,statusSeverity:"info"},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement(f.a,{container:!0,spacing:5,direction:"column",justify:"flex-start",alignItems:"center",onKeyDown:function(t){return e.onKeyPressed(t)},style:{minHeight:"102vh",background:"linear-gradient(to top, #a8e063, #56ab2f)"}},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement("img",{src:K.a,alt:"",style:{height:"200px",marginTop:"50px"}})),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(b.a,{style:{minWidth:"20vw"}},s.a.createElement(v.a,null,s.a.createElement(f.a,{container:!0,spacing:1,direction:"column",justify:"center",alignItems:"center"},s.a.createElement(f.a,{container:!0,item:!0,alignItems:"flex-start",xs:12},s.a.createElement(E.a,{variant:"h6",color:"textPrimary",fontWeight:"fontWeightBold",gutterBottom:!0},"Please wait while we log you in...")))))),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(q,{open:this.state.showStatus,severity:this.state.statusSeverity,closeStatus:this.closeShowStatus,message:this.state.statusMessage})))}}]),t}(s.a.Component),Y="users/",X=a(314),Q=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).getDukeCredentials=function(e){p.a.get("https://api.colab.duke.edu/identity/v1/",{headers:{"x-api-key":N,Authorization:"Bearer ".concat(e)}}).then((function(t){p.a.post(U(Y,"oauth"),{username:t.data.netid,email:t.data.mail,display_name:t.data.displayName,client_id:N,token:e}).then((function(e){var t=e.data.message;e.status===T?(a.setState({username:"",password:"",statusMessage:"",showStatus:!1,statusSeverity:" info",initialized:!1,oauth:!1}),a.props.loginFuncOAuth(e.data.token,e.data.username,e.data.privilege)):a.setState({showStatus:!0,statusMessage:t})}))}))},a.loginWithOAuth=function(){window.location=L},a.state={username:"",password:"",statusMessage:"",showStatus:!1,statusSeverity:"info",initialized:!1,oauth:!1},a.closeShowStatus=a.closeShowStatus.bind(Object(g.a)(a)),a.submitCredentials=a.submitCredentials.bind(Object(g.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){try{var e=X.parse(window.location.hash.substring(1));null!=e.access_token&&(this.getDukeCredentials(e.access_token),this.setState({oauth:!0}))}catch(t){console.log("tried:")}this.setState({initialized:!0})}},{key:"submitCredentials",value:function(){var e=this;p.a.post(U(Y,"authenticate"),{username:this.state.username,password:this.state.password}).then((function(t){var a=t.data.message;"success"===a?(e.setState({message:""}),console.log(t),e.props.loginFunc(t.data.token,e.state.username,t.data.privilege)):e.setState({showStatus:!0,statusMessage:a})}))}},{key:"updateUsername",value:function(e){this.setState({username:e.target.value})}},{key:"updatePassword",value:function(e){this.setState({password:e.target.value})}},{key:"closeShowStatus",value:function(){this.setState({showStatus:!1})}},{key:"onKeyPressed",value:function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),this.submitCredentials())}},{key:"render",value:function(){var e,t=this;return s.a.createElement("div",null,this.state.oauth?s.a.createElement(J,null):s.a.createElement(f.a,{container:!0,spacing:5,direction:"column",justify:"flex-start",alignItems:"center",onKeyDown:function(e){return t.onKeyPressed(e)},style:(e={minHeight:"102vh",background:"#56ab2f"},Object(h.a)(e,"background","-webkit-linear-gradient(to top, #a8e063, #56ab2f)"),Object(h.a)(e,"background","linear-gradient(to top, #a8e063, #56ab2f)"),e)},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement("img",{src:K.a,style:{height:"200px",marginTop:"50px"},alt:"Hyposoft"})),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(b.a,{style:{minWidth:"20vw"}},s.a.createElement(v.a,null,s.a.createElement(f.a,{container:!0,spacing:1,direction:"column",justify:"center",alignItems:"center"},s.a.createElement(f.a,{container:!0,item:!0,alignItems:"flex-start",xs:12},s.a.createElement(E.a,{variant:"h4",color:"textPrimary",fontWeight:"fontWeightBold",gutterBottom:!0},"Login")),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(w.a,{id:"username-input",label:"Username",variant:"outlined",required:!0,ref:"username",onChange:this.updateUsername.bind(this),style:{minWidth:"15vw"}})),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(w.a,{id:"password-input",label:"Password",variant:"outlined",required:!0,ref:"password",type:"password",onChange:this.updatePassword.bind(this),style:{minWidth:"15vw"}})),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(y.a,{onClick:this.submitCredentials,variant:"contained",color:"primary",style:{minWidth:"15vw"}},"Sign In")),s.a.createElement(f.a,{container:!0,item:!0,direciton:"row",justify:"center",alignItems:"center",xs:12},s.a.createElement("hr",{style:{width:"5vw"}}),s.a.createElement(E.a,{color:"textSecondary"},"Or"),s.a.createElement("hr",{style:{width:"5vw"}})),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(y.a,{onClick:this.loginWithOAuth,variant:"contained",color:"primary"},"Sign In with NetID")))))),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(q,{open:this.state.showStatus,severity:this.state.statusSeverity,closeStatus:this.closeShowStatus,message:this.state.statusMessage}))))}}]),t}(s.a.Component),Z=a(587),$=a(598),ee=a(588),te=a(596),ae=a(257),ne=a(575),se=a(256),re=a.n(se),ie=a(5),oe=a(597),le=a(121);!function(e){e.create="create/",e.delete="delete/",e.edit="edit/",e.view="view/",e.detailView="detailView/",e.search="search/",e.VENDOR_VALUES="assistedvendor/",e.UPLOAD_FILE="import/",e.EXPORT_FILE="export/"}(V||(V={})),function(e){e.Vendor="vendor",e.model_number="model_number",e.mount_type="mount_type",e.Height="height",e.display_color="display_color",e.ethernet_ports="ethernet_ports",e.power_ports="power_ports",e.CPU="cpu",e.Memory="memory",e.Storage="storage",e.Comment="comment"}(R||(R={}));var ce=a(134),ue=a(122),me=a.n(ue),de=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(ce.a,{elevation:3,style:{minHeight:this.props.height}},s.a.createElement(f.a,{container:!0,spacing:2,direction:"row",justify:"flex-start",alignItems:"center",style:{padding:"10px"}},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{variant:"h6"},"Export")),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,null,"Download what is currently shown in the table.")),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(y.a,{onClick:this.props.downloadTable,variant:"contained",color:"primary",startIcon:s.a.createElement(me.a,null),style:{width:"100%"}},"Export")),s.a.createElement(f.a,{container:!0,item:!0,direciton:"row",justify:"center",alignItems:"center",xs:12},s.a.createElement("hr",{style:{width:"5vw"}}),s.a.createElement(E.a,{color:"textSecondary"},"Or"),s.a.createElement("hr",{style:{width:"5vw"}})),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(y.a,{onClick:this.props.showAll,variant:"contained",color:"default",style:{width:"100%"}},"Show all models")))))}}]),t}(s.a.Component),pe=a(603);function he(e,t){return{label:t,name:e}}var ge={vendor:he("vendor","Vendor"),modelNumber:he("model_number","Model Number"),height:he("height","Height"),displayColor:he("display_color","Display Color"),ethernetPorts:he("ethernet_ports","Network Ports"),powerPorts:he("power_ports","Power Ports"),cpu:he("cpu","CPU"),memory:he("memory","Memory"),storage:he("storage","Storage"),comments:he("comments","Comments")},fe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={filters:{}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"updateSearchText",value:function(e){if(this.state.filters.hasOwnProperty(e.target.id)){var t=this.state.filters;t[e.target.id]=e.target.value,this.setState({filters:t}),this.forceUpdate()}else{var a=this.state.filters;a[e.target.id]=e.target.value,this.setState({filters:a}),this.forceUpdate()}}},{key:"search",value:function(){this.props.search(this.state.filters)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(ce.a,{elevation:3,style:{minHeight:this.props.height}},s.a.createElement(f.a,{container:!0,spacing:2,direction:"row",justify:"flex-start",alignItems:"center",style:{padding:"10px"}},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{variant:"h5"},"Search")),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(pe.a,{id:"vendor",options:this.props.options,includeInputInList:!0,freeSolo:!0,renderInput:function(t){return s.a.createElement(w.a,Object.assign({},t,{label:ge.vendor.label,name:ge.vendor.name,onChange:e.updateSearchText.bind(e),onBlur:e.updateSearchText.bind(e),variant:"outlined",fullWidth:!0}))}})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(w.a,{id:"model_number",variant:"outlined",label:"Model Number",name:"model_number",onChange:this.updateSearchText.bind(this),style:{width:"100%"}})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(w.a,{id:"min_height",type:"number",variant:"outlined",label:"Min Height",name:"min_height",onChange:this.updateSearchText.bind(this),style:{width:"100%"},InputProps:{inputProps:{min:1,max:42}}})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(w.a,{id:"max_height",type:"number",variant:"outlined",label:"Max Height",name:"max_height",onChange:this.updateSearchText.bind(this),style:{width:"100%"},InputProps:{inputProps:{min:1,max:42}}})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(w.a,{id:"min_ethernet_ports",type:"number",variant:"outlined",label:"Min Network Ports",name:"min_ethernet_ports",onChange:this.updateSearchText.bind(this),style:{width:"100%"},InputProps:{inputProps:{min:0}}})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(w.a,{id:"max_ethernet_ports",type:"number",variant:"outlined",label:"Max Network Ports",name:"max_ethernet_ports",onChange:this.updateSearchText.bind(this),style:{width:"100%"},InputProps:{inputProps:{min:0}}})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(w.a,{id:"min_power_ports",type:"number",variant:"outlined",label:"Min Power Ports",name:"min_power_ports",onChange:this.updateSearchText.bind(this),style:{width:"100%"},InputProps:{inputProps:{min:0}}})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(w.a,{id:"max_power_ports",type:"number",variant:"outlined",label:"Max Power Ports",name:"max_power_ports",onChange:this.updateSearchText.bind(this),style:{width:"100%"},InputProps:{inputProps:{min:0}}})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(w.a,{id:"cpu",variant:"outlined",label:"CPU",name:"cpu",onChange:this.updateSearchText.bind(this),style:{width:"100%"}})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(w.a,{id:"min_memory",type:"number",variant:"outlined",label:"Min Memory",name:"min_memory",onChange:this.updateSearchText.bind(this),style:{width:"100%"},InputProps:{inputProps:{min:0}}})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(w.a,{id:"max_memory",type:"number",variant:"outlined",label:"Max Memory",name:"max_memory",onChange:this.updateSearchText.bind(this),style:{width:"100%"},InputProps:{inputProps:{min:0}}})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(w.a,{id:"storage",variant:"outlined",label:"Storage",name:"storage",onChange:this.updateSearchText.bind(this),style:{width:"100%"}})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(w.a,{id:"comment",variant:"outlined",label:"Comment",name:"comment",onChange:this.updateSearchText.bind(this),style:{width:"100%"}})),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(y.a,{onClick:this.search.bind(this),variant:"contained",color:"primary",style:{width:"100%"}},"Search")))))}}]),t}(s.a.Component),be=a(261),ve=a(260),Ee=a(524),we=a(572),ye=a(574),Se=a(525),Ce=a(576),_e=a(531),ke=a(529),Pe=a(90),xe=a.n(Pe),Oe=a(59);a(462);function Me(e,t){return{label:t,name:e}}var De={vendor:Me("vendor","Vendor"),modelNumber:Me("model_number","Model Number"),height:Me("height","Height"),displayColor:Me("display_color","Display Color"),ethernetPorts:Me("ethernet_ports","Network Ports"),powerPorts:Me("power_ports","Power Ports"),cpu:Me("cpu","CPU"),memory:Me("memory","Memory"),storage:Me("storage","Storage"),comment:Me("comment","Comment"),mount_type:Me("mount_type","Mount Type")},Ae="#B0BC00",Ne=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).updateColor=function(e){a.setState({color:e}),a.props.updateModelColor(e.hex)},a.showModal=function(){a.setState({showModal:!0})},a.showImportModal=function(){a.setState({showImportModal:!0})},a.closeModal=function(){a.setState({showModal:!1,networkPorts:[],numPorts:0,mountType:"rackmount"})},a.closeImportModal=function(){a.setState({showImportModal:!1})},a.onSuccess=function(e){e&&(a.closeModal(),a.setState({mountType:"rackmount"}),a.updateColor(Ae))},a.create=function(e){e.preventDefault();var t=void 0===a.state.color.hex?a.state.color:a.state.color.hex;a.props.createModel(a.state.networkPorts,a.state.mountType,t,a.onSuccess)},a.uploadFile=function(){var e=new FormData;e.append("file",a.state.importedFile),a.props.sendUploadedFile(e)},a.chooseFile=function(e){a.setState({importedFile:e.target.files[0]})},a.updateNetworkPorts=function(e){for(var t=""===e.target.value?0:e.target.value,n=[],s=1;s<=t;s++)n.push(s.toString());a.setState({networkPorts:n,numPorts:t}),a.props.updateModelCreator(e)},a.updatePort=function(e,t){var n=a.state.networkPorts;n[e]=t.target.value,a.setState({networkPorts:n})},a.updateMountType=function(e){a.setState({mountType:e.target.value})},a.state={color:Ae,showModal:!1,showImportModal:!1,importedFile:null,networkPorts:[],numPorts:0,mountType:"rackmount"},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return s.a.createElement("div",null,s.a.createElement(ce.a,{style:{minHeight:this.props.height},elevation:3},s.a.createElement(f.a,{container:!0,spacing:2,direction:"row",justify:"flex-start",alignItems:"center",style:{padding:"10px"}},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{variant:"h5"},"Add")),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,null,"Create a new model.")),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(y.a,{variant:"contained",style:{width:"100%",background:"green",color:"white"},onClick:this.showModal},"Create")),s.a.createElement(f.a,{container:!0,item:!0,direciton:"row",justify:"center",alignItems:"center",xs:12},s.a.createElement("hr",{style:{width:"5vw"}}),s.a.createElement(E.a,{color:"textSecondary"},"Or"),s.a.createElement("hr",{style:{width:"5vw"}})),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(y.a,{variant:"contained",color:"primary",style:{width:"100%"},startIcon:s.a.createElement(xe.a,null),onClick:function(){e.showImportModal()}},"Import")))),s.a.createElement(be.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:this.state.showModal,onClose:this.closeModal,closeAfterTransition:!0},s.a.createElement(ve.a,{in:this.state.showModal},s.a.createElement(Ee.a,{open:this.state.showModal},s.a.createElement("div",{className:t.grid},s.a.createElement("form",{onSubmit:function(t){return e.create(t)}},s.a.createElement(f.a,{container:!0,spacing:1,direction:"row",justify:"flex-start",alignItems:"center"},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{variant:"h5"},"New Model")),s.a.createElement(f.a,{item:!0,xs:12,sm:12,md:6,lg:6},s.a.createElement(pe.a,{id:"select-vendor",options:this.props.options,includeInputInList:!0,freeSolo:!0,renderInput:function(t){return s.a.createElement(w.a,Object.assign({},t,{required:!0,label:De.vendor.label,name:De.vendor.name,onChange:e.props.updateModelCreator,onBlur:e.props.updateModelCreator,variant:"outlined",fullWidth:!0}))}})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(w.a,{id:"standard-basic",required:!0,variant:"outlined",label:De.modelNumber.label,name:De.modelNumber.name,onChange:this.props.updateModelCreator})),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(_e.a,{id:"select-mount-type-label"},"Mount Type"),s.a.createElement(ke.a,{labelId:"select-mount-type-label",id:"select-mount-type",value:this.state.mountType,required:!0,onChange:this.updateMountType,style:{width:"100%"}},s.a.createElement(ne.a,{value:"rackmount"},"Rack Mounted"),s.a.createElement(ne.a,{value:"chassis"},"Blade Chassis"),s.a.createElement(ne.a,{value:"blade"},"Blade"))),"blade"!==this.state.mountType?s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(w.a,{type:"number",id:"standard-basic",required:!0,variant:"outlined",label:De.height.label,name:De.height.name,onChange:this.props.updateModelCreator,InputProps:{inputProps:{min:1,max:42}},style:{width:"100%"}})):null,"blade"!==this.state.mountType?s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(w.a,{type:"number",id:"standard-basic",variant:"outlined",label:De.ethernetPorts.label,name:De.ethernetPorts.name,onChange:this.updateNetworkPorts,InputProps:{inputProps:{min:0}}})):null,"blade"!==this.state.mountType?s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(w.a,{type:"number",id:"standard-basic",variant:"outlined",label:De.powerPorts.label,name:De.powerPorts.name,onChange:this.props.updateModelCreator,InputProps:{inputProps:{min:0}}})):null,s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(w.a,{id:"standard-basic",variant:"outlined",label:De.cpu.label,name:De.cpu.name,onChange:this.props.updateModelCreator})),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(w.a,{type:"number",id:"standard-basic",variant:"outlined",label:De.memory.label,name:De.memory.name,onChange:this.props.updateModelCreator,InputProps:{inputProps:{min:0}},style:{width:"100%"}})),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(w.a,{id:"standard-basic",variant:"outlined",label:De.storage.label,name:De.storage.name,onChange:this.props.updateModelCreator})),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(w.a,{rowsMax:3,multiline:!0,style:{width:"100%"},id:"standard-basic",variant:"outlined",label:De.comment.label,name:De.comment.name,onChange:this.props.updateModelCreator})),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(E.a,null,"Display Color"),s.a.createElement(Oe.CompactPicker,{color:this.state.color,onChange:this.updateColor})),s.a.createElement(f.a,{item:!0,xs:12},"blade"!==this.state.mountType?s.a.createElement(we.a,{className:t.root,subheader:s.a.createElement(ye.a,{component:"div",id:"nested-list-subheader"},"Network Ports"),style:{maxHeight:"30vh",overflow:"auto"}},Array.from({length:this.state.numPorts},(function(e,t){return t})).map((function(t,a){var n="list-label-".concat(e.state.networkPorts[a]);return s.a.createElement(Se.a,{key:a,role:void 0,dense:!0,button:!0},s.a.createElement(Ce.a,{id:n,primary:"Port "+(a+1).toString()}),s.a.createElement(w.a,{defaultValue:e.state.networkPorts[a],onChange:function(t){return e.updatePort(a,t)}}))})),0===this.state.numPorts?s.a.createElement(Se.a,{key:"add-items",role:void 0,dense:!0},s.a.createElement(Ce.a,{id:"add-items-label",primary:"Enter the number of network ports above"})):null):null),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(y.a,{variant:"contained",color:"primary",type:"submit",style:{width:"100%"}},"Create")),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(y.a,{variant:"contained",color:"secondary",onClick:this.closeModal,style:{width:"100%"}},"Cancel")))))))),s.a.createElement(be.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:this.state.showImportModal,onClose:this.closeImportModal,closeAfterTransition:!0},s.a.createElement(ve.a,{in:this.state.showImportModal},s.a.createElement(Ee.a,{open:this.state.showImportModal},s.a.createElement("div",{className:t.grid},s.a.createElement(f.a,{container:!0,spacing:1,direction:"row",justify:"flex-start",alignItems:"center"},s.a.createElement(f.a,{item:!0,xs:9},s.a.createElement(E.a,{variant:"h5"},"Import Models")),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(y.a,{onClick:this.closeImportModal,style:{width:"100%"}},"Close")),s.a.createElement(f.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center",xs:12},s.a.createElement("input",{type:"file",accept:".csv",name:"models_upload",onChange:function(t){return e.chooseFile(t)}})),s.a.createElement(f.a,{container:!0,item:!0,direciton:"row",justify:"center",alignItems:"center",xs:12},s.a.createElement(y.a,{variant:"contained",color:"primary",style:{width:"40%"},onClick:function(){e.uploadFile()}},"Upload File"))))))))}}]),t}(s.a.Component),Ie=Object(ie.a)((function(e){return{root:{flexGrow:1},modal:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},grid:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3),width:"50%"},progress:{display:"flex","& > * + *":{marginLeft:e.spacing(2)}}}}))(Ne),je=a(577),Le=a(578),Te=a(579),Ue=a(580),Ve=a(581),Re=a(582),Be=a(571),Fe=a(583),He=a(68),We=a.n(He),Ge=a(246),qe=a.n(Ge),ze=a(245),Ke=a.n(ze),Je=a(74),Ye=a.n(Je),Xe="There was an error in the backend. Could not perform the given model operation at this time.",Qe="models/";function Ze(e,t){return{label:t,name:e}}var $e,et={vendor:Ze("vendor","Vendor"),modelNumber:Ze("model_number","Model Number"),mount_type:Ze("mount_type","Mount Type"),height:Ze("height","Height"),displayColor:Ze("display_color","Display Color"),ethernetPorts:Ze("ethernet_ports","Network Ports"),powerPorts:Ze("power_ports","Power Ports"),cpu:Ze("cpu","CPU"),memory:Ze("memory","Memory"),storage:Ze("storage","Storage"),comment:Ze("comment","Comment")},tt={rackmount:"Rack Mounted",chassis:"Blade Chassis",blade:"Blade"},at=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).updateColor=function(e){var t=a.state.detailedValues;t.display_color=e.hex,a.setState({color:e,detailedValues:t}),a.props.updateModelColor(e.hex)},a.showDetailedView=function(e){a.setState({row:e,showDetailedView:!0,detailViewLoading:!0,color:null===e["Display Color"]?"#000000":e["Display Color"],networkPorts:null===e["Network Ports"]?[]:e["Network Ports"],numPorts:null===e["Network Ports"]?0:e["Network Ports"].length,mountType:e["Mount Type"]}),a.detailViewModel(e.Vendor,e["Model Number"])},a.detailViewModel=function(e,t){p.a.post(U(Qe,V.detailView),{vendor:e,model_number:t}).then((function(e){var t=e.data.models[0];a.setState({detailedValues:t,detailViewLoading:!1,originalVendor:t.vendor,originalModelNumber:t.model_number,originalHeight:t.height})})).catch((function(e){this.setState({showStatus:!0,statusMessage:Xe,statusSeverity:"error"})}))},a.closeDetailedView=function(){a.setState({showDetailedView:!1,row:null,color:"#000000",originalVendor:"",originalModelNumber:"",originalHeight:""})},a.showDeleteModal=function(e){a.setState({showDeleteModal:!0,originalVendor:e.Vendor,originalModelNumber:e["Model Number"]})},a.closeDeleteModal=function(){a.setState({showDeleteModal:!1,originalVendor:"",originalModelNumber:"",originalHeight:""})},a.delete=function(){a.props.deleteModel(a.state.originalVendor,a.state.originalModelNumber),a.closeDeleteModal()},a.onEditSuccess=function(e){e&&a.closeDetailedView()},a.edit=function(e){e.preventDefault(),a.props.editModel(a.state.originalVendor,a.state.originalModelNumber,a.state.originalHeight,a.state.detailedValues,a.state.networkPorts,a.onEditSuccess)},a.clickInfo=function(e,t){a.setState({popoverAnchor:e.target,networkPorts:t})},a.clickComment=function(e,t){a.setState({commentPopover:e.target,comment:t})},a.handlePopoverClose=function(){a.setState({popoverAnchor:null})},a.handleCommentPopoverClose=function(){a.setState({commentPopover:null})},a.updateNetworkPorts=function(e){for(var t=""===e.target.value?0:e.target.value,n=[],s=1;s<=t;s++)n.push(s.toString());a.setState({networkPorts:n,numPorts:t}),a.updateModelEdited(e)},a.updatePort=function(e,t){var n=a.state.networkPorts;n[e]=t.target.value,a.setState({networkPorts:n})},a.save=function(){a.props.editModel(a.state.originalVendor,a.state.originalModelNumber,a.state.originalHeight,a.state.detailedValues,a.state.networkPorts),a.closeDetailedView()},a.updateModelEdited=function(e){a.state.detailedValues[e.target.name]=e.target.value,a.forceUpdate()},a.state={popoverAnchor:null,commentPopover:null,networkPorts:[],numPorts:0,showDetailedView:!1,showDeleteModal:!1,row:null,comment:"",color:"#000",detailViewLoading:!1,detailedValues:{vendor:"",model_number:"",mount_type:"",height:"",display_color:"",ethernet_ports:[],power_ports:"",cpu:"",memory:"",storage:"",comment:""},originalVendor:"",originalModelNumber:"",originalHeight:"",mountType:null},p.a.defaults.headers.common.token=a.props.token,p.a.defaults.headers.common.privilege=a.props.privilege,a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return s.a.createElement("div",null,s.a.createElement(je.a,{component:ce.a},s.a.createElement(Le.a,{style:{minWidth:1e3},"aria-label":"simple table"},s.a.createElement(Te.a,null,s.a.createElement(Ue.a,null,this.props.columns.map((function(e){return s.a.createElement(Ve.a,{align:"center"},s.a.createElement("span",{id:e,style:{fontWeight:"bold"}},e))})))),s.a.createElement(Re.a,null,this.props.vals.map((function(t,a){return s.a.createElement(Ue.a,{id:a,hover:!0},e.props.privilege.admin||e.props.privilege.model?s.a.createElement(Ve.a,{scope:"row",align:"center"},s.a.createElement(y.a,{startIcon:s.a.createElement(Ye.a,null),onClick:function(){return e.showDetailedView(t)}}),s.a.createElement(y.a,{startIcon:s.a.createElement(We.a,null),onClick:function(){return e.showDeleteModal(t)}})):null,e.props.keys.map((function(a){return"Display Color"===a?s.a.createElement(Ve.a,{scope:"row",align:"center",style:{backgroundColor:t[a]}}):"Network Ports"===a?s.a.createElement(Ve.a,{scope:"row",align:"center"},null===t[a]?"":t[a].length,null==t[a]?null:s.a.createElement(y.a,{style:{margin:"5px"}},s.a.createElement(Ke.a,{onClick:function(n){e.clickInfo(n,t[a])}}))):"Comment"==a?null!==t.Comment&&t.Comment.length>0?s.a.createElement(Ve.a,{scope:"row",align:"center"},s.a.createElement(y.a,{startIcon:s.a.createElement(qe.a,null),onClick:function(a){return e.clickComment(a,t.Comment)}})):s.a.createElement(Ve.a,{scope:"row",align:"center"}):"Mount Type"==a?s.a.createElement(Ve.a,{scope:"row",align:"center"},tt[t[a]]):s.a.createElement(Ve.a,{scope:"row",align:"center"},t[a])})))}))))),s.a.createElement(Be.a,{id:Boolean(this.state.popoverAnchor)?"simple-popover":void 0,open:Boolean(this.state.popoverAnchor),anchorEl:this.state.popoverAnchor,onClose:this.handlePopoverClose,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},s.a.createElement(we.a,{className:t.root,subheader:s.a.createElement(ye.a,{component:"div",id:"nested-list-subheader"},"Network Ports")},this.state.networkPorts.map((function(e){var t="checkbox-list-label-".concat(e);return s.a.createElement(Se.a,{key:e,role:void 0,dense:!0,button:!0},s.a.createElement(Ce.a,{id:t,primary:e}))})))),s.a.createElement(Be.a,{id:Boolean(this.state.commentPopover)?"simple-popover":void 0,open:Boolean(this.state.commentPopover),anchorEl:this.state.commentPopover,onClose:this.handleCommentPopoverClose,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},s.a.createElement(E.a,{variant:"body1",style:{padding:"30px"}},this.state.comment)),s.a.createElement(be.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:this.state.showDetailedView,onClose:this.closeDetailedView,closeAfterTransition:!0},s.a.createElement(ve.a,{in:this.state.showDetailedView},s.a.createElement(Ee.a,{open:this.state.showDetailedView},s.a.createElement("div",{className:t.grid},this.state.detailViewLoading?s.a.createElement(Fe.a,null):s.a.createElement("form",{onSubmit:function(t){return e.edit(t)}},s.a.createElement(f.a,{container:!0,spacing:1,direction:"row",justify:"flex-start",alignItems:"center"},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{variant:"h5"},"Model Details")),s.a.createElement(f.a,{item:!0,xs:12,sm:12,md:6,lg:6},s.a.createElement(pe.a,{id:"select-vendor",options:this.props.options,defaultValue:null==this.state.detailedValues?"":this.state.detailedValues.vendor,includeInputInList:!0,freeSolo:!0,renderInput:function(t){return s.a.createElement(w.a,Object.assign({},t,{label:et.vendor.label,required:!0,name:et.vendor.name,onChange:e.updateModelEdited,onBlur:e.updateModelEdited,variant:"outlined",fullWidth:!0}))}})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(w.a,{id:"standard-basic",variant:"outlined",label:et.modelNumber.label,name:et.modelNumber.name,defaultValue:null==this.state.detailedValues?"":this.state.detailedValues.model_number,onChange:this.updateModelEdited})),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(_e.a,{id:"select-mount-type-label"},"Mount Type"),s.a.createElement(ke.a,{labelId:"select-mount-type-label",id:"select-mount-type",name:et.mount_type.name,value:this.state.mountType,required:!0,onChange:this.updateModelEdited,style:{width:"100%"}},s.a.createElement(ne.a,{value:"rackmount"},"Rack Mounted"),s.a.createElement(ne.a,{value:"chassis"},"Blade Chassis"),s.a.createElement(ne.a,{value:"blade"},"Blade"))),"blade"!==this.state.mountType?s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(w.a,{type:"number",id:"standard-basic",variant:"outlined",label:et.height.label,name:et.height.name,defaultValue:null==this.state.detailedValues?"":this.state.detailedValues.height,onChange:this.updateModelEdited,InputProps:{inputProps:{min:1,max:42}},style:{width:"100%"}})):null,"blade"!==this.state.mountType?s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(w.a,{type:"number",id:"standard-basic",variant:"outlined",label:et.ethernetPorts.label,name:et.ethernetPorts.name,defaultValue:null==this.state.detailedValues?"":null==this.state.detailedValues.ethernet_ports?"":this.state.detailedValues.ethernet_ports.length,onChange:this.updateNetworkPorts,InputProps:{inputProps:{min:0}}})):null,"blade"!==this.state.mountType?s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(w.a,{type:"number",id:"standard-basic",variant:"outlined",label:et.powerPorts.label,name:et.powerPorts.name,defaultValue:null==this.state.detailedValues?"":this.state.detailedValues.power_ports,onChange:this.updateModelEdited,InputProps:{inputProps:{min:0}}})):null,s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(w.a,{id:"standard-basic",variant:"outlined",label:et.cpu.label,name:et.cpu.name,defaultValue:null==this.state.detailedValues?"":this.state.detailedValues.cpu,onChange:this.updateModelEdited})),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(w.a,{type:"number",id:"standard-basic",variant:"outlined",label:et.memory.label,name:et.memory.name,defaultValue:null==this.state.detailedValues?"":this.state.detailedValues.memory,onChange:this.updateModelEdited,InputProps:{inputProps:{min:0}},style:{width:"100%"}})),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(w.a,{id:"standard-basic",variant:"outlined",label:et.storage.label,name:et.storage.name,defaultValue:null==this.state.detailedValues?"":this.state.detailedValues.storage,onChange:this.updateModelEdited})),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(w.a,{rowsMax:3,multiline:!0,style:{width:"100%"},id:"standard-basic",variant:"outlined",label:et.comment.label,name:et.comment.name,defaultValue:null==this.state.detailedValues?"":this.state.detailedValues.comment,onChange:this.updateModelEdited})),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(E.a,null,"Display Color"),s.a.createElement(Oe.CompactPicker,{color:this.state.color,onChange:this.updateColor})),"blade"!==this.state.mountType?s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(we.a,{className:t.root,subheader:s.a.createElement(ye.a,{component:"div",id:"nested-list-subheader"},"Network Ports"),style:{maxHeight:"30vh",overflow:"auto"}},Array.from({length:this.state.numPorts},(function(e,t){return t})).map((function(t,a){var n="list-label-".concat(e.state.networkPorts[a]);return s.a.createElement(Se.a,{key:a,role:void 0,dense:!0,button:!0},s.a.createElement(Ce.a,{id:n,primary:"Port "+(a+1).toString()}),s.a.createElement(w.a,{defaultValue:e.state.networkPorts[a],onChange:function(t){return e.updatePort(a,t)}}))})),0===this.state.numPorts?s.a.createElement(Se.a,{key:"add-items",role:void 0,dense:!0},s.a.createElement(Ce.a,{id:"add-items-label",primary:"Enter the number of network ports above"})):null)):null,s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(y.a,{variant:"contained",color:"primary",type:"submit",style:{width:"100%"}},"Save")),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(y.a,{variant:"contained",color:"secondary",onClick:this.closeDetailedView,style:{width:"100%"}},"Cancel")))))))),s.a.createElement(be.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:this.state.showDeleteModal,onClose:this.closeDeleteModal,closeAfterTransition:!0},s.a.createElement(ve.a,{in:this.state.showDeleteModal},s.a.createElement(Ee.a,{open:this.state.showDeleteModal},s.a.createElement("div",{className:t.grid},s.a.createElement(f.a,{container:!0,spacing:1,direction:"row",justify:"flex-start",alignItems:"center"},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{variant:"h5"},"Are you sure?")),s.a.createElement(f.a,{item:!0,xs:12,sm:12,md:6,lg:6},s.a.createElement(E.a,{variant:"body1"},"Doing this will remove the model permanently.")),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(y.a,{variant:"contained",color:"secondary",onClick:this.delete,style:{width:"100%"}},"Yes")),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(y.a,{variant:"contained",color:"primary",onClick:this.closeDeleteModal,style:{width:"100%"}},"No"))))))))}}]),t}(s.a.Component),nt=Object(ie.a)((function(e){return{root:{flexGrow:1},modal:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",margin:"0 auto",overflow:"scroll"},grid:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3),width:"50%"},progress:{display:"flex","& > * + *":{marginLeft:e.spacing(2)}}}}))(at),st=["Vendor","Model Number","Mount Type","Height","Display Color","Network Ports","Power Ports","CPU","Memory","Storage","Comment"],rt=["Actions","Vendor","Model Number","Mount Type","Height","Display Color","Network Ports","Power Ports","CPU","Memory","Storage","Comment"],it={vendor:"Vendor",model_number:"Model Number",mount_type:"Mount Type",height:"Height",display_color:"Display Color",ethernet_ports:"Network Ports",power_ports:"Power Ports",cpu:"CPU",memory:"Memory",storage:"Storage",comment:"Comment"},ot="models/",lt=function(e){function t(e){var a,n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).createModel=function(e,t,a,s){p.a.post(U(ot,V.create),Object(h.a)({vendor:n.state.createdModel[R.Vendor],model_number:n.state.createdModel[R.model_number],mount_type:t,height:n.state.createdModel[R.Height],display_color:a,ethernet_ports:n.state.createdModel[R.ethernet_ports],power_ports:n.state.createdModel[R.power_ports],cpu:n.state.createdModel[R.CPU],memory:n.state.createdModel[R.Memory],storage:n.state.createdModel[R.Storage],comment:n.state.createdModel[R.Comment]},"ethernet_ports",e)).then((function(e){"success"===e.data.message?(n.setState({showStatus:!0,statusMessage:"Successfully created model",statusSeverity:"success",createdModel:{vendor:"",model_number:"",mount_type:"",height:"",display_color:"",ethernet_ports:"",power_ports:"",cpu:"",memory:"",storage:"",comment:""},showCreateModal:!1}),n.getVendorList(),n.searchModels(),s(!0)):(n.setState({createshowStatus:!0,showStatus:!0,statusMessage:e.data.message,statusSeverity:"error"}),s(!1))})).catch(n.setState({createshowStatus:!0,statusMessage:Xe,statusSeverity:"error"}))},n.editModel=function(e,t,a,s,r,i){p.a.post(U(ot,V.edit),{vendorOriginal:e,model_numberOriginal:t,heightOriginal:a,vendor:s[R.Vendor],model_number:s[R.model_number],mount_type:s[R.mount_type],height:s[R.Height],display_color:s[R.display_color],ethernet_ports:r,power_ports:s[R.power_ports],cpu:s[R.CPU],memory:s[R.Memory],storage:s[R.Storage],comment:s[R.Comment]}).then((function(e){"success"===e.data.message?(n.setState({showStatus:!0,statusSeverity:"success",statusMessage:"Successfully edited model",showDetailedView:!1}),n.getVendorList(),n.searchModels(),i(!0)):(n.setState({showStatus:!0,statusMessage:e.data.message,statusSeverity:"error"}),i(!1))})).catch()},n.deleteModel=function(e,t){p.a.post(U(ot,V.delete),{vendor:e,model_number:t}).then((function(e){"success"===e.data.message?(n.setState({showStatus:!0,statusSeverity:"success",statusMessage:"Successfully deleted model"}),n.getVendorList(),n.searchModels()):n.setState({showStatus:!0,statusMessage:e.data.message,statusSeverity:"error"})}))},n.detailViewModel=function(e,t){p.a.post(U(ot,V.detailView),{vendor:e,model_number:t}).then((function(e){n.setState({detailedValues:e.data.models[0],detailViewLoading:!1})})).catch((function(e){this.setState({showStatus:!0,statusMessage:Xe,statusSeverity:"error"})})),n.setState({viewVendor:"",viewModel:""})},n.searchModels=function(){var e={vendor:n.state.searchVendor,model_number:n.state.searchModelNum,mount_type:n.state.searchMountType,min_height:n.state.searchMinHeight,max_height:n.state.searchMaxHeight,min_ethernet_ports:n.state.searchMinNetworkPorts,max_ethernet_ports:n.state.searchMaxNetworkPorts,min_power_ports:n.state.searchMinPower,max_power_ports:n.state.searchMaxPower,cpu:n.state.searchCPU,min_memory:n.state.searchMinMem,max_memory:n.state.searchMaxMem,storage:n.state.searchStore,comment:n.state.searchComment};p.a.post(U(ot,V.search),{filter:{vendor:"",model_number:"",height:""}}).then((function(t){var a=void 0===t.data.models?[]:t.data.models,s=[];Object.values(a).forEach((function(t){var a={};Object.keys(t).forEach((function(e){e in it?a[it[e]]=t[e]:a[e]=t[e]})),(void 0==e.vendor||""===e.vendor||void 0===a.Vendor||a.Vendor.includes(e.vendor))&&(void 0===e.model_number||""===e.model_number||a["Model Number"].includes(e.model_number))&&(void 0===e.mount_type||""===e.mount_type||a["Mount Type"]===e.mount_type)&&(void 0===e.min_height||""===e.min_height||a.Height>=parseInt(e.min_height))&&(void 0===e.max_height||""===e.max_height||a.Height<=parseInt(e.max_height))&&(void 0===e.min_ethernet_ports||""===e.min_ethernet_ports||a["Network Ports"].length>=parseInt(e.min_ethernet_ports))&&(void 0===e.max_ethernet_ports||""===e.max_ethernet_ports||a["Network Ports"].length<=parseInt(e.max_ethernet_ports))&&(void 0===e.min_power_ports||""===e.min_power_ports||a["Power Ports"]>=parseInt(e.min_power_ports))&&(void 0===e.max_power_ports||""===e.max_power_ports||a["Power Ports"]<=parseInt(e.max_power_ports))&&(void 0===e.cpu||""===e.cpu||null===a.CPU||a.CPU.includes(e.cpu))&&(void 0===e.min_memory||""===e.min_memory||a.Memory>=parseInt(e.min_memory))&&(void 0===e.max_memory||""===e.max_memory||a.Memory<=parseInt(e.max_memory))&&(void 0===e.storage||""===e.storage||null===a.Storage||a.Storage.includes(e.storage))&&(void 0===e.comment||""===e.comment||null===a.Comment||a.Comment.includes(e.comment))&&s.push(a)})),n.setState({rows:s,items:a})})),n.setState({searchText:""})},n.getVendorList=function(){p.a.get(U(ot,V.VENDOR_VALUES),{}).then((function(e){return n.setState({vendorsList:e.data.results})})),n.setState({madeVendorQuery:!0})},n.sendUploadedFile=function(e){p.a.post(U("models/",V.UPLOAD_FILE),e).then((function(e){"success"===e.data.message?(n.setState({showStatus:!0,statusMessage:e.data.summary,statusSeverity:"success",showImportModal:!1}),n.searchModels()):n.setState({showStatus:!0,statusMessage:e.data.message,statusSeverity:"error"})}))},n.downloadTable=function(){p.a.post(U(ot,V.EXPORT_FILE),{filter:{vendor:n.state.searchVendor,model_number:n.state.searchModelNum,height:n.state.searchHeight}}).then((function(e){n.setState({csvData:e.data.csvData}),n.csvLink.link.click()}))},n.search=function(e){n.setState({searchVendor:e.vendor,searchModelNum:e.model_number,searchMountType:e.mount_type,searchMinHeight:e.min_height,searchMaxHeight:e.max_height,searchMinNetworkPorts:e.min_ethernet_ports,searchMaxNetworkPorts:e.max_ethernet_ports,searchMinPower:e.min_power_ports,searchMaxPower:e.max_power_ports,searchCPU:e.cpu,searchMinMem:e.min_memory,searchMaxMem:e.max_memory,searchStore:e.storage,searchComment:e.comment},n.searchModels)},n.searchAll=function(){n.search({vendor:"",model_number:"",height:""})},n.openCreateModal=function(){n.setState({showCreateModal:!0})},n.openImportModal=function(){n.setState({showImportModal:!0})},n.showDetailedView=function(e){n.setState({detailViewLoading:!0});var t=e.Vendor,a=e["Model Number"];n.detailViewModel(t,a)},n.closeCreateModal=function(){n.setState({showCreateModal:!1})},n.closeImportModal=function(){n.setState({showImportModal:!1})},n.closeDetailedView=function(){n.setState({showDetailedView:!1})},n.updateModelCreator=function(e){n.state.createdModel[e.target.name]=e.target.value,n.forceUpdate()},n.updateModelColor=function(e){n.state.createdModel.display_color=e,n.forceUpdate()},n.updateModelColorDetails=function(e){n.state.detailedValues.display_color=e,n.forceUpdate()},n.updateSearchText=function(e){n.setState({searchText:e.target.value})},n.closeShowStatus=function(e,t){"clickaway"!==t&&n.setState({showStatus:!1})},n.createStatusClose=function(e,t){"clickaway"!==t&&n.setState({createshowStatus:!1})},n.detailStatusClose=function(e,t){"clickaway"!==t&&n.setState({detailshowStatus:!1})},n.state=(a={showCreateModal:!1,showImportModal:!1,items:[],rows:[],createdModel:{vendor:"",model_number:"",mount_type:"",height:"",display_color:"#A52A2A",ethernet_ports:"",power_ports:"",cpu:"",memory:"",storage:"",comment:""},createdVendor:"",createdModelNum:"",createdMountType:"",createdHeight:"",createdDispClr:"",createdEthPorts:"",createdPwrPorts:"",createdCPU:"",createdMem:"",createdStorage:"",createdComments:"",detailedValues:{vendor:"",model_number:"",mount_type:"",height:"",display_color:"",ethernet_ports:"",power_ports:"",cpu:"",memory:"",storage:"",comment:""},deleteVendor:"",deleteModel:"",viewVendor:"",viewModel:"",searchText:"",searchVendor:"",searchModelNum:"",searchMountType:"",searchMinHeight:"",searchMaxHeight:"",searchMinNetworkPorts:"",searchMaxNetworkPorts:"",searchMinPower:"",searchMaxPower:"",searchCPU:"",searchMinMem:"",searchMaxMem:"",searchStore:"",searchComment:"",csvData:"",showStatus:!1,statusSeverity:"",statusMessage:"",detailshowStatus:!1,detailStatusSeverity:"",detailStatusMessage:"",createshowStatus:!1},Object(h.a)(a,"statusSeverity"," "),Object(h.a)(a,"statusMessage",""),Object(h.a)(a,"vendorsList",[]),Object(h.a)(a,"madeVendorQuery",!1),a),p.a.defaults.headers.common.token=n.props.token,p.a.defaults.headers.common.privilege=n.props.privilege,n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.searchModels(),this.getVendorList()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(f.a,{container:!0,spacing:5,direction:"row",justify:"flex-start",alignItems:"center",style:{margin:"0px",maxWidth:"95vw"}},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{variant:"h4"},"Models")),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},this.props.privilege.admin||this.props.privilege.model?s.a.createElement("div",null,s.a.createElement(Ie,{showStatus:this.state.createshowStatus,statusSeverity:this.state.statusSeverity,statusClose:this.createStatusClose,statusMessage:this.state.statusMessage,showCreateModal:this.state.showCreateModal,closeCreateModal:this.closeCreateModal,createModel:this.createModel,updateModelCreator:this.updateModelCreator,options:this.state.vendorsList,useAutocomplete:!0,updateModelColor:this.updateModelColor,sendUploadedFile:this.sendUploadedFile,height:"420px"})):null),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:6,lg:6},s.a.createElement(fe,{updateSearchText:this.updateSearchText,search:this.search,filters:st,options:this.state.vendorsList,useAutocomplete:!0,height:"420px"})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(de,{downloadTable:this.downloadTable,showAll:this.searchAll,height:"420px"}),s.a.createElement(le.CSVLink,{data:this.state.csvData,filename:"models.csv",className:"hidden",ref:function(t){return e.csvLink=t},target:"_blank"})),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(nt,{columns:this.props.privilege.admin||this.props.privilege.model?rt:st,vals:this.state.rows,privilege:this.props.privilege,token:this.props.token,keys:st,filters:this.props.privilege.admin||this.props.privilege.model?rt:st,updateModelColor:this.updateModelColorDetails,deleteModel:this.deleteModel,editModel:this.editModel}))),s.a.createElement(q,{open:this.state.showStatus,severity:this.state.statusSeverity,closeStatus:this.closeShowStatus,message:this.state.statusMessage}))}}]),t}(s.a.Component);!function(e){e.create="create/",e.delete="delete/",e.edit="edit/",e.view="view/",e.detailView="detailView/",e.search="search/"}($e||($e={}));a(227);function ct(e){var t=[{title:"Model Management",value:"model"},{title:"Global Asset Management",value:"asset"},{title:"Auditing",value:"audit"},{title:"Power Management",value:"power"},{title:"Administrator",value:"admin"}],a=[],n=[];return void 0!==e.defaultPrivileges&&(e.defaultPrivileges.model&&a.push(t[0]),e.defaultPrivileges.asset&&a.push(t[1]),e.defaultPrivileges.audit&&a.push(t[2]),e.defaultPrivileges.power&&a.push(t[3]),e.defaultPrivileges.admin&&a.push(t[4]),n=e.defaultPrivileges.datacenters),s.a.createElement("span",null,s.a.createElement(E.a,null,"Privileges"),s.a.createElement(pe.a,{multiple:!0,id:"tags-standard",getOptionLabel:function(e){return e.title},options:t,onChange:e.updatePrivilege,defaultValue:a,renderInput:function(e){return s.a.createElement(w.a,Object.assign({},e,{variant:"standard",label:"General Privileges",fullWidth:!0}))}}),e.loading?s.a.createElement(Fe.a,null):s.a.createElement(pe.a,{multiple:!0,id:"tags-standard",options:e.dcPrivileges,onChange:e.updateDCPrivilege,defaultValue:n,renderInput:function(e){return s.a.createElement(w.a,Object.assign({},e,{variant:"standard",label:"Datacenter Asset Privileges",fullWidth:!0}))}}))}var ut,mt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).resetCreate=function(e){e&&a.setState({username:"",display_name:"",password:"",email:"",privilege:{model:!1,asset:!1,datacenters:[],power:!1,audit:!1,admin:!1}})},a.searchUsers=function(){a.props.search({filter:a.state})},a.updateprivilege=function(e,t){var n={model:!1,asset:!1,datacenters:a.state.privilege.datacenters,power:!1,audit:!1,admin:!1};t.map((function(e){n[e.value]=!0})),a.setState({privilege:n})},a.updateDCPrivilege=function(e,t){var n=a.state.privilege;n.datacenters=t,a.setState({privilege:n})},a.state={username:"",display_name:"",password:"",email:"",privilege:{model:!1,asset:!1,datacenters:[],power:!1,audit:!1,admin:!1}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement(b.a,{elevation:3,style:{padding:"20px"}},s.a.createElement(E.a,{variant:"h6"},"Search"),s.a.createElement(f.a,{container:!0,spacing:1,direction:"row",justify:"flex-start",alignItems:"center"},s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(w.a,{type:"text",id:"standard-basic",variant:"outlined",label:"Username",name:"username",value:this.state.username,onChange:function(t){return e.setState({username:t.target.value})}})),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(w.a,{id:"standard-basic",variant:"outlined",label:"Display Name",name:"display_name",value:this.state.display_name,onChange:function(t){return e.setState({display_name:t.target.value})}})),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(w.a,{id:"standard-basic",variant:"outlined",label:"Email",name:"email",type:"email",value:this.state.email,onChange:function(t){return e.setState({email:t.target.value})}})),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(ct,{dcPrivileges:this.props.privileges,loading:this.props.loading,updatePrivilege:this.updateprivilege,updateDCPrivilege:this.updateDCPrivilege})),s.a.createElement(f.a,{container:!0,item:!0,direction:"column",justify:"center",alignItems:"center",xs:12},s.a.createElement(y.a,{variant:"contained",onClick:this.searchUsers,style:{width:"100%",marginTop:"20px",backgroundColor:"blue",color:"white"}},"Search"))))}}]),t}(s.a.Component),dt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).resetCreate=function(e){e&&a.setState({username:"",display_name:"",password:"",email:""})},a.createModel=function(){a.props.createModel(a.state.username,a.state.password,a.state.display_name,a.state.email,a.state.selectedPrivileges,a.resetCreate)},a.updateSelectedPrivileges=function(e,t){var n={model:!1,asset:!1,datacenters:a.state.selectedPrivileges.datacenters,power:!1,audit:!1,admin:!1};t.map((function(e){n[e.value]=!0})),a.setState({selectedPrivileges:n})},a.updateDCPrivilege=function(e,t){var n=a.state.selectedPrivileges;n.datacenters=t,a.setState({selectedPrivileges:n})},a.state={username:"",display_name:"",password:"",email:"",selectedPrivileges:{model:!1,asset:!1,datacenters:[],power:!1,audit:!1,admin:!1}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement(b.a,{elevation:3,style:{padding:"20px"}},s.a.createElement(E.a,{variant:"h6"},"Create"),s.a.createElement(f.a,{container:!0,spacing:1,direction:"row",justify:"flex-start",alignItems:"center"},s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(w.a,{id:"standard-basic",variant:"outlined",label:"Username",name:"username",value:this.state.username,onChange:function(t){return e.setState({username:t.target.value})}})),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(w.a,{id:"standard-basic",variant:"outlined",label:"Display Name",name:"display_name",value:this.state.display_name,onChange:function(t){return e.setState({display_name:t.target.value})}})),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(w.a,{id:"standard-basic",variant:"outlined",label:"Password",name:"password",type:"password",value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})}})),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(w.a,{id:"standard-basic",variant:"outlined",label:"Email",name:"email",type:"email",value:this.state.email,onChange:function(t){return e.setState({email:t.target.value})}})),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(ct,{dcPrivileges:this.props.privileges,loading:this.props.loading,updatePrivilege:this.updateSelectedPrivileges,updateDCPrivilege:this.updateDCPrivilege})),s.a.createElement(f.a,{container:!0,item:!0,direction:"column",justify:"center",alignItems:"center",xs:12},s.a.createElement(y.a,{variant:"contained",onClick:this.createModel,style:{width:"100%",marginTop:"20px",backgroundColor:"green",color:"white"}},"Create"))))}}]),t}(s.a.Component),pt=a(247),ht=a.n(pt),gt=function(e){function t(e){var a,n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).beginEditing=function(e,t){n.setState({canEdit:!0}),console.log(t),n.setState({originalUsername:t.Username,username:t.Username,display_name:t["Display Name"],email:t.Email,selectedPrivileges:t.Privilege,password:t.password})},n.endEditing=function(){n.setState({canEdit:!1}),n.props.save(n.state.originalUsername,n.state.username,n.state.password,n.state.display_name,n.state.email,n.state.selectedPrivileges)},n.showDeleteModal=function(e){n.setState({showDeleteModal:!0,username:e.Username})},n.closeDeleteModal=function(){n.setState({showDeleteModal:!1,username:""})},n.delete=function(){n.props.delete(n.state.username),n.closeDeleteModal()},n.updateSelectedPrivileges=function(e,t){var a={model:!1,asset:!1,datacenters:n.state.selectedPrivileges.datacenters,power:!1,audit:!1,admin:!1};t.map((function(e){a[e.value]=!0})),n.setState({selectedPrivileges:a})},n.updateDCPrivilege=function(e,t){var a=n.state.selectedPrivileges;a.datacenters=t,n.setState({selectedPrivileges:a})},n.state=(a={canEdit:!1,showDeleteModal:!1,username:"",originalUsername:""},Object(h.a)(a,"username",""),Object(h.a)(a,"display_name",""),Object(h.a)(a,"password",""),Object(h.a)(a,"email",""),Object(h.a)(a,"selectedPrivileges",{model:!1,asset:!1,datacenters:[],power:!1,audit:!1,admin:!1}),Object(h.a)(a,"password",""),a),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"showDetailedView",value:function(e){this.props.showDetailedView(e)}},{key:"render",value:function(){var e=this,t=this.props.classes;return s.a.createElement("div",null,s.a.createElement(je.a,{component:ce.a},s.a.createElement(Le.a,{style:{minWidth:1e3},"aria-label":"simple table"},s.a.createElement(Te.a,null,s.a.createElement(Ue.a,null,this.props.columns.map((function(t){return"Privilege"===t?e.state.canEdit?s.a.createElement(Ve.a,{align:"center"},s.a.createElement("span",{id:t,style:{fontWeight:"bold"}},t)):null:s.a.createElement(Ve.a,{align:"center"},s.a.createElement("span",{id:t,style:{fontWeight:"bold"}},t))})))),s.a.createElement(Re.a,null,this.props.vals.map((function(t,a){return s.a.createElement(Ue.a,{id:a},e.props.privilege.admin?s.a.createElement(Ve.a,{scope:"row",align:"center"},"admin"!==t.Username?s.a.createElement("div",null,s.a.createElement(y.a,null,e.state.canEdit?s.a.createElement(ht.a,{onClick:e.endEditing}):s.a.createElement(Ye.a,{onClick:function(a){e.beginEditing(a,t)}})),s.a.createElement(y.a,null,s.a.createElement(We.a,{onClick:function(){return e.showDeleteModal(t)}}))):null):null,e.props.keys.map((function(a){return"Privilege"===a?e.state.canEdit&&"admin"!==t.Username?s.a.createElement(Ve.a,{scope:"row",align:"center"},s.a.createElement(ct,{dcPrivileges:e.props.privileges,loading:e.props.loading,updatePrivilege:e.updateSelectedPrivileges,updateDCPrivilege:e.updateDCPrivilege,defaultPrivileges:t.Privilege})):null:s.a.createElement(Ve.a,{scope:"row",align:"center"},t[a])})))}))))),s.a.createElement(be.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:this.state.showDeleteModal,onClose:this.closeDeleteModal,closeAfterTransition:!0},s.a.createElement(ve.a,{in:this.state.showDeleteModal},s.a.createElement(Ee.a,{open:this.state.showDeleteModal},s.a.createElement("div",{className:t.grid},s.a.createElement(f.a,{container:!0,spacing:1,direction:"row",justify:"flex-start",alignItems:"center"},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{variant:"h5"},"Are you sure?")),s.a.createElement(f.a,{item:!0,xs:12,sm:12,md:6,lg:6},s.a.createElement(E.a,{variant:"body1"},"Doing this will remove the user permanently.")),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(y.a,{variant:"contained",color:"secondary",onClick:this.delete,style:{width:"100%"}},"Yes")),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(y.a,{variant:"contained",color:"primary",onClick:this.closeDeleteModal,style:{width:"100%"}},"No"))))))))}}]),t}(s.a.Component),ft=Object(ie.a)((function(e){return{root:{flexGrow:1},modal:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",margin:"0 auto",overflow:"scroll"},grid:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3),width:"50%"},progress:{display:"flex","& > * + *":{marginLeft:e.spacing(2)}}}}))(gt),bt="success",vt="error",Et="Successfully created user",wt="Successfully updated user",yt="Failed to update user",St="Successfully deleted user",Ct="Failed to delete user";!function(e){e.GET_PRIVILEGES="getPermissions/"}(ut||(ut={}));var _t,kt,Pt=["username","email","display_name","privilege","password"],xt=["Username","Email","Display Name","Privilege"],Ot=["Actions","Username","Email","Display Name","Privilege"],Mt={username:"Username",email:"Email",display_name:"Display Name",privilege:"Privilege"},Dt={filter:{username:"",display_name:"",email:"",privilege:{model:!1,asset:!1,datacenters:[],power:!1,audit:!1,admin:!1}}},At=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).createUser=function(e,t,n,s,r,i){p.a.post(U(P,$e.create),function(e,t,a,n,s){return{username:e,password:t,display_name:a,email:n,privilege:s}}(e,t,n,s,r)).then((function(e){e.data.message===bt?(i(!0),a.setDisplayStatus(!0,Et,bt),a.searchUsers(Dt)):(i(!1),a.setDisplayStatus(!0,e.data.message,vt))}))},a.editUser=function(e,t,n,s,r,i,o){p.a.post(U(P,$e.edit),function(e,t,a,n,s,r){return{username_original:e,username:t,password:a,display_name:n,email:s,privilege:r}}(e,t,n,s,r,i)).then((function(e){return a.processResponse(e,wt,yt)}))},a.deleteUser=function(e){p.a.post(U(P,$e.delete),function(e){return{username:e}}(e)).then((function(e){return a.processResponse(e,St,Ct)}))},a.detailViewUser=function(e){p.a.post(U(P,$e.detailView),function(e){return{username:e}}(e)).then((function(e){return a.setState({detailedValues:e.data.user,detailViewLoading:!1})}))},a.searchUsers=function(e){p.a.post(U(P,$e.search),e).then((function(e){var t=void 0===e.data.users?[]:e.data.users,n=[];Object.values(t).forEach((function(e){var t={};Object.keys(e).forEach((function(a){a in Mt?t[Mt[a]]=e[a]:t[a]=e[a]})),n.push(t)})),a.setState({items:n})}))},a.getPrivileges=function(){p.a.get(U(D,ut.GET_PRIVILEGES)).then((function(e){try{a.setState({allDCPrivileges:e.data.datacenters,loadingPrivileges:!1})}catch(t){a.setState({allDCPrivileges:[],loadingPrivileges:!1})}}))},a.setDisplayStatus=function(e,t,n){a.setState({statusOpen:e,statusMessage:t,statusSeverity:n})},a.showDetailedView=function(e){a.setState({showDetailedView:!0,detailViewLoading:!0,originalUsername:a.state.items[e].username});var t=a.state.items[e].username;a.detailViewUser(t)},a.closeDetailedView=function(){a.setState({showDetailedView:!1})},a.updateUserEdited=function(e){var t=a.state.detailedValues;t[e.target.name]=e.target.value,a.setState({detailedValues:t}),a.forceUpdate()},a.closeShowStatus=function(){a.setState({statusOpen:!1})},a.processResponse=function(e,t,n){console.log(e),e.data.message===bt?(a.setDisplayStatus(!0,t,bt),a.searchUsers(Dt)):a.setDisplayStatus(!0,e.data.message,vt)},a.state={items:[],statusOpen:!1,statusSeverity:"",statusMessage:"",searchUsernm:"",searchEml:"",searchDspNm:"",searchPriv:"",deleteUsername:"",viewUser:"",csvData:[],showDetailedView:!1,detailViewLoading:!1,originalUsername:"",allDCPrivileges:[],loadingPrivileges:!0},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.searchUsers(Dt),this.getPrivileges()}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(q,{open:this.state.statusOpen,severity:this.state.statusSeverity,closeStatus:this.closeShowStatus,message:this.state.statusMessage}),s.a.createElement(f.a,{container:!0,spacing:5,direction:"row",justify:"flex-start",alignItems:"center",style:{margin:"0px",maxWidth:"95vw"}},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{variant:"h4"},"Users")),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:6},this.props.privilege.admin?s.a.createElement("div",null,s.a.createElement(dt,{showCreateModal:this.state.showCreateModal,closeCreateModal:this.closeCreateModal,createModel:this.createUser,updateModelCreator:this.updateUserCreator,inputs:Pt,options:[],useAutocomplete:!1,loading:this.state.loadingPrivileges,privileges:this.state.allDCPrivileges})):null),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:6},s.a.createElement(mt,{updateSearchText:this.updateSearchText,search:this.searchUsers,filters:xt,loading:this.state.loadingPrivileges,privileges:this.state.allDCPrivileges})),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(ft,{columns:this.props.privilege.admin?Ot:xt,vals:this.state.items,keys:xt,privilege:this.props.privilege,showDetailedView:this.showDetailedView,filters:this.props.privilege.admin?Ot:xt,delete:this.deleteUser,save:this.editUser,editUser:this.updateEditUser,loading:this.state.loadingPrivileges,privileges:this.state.allDCPrivileges}))))}}]),t}(s.a.Component),Nt=a(526),It=a(606),jt=a(601),Lt=a(589),Tt=a(608),Ut=a(590),Vt=a(127),Rt=a.n(Vt),Bt=a(250),Ft=a.n(Bt),Ht=a(251),Wt=a.n(Ht),Gt=a(126),qt=a.n(Gt),zt=a(249),Kt=a.n(zt);!function(e){e.MODEL="model",e.HOSTNAME="hostname",e.RACK="rack",e.RACK_U="rack_position",e.RACK_ORIGINAL="rackOriginal",e.RACK_U_ORIGINAL="rack_positionOriginal",e.OWNER="owner",e.COMMENT="comment",e.DATACENTER="datacenter_id",e.TAGS="tags",e.MAC_ADDRESS="mac_address",e.NETWORK_CONNECTIONS="network_connections",e.POWER_CONNECTIONS="power_connections",e.ASSET_NUMBER="asset_number",e.BLADE_CHASSIS="chassis_hostname",e.BLADE_POSITION="chassis_slot"}(_t||(_t={})),function(e){e.create="create/",e.delete="delete/",e.edit="edit/",e.view="view/",e.detailView="detailView/",e.search="search/",e.GET_ALL_MODELS="assistedmodel/",e.GET_ALL_OWNERS="assistedowner/",e.GET_ALL_DATACENTERS="assisteddatacenter/",e.GET_ALL_HOSTNAME="assistedhostname/",e.UPLOAD_FILE="import/",e.EXPORT_FILE="export/",e.GET_NEXT_ASSET_NUM="nextAssetNumber/",e.GET_NETWORK_NEIGHBORHOOD="networkNeighborhood/",e.CHANGE_PLAN_CREATE="createplan/",e.CHANGE_PLAN_DELETE="deleteplan/",e.CHANGE_PLAN_EDIT="editplan/",e.CHANGE_PLAN_EXECUTE="execute/",e.CHANGE_PLAN_GET_PLANS="getplans/",e.CHANGE_PLAN_CREATE_ACTION="createaction/",e.CHANGE_PLAN_EDIT_ACTION="editaction/",e.CHANGE_PLAN_DELETE_ACTION="deleteaction/",e.CHANGE_PLAN_GET_ACTIONS="getactions/",e.GENERATE_LABELS="labelgen/",e.DECOMMISSION="decommission_asset/"}(kt||(kt={}));var Jt="instances/",Yt="changeplans/",Xt="success",Qt="error",Zt=a(584),$t=a(586),ea=a(20),ta=a(164),aa=a.n(ta);function na(e,t){if(""===t)return{};var a={},n=[];n.push({id:0,label:""+t,color:"#F5F5DC"}),a[t]=0;var s=[],r=1;try{return console.log("nodes and edges"),console.log(e),Object.entries(e).map((function(e){var t=Object(ea.a)(e,2),i=t[0],o=t[1];if("message"!==i&&""!==i&&"metadata"!==i){void 0!==a[i]?(s.push({from:0,to:a[i]}),s.push({from:a[i],to:0})):(n.push({id:r,label:""+i,color:"#F0FFFF"}),s.push({from:0,to:r}),s.push({from:r,to:0}),a[i]=r),console.log("nodes and edges");var l=r+1;try{o.map((function(e){""!==e&&(void 0!==a[e]?(s.push({from:r,to:a[e]}),s.push({to:r,from:a[e]})):(n.push({id:l,label:""+e,color:"#7FFFD4"}),s.push({from:r,to:l}),s.push({to:r,from:l}),a[e]=l,l++))}))}catch(c){}console.log("nodes and edges"),r=l+1}})),console.log("nodes and edges"),console.log(n),console.log(s),{nodes:n,edges:s}}catch(i){return console.log("in here"),console.log(i),{nodes:[],edges:[]}}}var sa,ra=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={graph:{nodes:[],edges:[]}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;p.a.post(U(_,kt.GET_NETWORK_NEIGHBORHOOD),{asset_number:this.props.assetNum}).then((function(t){e.setState({graph:na(t.data,e.props.host)})}))}},{key:"render",value:function(){var e={layout:{hierarchical:!1},edges:{color:"#000000"},height:"500px",interaction:{dragNodes:!1,dragView:!1}},t={select:function(e){e.nodes,e.edges}};return s.a.createElement("span",null,s.a.createElement(ce.a,{elevation:3,style:{width:"70%",margin:"0 auto",marginTop:"1%",padding:"2%"}},this.props.isDecommissioned?s.a.createElement(aa.a,{graph:na(this.props.decomAsset.network_neighborhood,this.props.host),options:e,events:t,getNetwork:function(e){}}):0===this.state.graph.edges.length?s.a.createElement(E.a,null,this.props.isDecommissioned?"This asset was not connected to any other assets":"This asset is not currently connected to any other assets"):s.a.createElement(aa.a,{graph:this.state.graph,options:e,events:t,getNetwork:function(e){}})))}}]),t}(s.a.Component),ia=(document.getElementById("root"),ra),oa=a(91),la=a.n(oa),ca=a(165),ua=a(520),ma=a(605),da=a(585),pa=a(600),ha=a(131),ga=a.n(ha),fa=a(132),ba=a.n(fa),va=a(133),Ea=a.n(va);function wa(e){var t="";return(t=e.replace(/[^0-9A-Fa-f]*/g,"").toLowerCase()).length>12&&(t=t.substring(0,12)),1===t.length||2===t.length?t:3===t.length||4===t.length?t.substring(0,2)+":"+t.substring(2):5===t.length||6===t.length?t.substring(0,2)+":"+t.substring(2,4)+":"+t.substring(4):7===t.length||8===t.length?t.substring(0,2)+":"+t.substring(2,4)+":"+t.substring(4,6)+":"+t.substring(6):9===t.length||10===t.length?t.substring(0,2)+":"+t.substring(2,4)+":"+t.substring(4,6)+":"+t.substring(6,8)+":"+t.substring(8):11===t.length||12===t.length?t.substring(0,2)+":"+t.substring(2,4)+":"+t.substring(4,6)+":"+t.substring(6,8)+":"+t.substring(8,10)+":"+t.substring(10,12):t}function ya(e,t,a,n){return{label:t,name:e,showTooltip:a,description:n}}var Sa={filter:(sa={vendor:null,model_number:null,height:null,model:null,hostname:null,rack:null,rack_position:null,username:null,display_name:null,email:null,privilege:null},Object(h.a)(sa,"model",null),Object(h.a)(sa,"hostname",null),Object(h.a)(sa,"starting_rack_letter",null),Object(h.a)(sa,"ending_rack_letter",null),Object(h.a)(sa,"starting_rack_number",null),Object(h.a)(sa,"ending_rack_number",null),Object(h.a)(sa,"rack",null),Object(h.a)(sa,"rack_position",null),sa),datacenter_name:""},Ca="search/",_a="left",ka="right",Pa=(s.a.forwardRef((function(e,t){return s.a.createElement(Zt.a,Object.assign({direction:"up",ref:t},e))})),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).checkForPDUShit=function(){return"RTP1"===a.state.savedDatacenter&&a.state.savedRackLetter>="A"&&a.state.savedRackLetter<="E"&&a.state.savedRackNumber>=1&&a.state.savedRackNumber<=19?(a.setState({showPDU:!0}),!0):(a.setState({showPDU:!1}),!1)},a.getPowerFromProps=function(e){var t=[];return void 0!==e&&e.map((function(e){e.includes("L")?t.push("left"):e.includes("R")?t.push("right"):t.push("off")})),t},a.getPowerPortFromProps=function(e){var t=[];try{e.map((function(e){t.push(parseInt(e.substring(1)))}))}catch(a){}return t},a.getAllBlades=function(){var e="chassis"===a.state.mount_type?a.state.hostname:a.state.blade_chassis;p.a.post(U(_,"getbladesbychassis"),{chassis_hostname:e}).then((function(e){var t=e.data.instances,n=[],s={};t.map((function(e){var t=e.asset_number;n.push(t),s[t]=e.chassis_slot})),a.setState({bladeList:n,bladeSlots:s})}))},a.getLists=function(){a.getModelList(),a.getOwnerList(),a.getDatacenterList(),a.getAssetList(),a.getChassisList(),"rackmount"!==a.state.mount_type&&a.getAllBlades()},a.getChassisList=function(){p.a.get(U(_,"getchassis")).then((function(e){var t=e.data.instances,n=[];console.log(a.state.blade_chassis),t.map((function(e){n.push(e.hostname),e.hostname===a.state.blade_chassis&&a.setState({chassisModel:e.model})}));var s=t.filter((function(e){return e.datacenter_name===a.state.datacenter_name})).map((function(e){return e.hostname}));a.setState({ilteredChassisList:s,chassisList:n,allInstances:t})}))},a.getModelList=function(){p.a.post(U(k,Ca),Sa).then((function(e){var t=e.data.models,n=[],s={},r={},i={};t.map((function(e){var t=e.vendor+" "+e.model_number;n.push(t),s[t]=e.ethernet_ports,r[t]=parseInt(e.power_ports),i[t]=e.mount_type})),a.setState({loadingModels:!1,modelList:n,networkList:s,powerPortList:r,mountTypes:i})}))},a.getOwnerList=function(){p.a.post(U(P,Ca),{filter:{username:"",display_name:"",email:"",privilege:{model:!1,asset:!1,datacenters:[],power:!1,audit:!1,admin:!1}}}).then((function(e){try{var t=[];e.data.users.map((function(e){return t.push(e.username+"/"+e.display_name)})),a.setState({loadingOwners:!1,ownerList:t})}catch(n){a.setState({loadingOwners:!1})}}))},a.getDatacenterList=function(){p.a.get(U(O,"all/")).then((function(e){var t=[];e.data.datacenters.map((function(e){a.props.privilege.datacenters.length>0&&("*"===a.props.privilege.datacenters[0]||a.props.privilege.datacenters.includes(e.abbreviation)||a.props.privilege.asset||a.props.privilege.admin)&&t.push(e)})),a.setState({loadingDatacenters:!1,datacenterList:t})}))},a.getAssetList=function(){p.a.post(U(_,Ca),Sa).then((function(e){var t=e.data.instances,n=[],s={};t.map((function(e){""!==e.hostname&&n.push(e.hostname),s[e.hostname]=e.model})),a.setState({loadingHostnames:!1,assetNumList:n,assetNumToModelList:s},a.availableNetworkConnections())}))},a.editAsset=function(e){e.preventDefault();var t=a.createJSON();console.log(t);var n={change_plan_id:a.props.changePlanID,step:a.props.changePlanStep,action:"update",asset_numberOriginal:a.props.defaultValues.asset_number,new_record:t},s=a.props.changePlanActive?U(Yt,kt.CHANGE_PLAN_CREATE_ACTION):U(Jt,kt.edit);p.a.post(s,a.props.changePlanActive?n:t).then((function(e){e.data.message===Xt?(a.props.close(),a.props.incrementChangePlanStep(),a.setState({statusOpen:!0,statusMessage:"Successfully saved edits",statusSeverity:Xt})):a.setState({statusOpen:!0,statusMessage:e.data.message,statusSeverity:Qt})}))},a.updateModel=function(e){console.log(e.target.value);var t=e.target.value;if(""!==t){var n=a.state.networkList[t],s={};null!==n&&n.map((function(e){s[e]={mac_address:"",connection_hostname:"",connection_port:""}})),a.setState({mount_type:a.state.mountTypes[t]})}else s={};a.setState({model:t,network_connections:s},(function(){}))},a.updateBladeChassis=function(e){a.setState({blade_chassis:e.target.value})},a.updateBladePosition=function(e){a.setState({blade_position:e.target.value})},a.updateHostname=function(e){a.setState({hostname:e.target.value})},a.updateRack=function(e){var t=e.target.value;a.setState({rack:t},(function(){}))},a.updateRackU=function(e){a.setState({rackU:e.target.value},(function(){}))},a.updateOwner=function(e){a.setState({owner:e.target.value},(function(){}))},a.updateComment=function(e){a.setState({comment:e.target.value},(function(){}))},a.updateDatacenter=function(e){var t=!1;a.state.datacenterList.map((function(a){a.name===e.target.value&&(t=a.is_offline_storage)}));var n=a.state.allInstances.filter((function(t){return t.datacenter_name===e.target.value})).map((function(e){return e.hostname}));a.setState({filteredChassisList:n,datacenter_name:e.target.value,datacenterIsOffline:t},(function(){}))},a.updateTags=function(e){a.setState({tags:e.target.value},(function(){}))},a.changeNetworkMacAddress=function(e,t){var n=wa(e.target.value);a.setState((function(e){var a=Object.assign({},e.network_connections);return a[t].mac_address=n,{network_connections:a}}),(function(){}))},a.changeNetworkHostname=function(e,t){var n=void 0===e?"":e;a.setState((function(e){var a=Object.assign({},e.network_connections);return a[t].connection_hostname=n,{network_connections:a}}),(function(){a.getPortOptions(n)}))},a.changeNetworkPort=function(e,t){var n=void 0===e?"":e;a.setState((function(e){var a=Object.assign({},e.network_connections);return a[t]=null===a[t]?{}:a[t],a[t].connection_port=n,{network_connections:a}}),(function(){}))},a.updatePowerPort=function(e,t){var n=e.target.value;a.setState((function(e){var a=Object.assign({},e.power_connections);return a[t]=n,{power_connections:a}}),(function(){}))},a.changePowerPortState=function(e,t){var n=e.target.value;a.setState((function(e){var a=Object.assign({},e.leftRight);return a[t]=n,{leftRight:a}}),(function(){}))},a.updateAssetNumber=function(e){a.setState({asset_number:e.target.value},(function(){}))},a.getPowerConnections=function(){if(null===a.state.leftRight)return[];var e=[];return Object.entries(a.state.leftRight).map((function(t){var n=Object(ea.a)(t,2),s=n[0],r=n[1],i=null===a.state.power_connections||void 0===a.state.power_connections[s]?1:a.state.power_connections[s];switch(r){case _a:e.push("L"+i);break;case ka:e.push("R"+i)}})),e},a.createJSON=function(){return{asset_numberOriginal:a.props.defaultValues.asset_number,model:a.state.model,hostname:a.state.hostname,rack:a.state.rack,rack_position:a.state.rackU,owner:a.state.owner.split("/")[0],comment:a.state.comment,datacenter_name:a.state.datacenter_name,tags:a.state.tags,network_connections:null===a.state.network_connections?{}:a.state.network_connections,power_connections:a.getPowerConnections(),asset_number:a.state.asset_number,chassis_hostname:a.state.blade_chassis,chassis_slot:a.state.blade_position,display_color:a.state.customColor,cpu:a.state.customCPU,memory:a.state.customMemory,storage:a.state.customStorage}},a.availableNetworkConnections=function(){var e=!1;a.state.assetNumList.map((function(t){Object.keys(a.state.networList[a.state.assetNumToModelList[t]].length).length>0&&(e=!0)})),a.setState({availableConnections:e})},a.showModal=function(){a.setState({showModal:!0})},a.closeModal=function(){a.props.fetchAllAssets()},a.statusClose=function(){a.setState({statusOpen:!1,statusMessage:"",statusSeverity:""})},a.getPortOptions=function(e){try{a.setState({portOptions:a.state.networkList[a.state.assetNumToModelList[e]]})}catch(t){}},a.getModel=function(){return a.state.model},a.displayNetworks=function(){var e=a.getModel();return a.state.networkList&&a.state.networkList[e]&&!a.state.datacenterIsOffline},a.getNetworkConnections=function(){return a.state.network_connections},a.getMacValue=function(e){var t=a.getNetworkConnections();return null===t?"":t[e]?t[e].mac_address:""},a.getConnectingHostname=function(e){var t=a.getNetworkConnections();return null===t?"":t[e]?t[e].connection_hostname:""},a.getConnectionPort=function(e){var t=a.getNetworkConnections();return null===t?"":t[e]?t[e].connection_port:""},a.connectionsDisabled=function(){return""===a.state.hostname},a.deleteAsset=function(){a.setState({showConfirmationBox:!1}),p.a.post(U(_,kt.delete),{asset_number:a.props.defaultValues.asset_number,datacenter_name:a.props.defaultValues.datacenter_name}).then((function(e){"success"===e.data.message?(a.props.close(),a.props.fetchAllAssets(),a.props.showStatus(!0,"success","Successfully deleted asset")):a.setState({statusOpen:!0,statusMessage:e.data.message,statusSeverity:Qt})}))},a.decommissionAsset=function(){if(a.props.changePlanActive){var e=a.createJSON();console.log(e);var t={change_plan_id:a.props.changePlanID,step:a.props.changePlanStep,action:"decommission",asset_numberOriginal:a.props.defaultValues.asset_number,new_record:e},n=U(Yt,kt.CHANGE_PLAN_CREATE_ACTION);p.a.post(n,t).then((function(e){e.data.message===Xt?(a.props.incrementChangePlanStep(),a.props.showStatus(!0,"success","Successfully decommissioned asset")):a.setState({statusOpen:!0,statusMessage:e.data.message,statusSeverity:Qt})}))}else p.a.post(U(A,kt.DECOMMISSION),{asset_number:a.props.defaultValues.asset_number,datacenter_name:a.props.defaultValues.datacenter_name,decommission_user:a.props.username}).then((function(e){"success"===e.data.message?(a.props.close(),a.props.fetchAllAssets(),a.props.showStatus(!0,"success","Successfully decommissioned asset")):a.setState({statusOpen:!0,statusMessage:e.data.message,statusSeverity:Qt})}))},a.openConfirmationBox=function(){a.setState({showConfirmationBox:!0})},a.closeConfirmationBox=function(){a.setState({showConfirmationBox:!1})},a.cancelUpgrades=function(){a.setState({customizeModel:!1,customColor:a.props.defaultValues.display_colorOriginal,customCPU:a.props.defaultValues.cpuOriginal,customMemory:a.props.defaultValues.memoryOriginal,customStorage:a.props.defaultValues.storageOriginal})},a.restoreDefaults=function(){a.setState({customColor:a.props.defaultValues.display_colorOriginal,customCPU:a.props.defaultValues.cpuOriginal,customMemory:a.props.defaultValues.memoryOriginal,customStorage:a.props.defaultValues.storageOriginal})},a.fetchPDUState=function(){p.a.post(U(_,"getPDUPowerStates"),{rack_letter:a.state.savedRackLetter,rack_number:a.state.savedRackNumber,rack_side:"L"}).then((function(e){if("Success"===e.data.message){var t=e.data.states,n=a.state.pduStates;n.L=t,a.setState({pduStates:n})}else a.setState({statusOpen:!0,statusMessage:e.data.message,statusSeverity:Qt})})),p.a.post(U(_,"getPDUPowerStates"),{rack_letter:a.state.savedRackLetter,rack_number:a.state.savedRackNumber,rack_side:"R"}).then((function(e){if("Success"===e.data.message){var t=e.data.states,n=a.state.pduStates;n.R=t,a.setState({pduStates:n})}else a.setState({statusOpen:!0,statusMessage:e.data.message,statusSeverity:Qt})}))},a.fetchPowerState=function(){var e="blade"===a.state.mount_type?a.state.blade_chassis:a.state.hostname;p.a.post(U(_,"getAllChassisPortStates"),{chassis:e}).then((function(e){if("Success"===e.data.message){var t=e.data.power_state;a.setState({powerStates:t})}else a.setState({statusOpen:!0,statusMessage:e.data.message,statusSeverity:Qt})}))},a.bmiPowerOn=function(e){var t="blade"==a.state.mount_type?a.state.blade_position:e,n="blade"==a.state.mount_type?a.state.blade_chassis:a.state.hostname;p.a.post(U(_,"setChassisPortState"),{chassis:n,chassis_port_number:t,power_state:"on"}).then((function(e){"Success"===e.data.message?(a.fetchPowerState(),a.setState({statusOpen:!0,statusMessage:"Successfully turned on port",statusSeverity:Xt})):a.setState({statusOpen:!0,statusMessage:e.data.message,statusSeverity:Qt})}))},a.bmiPowerOff=function(e){var t="blade"==a.state.mount_type?a.state.blade_position:e,n="blade"==a.state.mount_type?a.state.blade_chassis:a.state.hostname;p.a.post(U(_,"setChassisPortState"),{chassis:n,chassis_port_number:t,power_state:"off"}).then((function(e){"Success"===e.data.message?(a.fetchPowerState(),a.setState({statusOpen:!0,statusMessage:"Successfully turned off port",statusSeverity:Xt})):a.setState({statusOpen:!0,statusMessage:e.data.message,statusSeverity:Qt})}))},a.bmiPowerCycle=function(){var e=Object(ca.a)(la.a.mark((function e(t){var n;return la.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){return new Promise((function(t){setTimeout(t,e)}))},a.bmiPowerOff(t),e.next=4,n(2e3);case 4:a.bmiPowerOn(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.pduPowerOn=function(e,t){p.a.post(U(_,"setPDUPowerState"),{rack_letter:a.state.savedRackLetter,rack_number:a.state.savedRackNumber,rack_side:e,rack_port:parseInt(t),rack_port_state:"on"}).then((function(e){"Success"===e.data.message?(a.fetchPDUState(),a.setState({statusOpen:!0,statusMessage:"Successfully turned on port",statusSeverity:Xt})):a.setState({statusOpen:!0,statusMessage:e.data.message,statusSeverity:Qt})}))},a.pduPowerOff=function(e,t){p.a.post(U(_,"setPDUPowerState"),{rack_letter:a.state.savedRackLetter,rack_number:a.state.savedRackNumber,rack_side:e,rack_port:parseInt(t),rack_port_state:"off"}).then((function(e){"Success"===e.data.message?(a.fetchPDUState(),a.setState({statusOpen:!0,statusMessage:"Successfully turned off port",statusSeverity:Xt})):a.setState({statusOpen:!0,statusMessage:e.data.message,statusSeverity:Qt})}))},a.pduPowerCycle=function(){var e=Object(ca.a)(la.a.mark((function e(t,n){var s;return la.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(e){return new Promise((function(t){setTimeout(t,e)}))},a.pduPowerOff(t,n),e.next=4,s(2e3);case 4:a.pduPowerOn(t,n);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),a.state={loadingAssetNumber:!0,loadingModels:!0,modelList:[],networkList:null,powerPortList:null,loadingOwners:!0,ownerList:[],loadingDatacenters:!0,datacenterList:[],loadingHostnames:!0,assetNumList:[],assetNumToModelList:null,model:"",hostname:"",rack:"",rackU:-1,owner:"",comment:"",datacenter_name:"",tags:[],network_connections:null,power_connections:null,asset_number:-1,blade_chassis:"",blade_position:null,mount_type:null,chassisList:[],allInstances:[],filteredChassisList:[],mountTypes:null,selectedConnection:null,statusOpen:!1,statusMessage:"",statusSeverity:"",showModal:!1,powerPortState:null,leftRight:null,availableConnections:!1,portOptions:[],canSubmit:!1,updated:!1,showConfirmationBox:!1,inputs:{model:ya(_t.MODEL,"Model",!1,"A reference to an existing model"),hostname:ya(_t.HOSTNAME,"Hostname",!1,"A short string compliant with RFC 1034\u2019s definition of 'label'"),rack:ya(_t.RACK,"Rack",!1,"The rack the equipment is installed in, written as a row letter and rack number, e.g. 'B12'"),rackU:ya(_t.RACK_U,"Rack U",!1,"An integer indicating the vertical location of the bottom of the equipment (e.g. '5')"),owner:ya(_t.OWNER,"Owner",!1,"A reference to an existing user on the system who owns this equipment"),comment:ya(_t.COMMENT,"Comments",!1,"Any additional information associated with this asset"),datacenter:ya(_t.DATACENTER,"Datacenter",!1,"A reference to an existing datacenter"),macAddress:ya(_t.MAC_ADDRESS,"Mac Address",!1,"A 6-byte hexadecimal string per network port shown canonically in lower case with colon delimiters (e.g., '00:1e:c9:ac:78:aa').\nA hostname is required to enter in this value"),networkConnections:ya(_t.NETWORK_CONNECTIONS,"Port Name",!1,"For each network port, a reference to another network port on another piece of gear"),powerConnections:ya(_t.POWER_CONNECTIONS,"Power Connections",!1,"Choice of PDU port number (0 means not plugged in)"),assetNum:ya(_t.ASSET_NUMBER,"Asset Number",!1,"A six-digit serial number unique associated with an asset."),bladeChassis:ya(_t.BLADE_CHASSIS,"Blade Chassis",!1,"A reference to a blade chassis asset"),bladePosition:ya(_t.BLADE_POSITION,"Blade Position",!1,"An integer indicating the slot number of a blade")},bladeList:[],powerStates:{},bladeSlots:{},savedDatacenter:"",savedRackLetter:"",savedRackNumber:null,showPDU:!1,pduStates:{},allThePowers:[],chassisModel:""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){console.log(this.props.defaultValues),this.props.defaultValues.model===this.state.model&&this.props.defaultValues.hostname===this.state.hostname&&this.props.defaultValues.rack===this.state.rack&&this.props.defaultValues.rack_position===this.state.rackU&&this.props.defaultValues.owner===this.state.owner&&this.props.defaultValues.comment===this.state.comment&&this.props.defaultValues.datacenter_name===this.state.datacenter_name&&this.props.defaultValues.tags===this.state.tags&&this.props.defaultValues.network_connections===this.state.network_connections&&this.props.defaultValues.power_connections===this.state.power_connections&&this.props.defaultValues.asset_number===this.state.asset_number&&this.props.isOffline===this.state.datacenterIsOffline||this.state.updated||(console.log("in setting state"),this.setState({model:this.props.defaultValues.model,hostname:this.props.defaultValues.hostname,rack:this.props.defaultValues.rack,rackU:this.props.defaultValues.rack_position,owner:this.props.defaultValues.owner,comment:this.props.defaultValues.comment,datacenter_name:this.props.defaultValues.datacenter_name,tags:this.props.defaultValues.tags,network_connections:this.props.defaultValues.network_connections,power_connections:this.getPowerPortFromProps(this.props.defaultValues.power_connections),asset_number:this.props.defaultValues.asset_number,customCPU:this.props.defaultValues.cpu,customColor:this.props.defaultValues.display_color,customMemory:this.props.defaultValues.memory,customStorage:this.props.defaultValues.storage,leftRight:this.getPowerFromProps(this.props.defaultValues.power_connections),mount_type:this.props.defaultValues.mount_type,blade_chassis:this.props.defaultValues.chassis_hostname,blade_position:this.props.defaultValues.chassis_slot,datacenterIsOffline:this.props.isOffline,savedDatacenter:this.props.defaultValues.abbreviation,savedRackLetter:this.props.defaultValues.rack[0],savedRackNumber:parseInt(this.props.defaultValues.rack.substr(1)),allThePowers:this.props.defaultValues.power_connections}))}},{key:"componentDidMount",value:function(){this.getLists(),"rackmount"!==this.state.mount_type&&this.fetchPowerState(),this.checkForPDUShit()&&this.fetchPDUState()}},{key:"render",value:function(){var e,t=this,a=this.props.classes;return s.a.createElement("span",{className:a.div},s.a.createElement(ce.a,{elevation:3},this.props.isDecommissioned?"This asset was decommissioned by "+this.props.defaultValues.decommission_user+" on "+this.props.defaultValues.timestamp:"",this.state.loadingDatacenters||this.state.loadingModels||this.state.loadingHostnames||this.state.loadingOwners?s.a.createElement("div",{className:a.progress},s.a.createElement(Fe.a,null)):s.a.createElement("form",{onSubmit:function(e){t.editAsset(e)},className:a.form},s.a.createElement("div",{className:a.dialogDiv},s.a.createElement(Nt.a,{placement:"top",open:this.state.inputs.model.Tooltip,title:this.state.inputs.model.description},this.props.disabled?s.a.createElement(w.a,{label:this.state.inputs.model.label,name:this.state.inputs.model.name,value:this.props.isDecommissioned?this.props.defaultValues.vendor+" "+this.props.defaultValues.model_number:this.state.model,disabled:!0,style:{display:"inline-block"}}):s.a.createElement(pe.a,{id:"select-model",options:this.state.modelList,includeInputInList:!0,value:this.state.model,style:{display:"inline-block"},renderInput:function(e){return s.a.createElement(w.a,Object.assign({},e,{label:t.state.inputs.model.label,name:t.state.inputs.model.name,onChange:t.updateModel,onBlur:t.updateModel,required:!0}))}})),s.a.createElement(Nt.a,{placement:"top",open:this.state.inputs.owner.Tooltip,title:this.state.inputs.owner.description},this.props.disabled?s.a.createElement(w.a,{label:this.state.inputs.owner.label,name:this.state.inputs.owner.name,fullWidth:!0,value:this.state.owner,disabled:!0,style:{display:"inline-block"}}):s.a.createElement(pe.a,{id:"select-owner",options:this.state.ownerList,includeInputInList:!0,value:this.state.owner,style:{display:"inline-block"},renderInput:function(e){return s.a.createElement(w.a,Object.assign({},e,{label:t.state.inputs.owner.label,name:t.state.inputs.owner.name,onChange:t.updateOwner,onBlur:t.updateOwner,fullWidth:!0,disabled:t.props.disabled}))}})),"blade"==this.state.mount_type?s.a.createElement(Nt.a,{placement:"top",open:this.state.inputs.datacenter.Tooltip,title:this.state.inputs.datacenter.description},this.props.disabled?s.a.createElement(w.a,{label:this.state.inputs.datacenter.label,name:this.state.inputs.datacenter.name,fullWidth:!0,value:this.state.datacenter_name,disabled:!0,style:{display:"inline-block"}}):s.a.createElement(pe.a,{id:"input-datacenter",options:this.state.datacenterList.map((function(e){return e.name})),includeInputInList:!0,value:this.state.datacenter_name,style:{display:"inline-block"},renderInput:function(e){return s.a.createElement(w.a,Object.assign({},e,{label:t.state.inputs.datacenter.label,name:t.state.inputs.datacenter.name,onChange:t.updateDatacenter,onBlur:t.updateDatacenter,fullWidth:!0,required:!0,disabled:t.props.disabled}))}})):null,"blade"===this.state.mount_type?s.a.createElement(Nt.a,{placement:"top",open:this.state.inputs.bladeChassis.Tooltip,title:this.state.inputs.bladeChassis.description},s.a.createElement(pe.a,{id:"select-chassis",options:this.state.filteredChassisList,includeInputInList:!0,style:{display:"inline-block"},value:this.state.blade_chassis,renderInput:function(e){return s.a.createElement(w.a,Object.assign({},e,{label:t.state.inputs.bladeChassis.label,name:t.state.inputs.bladeChassis.name,onChange:t.updateBladeChassis,onBlur:t.updateBladeChassis,fullWidth:!0,required:!0}))}})):null,"blade"===this.state.mount_type?s.a.createElement("span",{style:{display:"inline-block"}},s.a.createElement(_e.a,{id:"select-blade-position-label"},"Blade Position"),s.a.createElement(ke.a,{labelId:"select-blade-position-label",id:"select-blade-position",value:this.state.blade_position,required:!0,onChange:this.updateBladePosition,style:{width:"100%"}},s.a.createElement(ne.a,{value:1},"1"),s.a.createElement(ne.a,{value:2},"2"),s.a.createElement(ne.a,{value:3},"3"),s.a.createElement(ne.a,{value:4},"4"),s.a.createElement(ne.a,{value:5},"5"),s.a.createElement(ne.a,{value:6},"6"),s.a.createElement(ne.a,{value:7},"7"),s.a.createElement(ne.a,{value:8},"8"),s.a.createElement(ne.a,{value:9},"9"),s.a.createElement(ne.a,{value:10},"10"),s.a.createElement(ne.a,{value:11},"11"),s.a.createElement(ne.a,{value:12},"12"),s.a.createElement(ne.a,{value:13},"13"),s.a.createElement(ne.a,{value:14},"14"))):null,"blade"!==this.state.mount_type?s.a.createElement(Nt.a,{placement:"top",open:this.state.inputs.datacenter.Tooltip,title:this.state.inputs.datacenter.description},this.props.disabled?s.a.createElement(w.a,{label:this.state.inputs.datacenter.label,name:this.state.inputs.datacenter.name,fullWidth:!0,value:this.state.datacenter_name,disabled:!0,style:{display:"inline-block"}}):s.a.createElement(pe.a,{id:"input-datacenter",options:this.state.datacenterList.map((function(e){return e.name})),includeInputInList:!0,value:this.state.datacenter_name,style:{display:"inline-block"},renderInput:function(e){return s.a.createElement(w.a,Object.assign({},e,{label:t.state.inputs.datacenter.label,name:t.state.inputs.datacenter.name,onChange:t.updateDatacenter,onBlur:t.updateDatacenter,fullWidth:!0,required:!0,disabled:t.props.disabled}))}})):null,this.state.datacenterIsOffline||"blade"==this.state.mount_type?null:s.a.createElement(Nt.a,{placement:"top",open:this.state.inputs.rack.Tooltip,title:this.state.inputs.rack.description},s.a.createElement(w.a,{id:"input-rack",label:this.state.inputs.rack.label,name:this.state.inputs.rack.name,onChange:this.updateRack,value:this.state.rack,required:!0,fullWidth:!0,disabled:this.props.disabled,defaultValue:this.props.defaultValues.rack})),this.state.datacenterIsOffline||"blade"==this.state.mount_type?null:s.a.createElement(Nt.a,{placement:"top",open:this.state.inputs.rackU.Tooltip,title:this.state.inputs.rackU.description},s.a.createElement(w.a,{id:"input-rackU",type:"number",InputProps:{inputProps:{min:1,max:42}},label:this.state.inputs.rackU.label,name:this.state.inputs.rackU.name,onChange:this.updateRackU,required:!0,fullWidth:!0,disabled:this.props.disabled,value:this.state.rackU})),s.a.createElement(Nt.a,{placement:"top",open:this.state.inputs.assetNum.Tooltip,title:this.state.inputs.assetNum.description},s.a.createElement(w.a,{id:"input-asset-number",type:"number",InputProps:{inputProps:{min:1e5,max:999999}},label:this.state.inputs.assetNum.label,name:this.state.inputs.assetNum.name,onChange:this.updateAssetNumber,value:this.state.asset_number,required:!0,fullWidth:!0,disabled:this.props.disabled})),s.a.createElement(Nt.a,{placement:"top",open:this.state.inputs.hostname.Tooltip,title:this.state.inputs.hostname.description},s.a.createElement(w.a,{id:"input-hostname",label:this.state.inputs.hostname.label,name:this.state.inputs.hostname.name,onChange:this.updateHostname,fullWidth:!0,disabled:this.props.disabled,value:this.state.hostname})),s.a.createElement("div",null,this.state.customizeModel||this.props.disabled?null:s.a.createElement(y.a,{variant:"contained",color:"primary",onClick:function(){return t.setState({customizeModel:!0})}},"Customize Model Hardware"),this.state.customizeModel||this.props.disabled?s.a.createElement("span",null,s.a.createElement(Oe.CompactPicker,{color:this.state.customColor,onChange:function(e){t.setState({customColor:e.hex})},disabled:this.props.disabled}),s.a.createElement(w.a,{disabled:this.props.disabled,label:"CPU",value:this.state.customCPU,onChange:function(e){t.setState({customCPU:e.target.value})}}),s.a.createElement(w.a,{disabled:this.props.disabled,type:"number",value:this.state.customMemory,label:"Memory",onChange:function(e){t.setState({customMemory:e.target.value})},InputProps:{inputProps:{min:0}}}),s.a.createElement(w.a,{disabled:this.props.disabled,label:"Storage",value:this.state.customStorage,onChange:function(e){t.setState({customStorage:e.target.value})}}),this.props.disabled?null:s.a.createElement("div",{className:a.buttons},s.a.createElement(y.a,{variant:"contained",color:"primary",onClick:function(){return t.restoreDefaults()}},"Use original Model Values"),s.a.createElement(y.a,{variant:"contained",color:"secondary",onClick:function(){return t.cancelUpgrades()}},"Cancel Upgrades"))):null),this.displayNetworks()?s.a.createElement("span",null,this.state.networkList[this.getModel()].length===Object.keys(this.state.network_connections).length?this.state.networkList[this.getModel()].map((function(e){return s.a.createElement("div",null,s.a.createElement(E.a,{style:{display:"inline-block"}},"Network Port: "+e+": "),s.a.createElement(Nt.a,{placement:"top",open:t.state.inputs.macAddress.Tooltip,title:t.state.inputs.macAddress.description},s.a.createElement(w.a,{id:"input-mac-address",style:{display:"inline-block"},label:t.state.inputs.macAddress.label,name:t.state.inputs.macAddress.name,onChange:function(a){t.changeNetworkMacAddress(a,e)},fullWidth:!0,value:t.getMacValue(e)})),s.a.createElement(Nt.a,{placement:"top",open:t.state.inputs.networkConnections.Tooltip,title:t.state.inputs.networkConnections.description},t.props.disabled?s.a.createElement(w.a,{label:"Connection Hostname",name:"Connection Hostname",style:{display:"inline-block"},fullWidth:!0,value:t.getConnectingHostname(e),disabled:!0}):s.a.createElement(pe.a,{id:"input-network-ports-hostname",options:t.state.assetNumList,includeInputInList:!0,onChange:function(a,n){t.changeNetworkHostname(n,e)},required:""!==t.getNetworkConnections()[e].connection_port,value:t.getConnectingHostname(e),style:{display:"inline-block"},renderInput:function(e){return s.a.createElement(w.a,Object.assign({},e,{label:"Connection Hostname",name:"Connection Hostname",fullWidth:!0}))}})),s.a.createElement(Nt.a,{placement:"top",open:t.state.inputs.networkConnections.Tooltip,title:t.state.inputs.networkConnections.description},t.props.disabled?s.a.createElement(w.a,{label:"Connection Port",name:"Connection Port",style:{display:"inline-block"},fullWidth:!0,value:t.getConnectionPort(e),disabled:!0}):s.a.createElement(pe.a,{id:"input-network-ports-connection-port",options:t.state.portOptions,includeInputInList:!0,onChange:function(a,n){t.changeNetworkPort(n,e)},required:""!==t.getNetworkConnections()[e].connection_hostname,value:t.getConnectionPort(e),disabled:t.connectionsDisabled(),style:{display:"inline-block"},renderInput:function(e){return s.a.createElement(w.a,Object.assign({},e,{label:"Connection Port",name:"Connection Port",fullWidth:!0}))}})))})):null):null,this.state.powerPortList&&this.state.powerPortList[this.state.model]&&!this.state.datacenterIsOffline?Array.from({length:this.state.powerPortList[this.state.model]},(function(e,a){return s.a.createElement("span",null,s.a.createElement(E.a,null,"Power Port: "+a),s.a.createElement(ua.a,{component:"fieldset"},s.a.createElement(ma.a,{id:"power-port-"+a,"aria-label":"position",name:"position"+a,style:{display:"inline-block"},value:null===t.state.leftRight?"off":void 0===t.state.leftRight[a]?"off":t.state.leftRight[a],onChange:function(e){t.changePowerPortState(e,a)},row:!0},s.a.createElement(da.a,{value:_a,control:s.a.createElement(pa.a,{color:"primary"}),label:"Left",labelPlacement:"bottom",disabled:t.props.disabled}),s.a.createElement(da.a,{value:ka,control:s.a.createElement(pa.a,{color:"primary"}),label:"Right",labelPlacement:"bottom",disabled:t.props.disabled}),s.a.createElement(da.a,{value:"off",control:s.a.createElement(pa.a,{color:"primary"}),label:"No Connection",labelPlacement:"bottom",disabled:t.props.disabled}))),null===t.state.leftRight?null:void 0===t.state.leftRight[a]||"off"===t.state.leftRight[a]?null:s.a.createElement(w.a,{type:"number",value:null===t.state.power_connections?1:void 0===t.state.power_connections[a]?1:t.state.power_connections[a],InputProps:{inputProps:{min:1,max:24}},onChange:function(e){t.updatePowerPort(e,a)},disabled:t.props.disabled}))})):null,s.a.createElement("div",null,s.a.createElement(w.a,(e={id:"input-comment",fullWidth:!0,label:this.state.inputs.comment.label,name:this.state.inputs.comment.name,onChange:this.updateComment,multiline:!0},Object(h.a)(e,"fullWidth",!0),Object(h.a)(e,"style",{width:"50%"}),Object(h.a)(e,"defaultValue",this.props.defaultValues.comment),Object(h.a)(e,"disabled",this.props.disabled),e))),"rackmount"!==this.state.mount_type?s.a.createElement(we.a,{className:a.root,subheader:s.a.createElement(ye.a,{component:"div",id:"nested-list-subheader"},"Blades"),style:{maxHeight:"30vh",overflow:"auto"}},this.state.bladeList.map((function(e){var a="list-label-".concat(e);return s.a.createElement(Se.a,{key:e,role:void 0,dense:!0,button:!0},s.a.createElement(Ce.a,{id:a,primary:"Slot "+t.state.bladeSlots[e]+": Asset #"+e}))}))):null,"blade"===this.state.mount_type&&void 0!==this.state.chassisModel&&this.state.chassisModel.includes("BMI")?s.a.createElement("div",null,s.a.createElement(E.a,null,"Current power state: ",this.state.powerStates[this.state.blade_position]),s.a.createElement("div",{className:a.buttons},s.a.createElement(y.a,{variant:"contained",startIcon:s.a.createElement(ga.a,null),style:{backgroundColor:"green",color:"white",marginRight:"5px"},onClick:this.bmiPowerOn},"Power On"),s.a.createElement(y.a,{variant:"contained",startIcon:s.a.createElement(ba.a,null),style:{backgroundColor:"black",color:"white",marginRight:"5px"},onClick:this.bmiPowerOff},"Power Off"),s.a.createElement(y.a,{variant:"contained",startIcon:s.a.createElement(Ea.a,null),color:"primary",onClick:this.bmiPowerCycle},"Power Cycle"))):null,"chassis"===this.state.mount_type&&this.state.model.includes("BMI")?s.a.createElement(we.a,{className:a.root,subheader:s.a.createElement(ye.a,{component:"div",id:"nested-list-subheader"},"Blades"),style:{overflow:"auto"}},Array.from({length:14},(function(e,t){return t})).map((function(e,a){var n="list-label-".concat(a);return s.a.createElement(Se.a,{key:a,role:void 0,dense:!0,button:!0},s.a.createElement(Ce.a,{id:n,primary:(a+1).toString()+" - "+t.state.powerStates[(a+1).toString()]}),s.a.createElement(y.a,{variant:"contained",startIcon:s.a.createElement(ga.a,null),style:{backgroundColor:"green",color:"white",marginRight:"5px"},onClick:function(){t.bmiPowerOn(a+1)}},"Power On"),s.a.createElement(y.a,{variant:"contained",startIcon:s.a.createElement(ba.a,null),style:{backgroundColor:"black",color:"white",marginRight:"5px"},onClick:function(){t.bmiPowerOff(a+1)}},"Power Off"),s.a.createElement(y.a,{variant:"contained",startIcon:s.a.createElement(Ea.a,null),color:"primary",onClick:function(){t.bmiPowerCycle(a+1)}},"Power Cycle"))}))):null,this.state.showPDU?s.a.createElement(we.a,{className:a.root,subheader:s.a.createElement(ye.a,{component:"div",id:"nested-list-subheader-2"},"PDU Ports"),style:{overflow:"auto"}},this.state.allThePowers.map((function(e){var a="list-label-".concat(e),n="",r=e[0],i=e.substr(1),o=t.state.pduStates[r];return void 0!==o&&(n=o[i]),s.a.createElement(Se.a,{key:e,role:void 0,dense:!0,button:!0},s.a.createElement(Ce.a,{id:a,primary:e+" - "+n}),s.a.createElement(y.a,{variant:"contained",startIcon:s.a.createElement(ga.a,null),style:{backgroundColor:"green",color:"white",marginRight:"5px"},onClick:function(){t.pduPowerOn(r,i)}},"Power On"),s.a.createElement(y.a,{variant:"contained",startIcon:s.a.createElement(ba.a,null),style:{backgroundColor:"black",color:"white",marginRight:"5px"},onClick:function(){t.pduPowerOff(r,i)}},"Power Off"),s.a.createElement(y.a,{variant:"contained",startIcon:s.a.createElement(Ea.a,null),color:"primary",onClick:function(){t.pduPowerCycle(r,i)}},"Power Cycle"))}))):null,s.a.createElement("div",{className:a.buttons},this.props.disabled?null:s.a.createElement(y.a,{variant:"contained",color:this.props.changePlanActive?"":"primary",type:"submit",style:{backgroundColor:this.props.changePlanActive?"#64b5f6":""}},this.props.changePlanActive?"Save to Change Plan":"Save"),this.props.disabled||this.props.changePlanActive?null:s.a.createElement(y.a,{variant:"contained",color:"secondary",onClick:function(){return t.openConfirmationBox()}},"Delete"),this.props.disabled?null:s.a.createElement(y.a,{variant:"contained",onClick:function(){return t.decommissionAsset()}},this.props.changePlanActive?"Decommission in Change Plan":"Decommission")))),this.state.statusOpen?s.a.createElement(G.a,{severity:this.state.statusSeverity,action:s.a.createElement(B.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){t.statusClose()}},s.a.createElement(H.a,{fontSize:"inherit"}))},this.state.statusMessage):null,s.a.createElement(be.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:a.modal,open:this.state.showConfirmationBox,onClose:this.closeConfirmationBox,closeAfterTransition:!0,BackdropComponent:Ee.a,BackdropProps:{timeout:500}},s.a.createElement("div",{className:a.paper},s.a.createElement(f.a,{container:!0,spacing:5},s.a.createElement(f.a,{item:!0,xs:12},"Are you sure you wish to delete?"),s.a.createElement(f.a,{item:!0,xs:2},s.a.createElement(y.a,{variant:"contained",color:"primary",onClick:function(){return t.deleteAsset()}},"Yes")),s.a.createElement(f.a,{item:!0,xs:1},s.a.createElement(y.a,{variant:"contained",color:"primary",onClick:function(){return t.closeConfirmationBox()}},"No")))))))}}]),t}(s.a.Component)),xa=Object(ie.a)((function(e){return{root:{flexGrow:1},dialogDiv:{padding:e.spacing(2,4,3)},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},progress:{display:"flex","& > * + *":{marginLeft:e.spacing(2)}},appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},form:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}},div:{width:"70%",margin:"0 auto"},buttons:{"& > *":{margin:e.spacing(1)}}}}))(Pa);var Oa,Ma=s.a.forwardRef((function(e,t){return s.a.createElement(Zt.a,Object.assign({direction:"up",ref:t},e))})),Da=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).closeDetailView=function(){a.props.close(),a.props.fetchAllAssets()},a.toggleDetails=function(){a.setState({detailsExpanded:!a.state.detailsExpanded})},a.state={networkNodes:null,detailsExpanded:!0},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.classes;return s.a.createElement("span",null,s.a.createElement($t.a,{fullScreen:!0,open:this.props.open,TransitionComponent:Ma,padding:3},s.a.createElement(Z.a,{className:e.appBar},s.a.createElement(ee.a,null,s.a.createElement(B.a,{edge:"start",color:"inherit",onClick:this.closeDetailView,"aria-label":"close"},s.a.createElement(H.a,null)),s.a.createElement(E.a,{variant:"h6",className:e.title},"Asset Details"))),this.props.changePlanActive?s.a.createElement(G.a,{severity:"info"},s.a.createElement(Lt.a,null,"Change Plan Mode"),s.a.createElement(E.a,null,"Current plan: ",this.props.changePlanName),"You are currently in change plan mode! Changes made are being logged in the plan and not actually made in the system."):null,s.a.createElement(xa,{defaultValues:this.props.asset,disabled:this.props.disabled,close:this.props.close,getAssetList:this.props.getAssetList,privilege:this.props.privilege,changePlanActive:this.props.changePlanActive,changePlanID:this.props.changePlanID,changePlanStep:this.props.changePlanStep,incrementChangePlanStep:this.props.incrementChangePlanStep,username:this.props.username,fetchAllAssets:this.props.fetchAllAssets,isDecommissioned:this.props.isDecommissioned,showStatus:this.props.showStatus,isOffline:this.props.isOffline}),void 0!==this.props.asset.hostname&&""!==this.props.asset.hostname?s.a.createElement(ia,{vals:this.state.networkNodes,host:this.props.asset.hostname,assetNum:this.props.asset.asset_number,isDecommissioned:this.props.isDecommissioned,decomAsset:this.props.asset}):null))}}]),t}(s.a.Component),Aa=Object(ie.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},button:{marginLeft:e.spacing(3)}}}))(Da),Na=a(522),Ia=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).getDatacenterList=function(){p.a.get(U(O,"all/")).then((function(e){a.setState({datacenterList:e.data.datacenters})}))},a.updateDatacenter=function(e){a.setState({datacenter:e.target.value},(function(){a.search()}))},a.updateModel=function(e){a.setState({model:e.target.value},(function(){a.search()}))},a.updateHostname=function(e){a.setState({hostname:e.target.value},(function(){a.search()}))},a.updateStartingLetter=function(e){a.setState({startingLetter:e.target.value},(function(){a.search()}))},a.updateEndingLetter=function(e){a.setState({endingLetter:e.target.value},(function(){a.search()}))},a.updateStartingNum=function(e){a.setState({startingNum:e.target.value},(function(){a.search()}))},a.updateEndingNum=function(e){a.setState({endingNum:e.target.value},(function(){a.search()}))},a.updateStartDate=function(e){console.log(e.target),a.setState({startDate:e.target.value},(function(){return a.search()}))},a.updateEndDate=function(e){a.setState({endDate:e.target.value},(function(){return a.search()}))},a.updateUser=function(e){a.setState({user:e.target.value},(function(){return a.search()}))},a.clearFilters=function(){a.setState({datacenter:"",model:"",hostname:"",startingLetter:"A",endingLetter:"Z",startingNum:1,endingNum:1e3,startDate:"",endDate:"",user:""})},a.search=function(){var e=[];try{console.log(a.state.endingNum),"decommissioned"===a.props.assetType?a.props.decAssets.map((function(t){var n=new Date(""===a.state.startDate||parseInt(a.state.startDate)<2e3?"01/01/2001":a.state.startDate+" 00:00:00"),s=new Date(""===a.state.endDate||parseInt(a.state.endDate)<2e3?"12/31/2025":a.state.endDate+" 23:59:59"),r=new Date(t.timestamp);(t.datacenter_name.toLowerCase().includes(a.state.datacenter.toLowerCase())||t.abbreviation.toLowerCase().includes(a.state.datacenter.toLowerCase()))&&(t.vendor+t.model_number).toLowerCase().includes(a.state.model.toLowerCase())&&t.hostname.toLowerCase().includes(a.state.hostname.toLowerCase())&&t.rack>=a.state.startingLetter+""+a.state.startingNum&&t.rack<=a.state.endingLetter+""+a.state.endingNum&&t.decommission_user.toLowerCase().includes(a.state.user.toLowerCase())&&r>=n&&r<=s&&e.push(t)})):"active"==a.props.assetType?(console.log(a.props.allAssets),a.props.allAssets.map((function(t){if(console.log(t),(t.datacenter_name.toLowerCase().includes(a.state.datacenter.toLowerCase())||t.abbreviation.toLowerCase().includes(a.state.datacenter.toLowerCase()))&&t.model.toLowerCase().includes(a.state.model.toLowerCase())&&t.hostname.toLowerCase().includes(a.state.hostname.toLowerCase())&&(t.rack>=a.state.startingLetter+""+a.state.startingNum&&t.rack<=a.state.endingLetter+""+a.state.endingNum||"blade"===t.mount_type)){console.log("passed");var n=!1;a.state.datacenterList.map((function(e){e.is_offline_storage&&t.datacenter_name===e.name&&(n=!0)})),n||e.push(t)}}))):"offline"===a.props.assetType&&(console.log("offline storage"),a.props.allAssets.map((function(t){if(console.log(t),(t.datacenter_name.toLowerCase().includes(a.state.datacenter.toLowerCase())||t.abbreviation.toLowerCase().includes(a.state.datacenter.toLowerCase()))&&t.model.toLowerCase().includes(a.state.model.toLowerCase())&&t.hostname.toLowerCase().includes(a.state.hostname.toLowerCase())){console.log("in if");var n=!1;a.state.datacenterList.map((function(e){console.log(e),e.is_offline_storage&&t.datacenter_name===e.name&&(n=!0)})),n&&e.push(t)}}))),a.props.updateItems(e)}catch(t){a.props.updateItems([])}},a.switchAssetType=function(e){console.log(e.target.value),a.props.switchAssetType(e.target.value)},a.state={datacenter:"",model:"",hostname:"",startingLetter:"A",endingLetter:"Z",startingNum:1,endingNum:1e3,startDate:"",endDate:"",user:"",datacenterList:[]},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.search(),this.getDatacenterList()}},{key:"render",value:function(){var e,t=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(ce.a,{elevation:3,style:{minHeight:this.props.height}},s.a.createElement(f.a,{container:!0,spacing:2,direction:"row",justify:"flex-start",alignItems:"center",style:{padding:"10px"}},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{variant:"h5"},"Filter")),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(w.a,{id:"site",label:"Site",name:"site",value:this.state.datacenter,onChange:function(e){t.updateDatacenter(e)},style:{width:"100%"}})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(w.a,{id:"model",label:"Model",name:"model",value:this.state.model,onChange:function(e){t.updateModel(e)},style:{width:"100%"}})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(w.a,{id:"hostname",label:"Hostname",name:"hostname",value:this.state.hostname,onChange:function(e){return t.updateHostname(e)},style:{width:"100%"}})),s.a.createElement(f.a,(e={item:!0},Object(h.a)(e,"item",!0),Object(h.a)(e,"xs",12),Object(h.a)(e,"sm",6),Object(h.a)(e,"md",4),Object(h.a)(e,"lg",3),e)),"offline"===this.props.assetType?null:s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:2},s.a.createElement(ua.a,null,s.a.createElement(ke.a,{id:"starting-letter-selector",value:this.state.startingLetter,onChange:this.updateStartingLetter},C.map((function(e){return s.a.createElement(ne.a,{value:e},e)}))),s.a.createElement(Na.a,null,"Starting Letter"))),"offline"===this.props.assetType?null:s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:2},s.a.createElement(ua.a,null,s.a.createElement(ke.a,{id:"ending-letter-selector",value:this.state.endingLetter,onChange:this.updateEndingLetter},C.map((function(e){return s.a.createElement(ne.a,{value:e},e)}))),s.a.createElement(Na.a,null,"Ending Letter"))),"offline"===this.props.assetType?null:s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(ua.a,null,s.a.createElement(w.a,{id:"starting-num-selector",type:"number",value:this.state.startingNum,onChange:this.updateStartingNum,InputProps:{inputProps:{min:1}}}),s.a.createElement(Na.a,null,"Starting Number"))),"offline"===this.props.assetType?null:s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(ua.a,null,s.a.createElement(w.a,{id:"ending-num-selector",type:"number",value:this.state.endingNum,onChange:this.updateEndingNum,InputProps:{inputProps:{min:1}}}),s.a.createElement(Na.a,null,"Ending Number"))),s.a.createElement(f.a,{item:!0,xs:2,sm:6,md:4,lg:3},s.a.createElement(_e.a,{id:"datacenter-select-label"},"Asset Type"),s.a.createElement(ke.a,{name:"asset-type",id:"asset-type",value:this.props.assetType,onChange:function(e){return t.switchAssetType(e)},style:{width:"100%"}},s.a.createElement(ne.a,{value:"active"},"Active"),s.a.createElement(ne.a,{value:"decommissioned"},"Decommissioned"),s.a.createElement(ne.a,{value:"offline"},"Offline Storage"))),"decommissioned"===this.props.assetType?s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(w.a,{id:"user",label:"User",name:"user",onChange:function(e){t.updateUser(e)},style:{width:"100%"}})):null,"decommissioned"===this.props.assetType?s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(w.a,{id:"start-date",label:"Start Date",type:"date",onChange:function(e){return t.updateStartDate(e)},InputLabelProps:{shrink:!0}})):null,"decommissioned"===this.props.assetType?s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(w.a,{id:"end-date",label:"End Date",type:"date",onChange:function(e){return t.updateEndDate(e)},InputLabelProps:{shrink:!0}})):null)))}}]),t}(s.a.Component);function ja(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}function La(e,t,a,n){return{label:t,name:e,showTooltip:a,description:n}}var Ta,Ua={filter:(Oa={vendor:null,model_number:null,height:null,model:null,hostname:null,rack:null,rack_position:null,username:null,display_name:null,email:null,privilege:null},Object(h.a)(Oa,"model",null),Object(h.a)(Oa,"hostname",null),Object(h.a)(Oa,"starting_rack_letter",null),Object(h.a)(Oa,"ending_rack_letter",null),Object(h.a)(Oa,"starting_rack_number",null),Object(h.a)(Oa,"ending_rack_number",null),Object(h.a)(Oa,"rack",null),Object(h.a)(Oa,"rack_position",null),Object(h.a)(Oa,"chassis_hostname",null),Object(h.a)(Oa,"chassis_slot",null),Oa),datacenter_name:""},Va="search/",Ra="left",Ba="right",Fa=(s.a.forwardRef((function(e,t){return s.a.createElement(Zt.a,Object.assign({direction:"up",ref:t},e))})),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).getLists=function(){a.getModelList(),a.getOwnerList(),a.getDatacenterList(),a.getNextAssetNum(),a.getAssetList(),a.getChassisList()},a.getChassisList=function(){p.a.get(U(_,"getchassis")).then((function(e){var t=e.data.instances,n=[];t.map((function(e){n.push(e.hostname)})),a.setState({chassisList:n,allInstances:t})}))},a.getModelList=function(){p.a.post(U(k,Va),Ua).then((function(e){var t=e.data.models,n=[],s={},r={},i={};t.map((function(e){var t=e.vendor+" "+e.model_number;n.push(t),s[t]=e.ethernet_ports,r[t]=parseInt(e.power_ports),i[t]=e.mount_type})),a.setState({originalModels:t,loadingModels:!1,modelList:n,networkList:s,powerPortList:r,mountTypes:i})}))},a.getOwnerList=function(){p.a.post(U(P,Va),{filter:{username:"",display_name:"",email:"",privilege:{model:!1,asset:!1,datacenters:[],power:!1,audit:!1,admin:!1}}}).then((function(e){var t=[];e.data.users.map((function(e){return t.push(e.username+"/"+e.display_name)})),a.setState({loadingOwners:!1,ownerList:t})}))},a.getDatacenterList=function(){p.a.get(U(O,"all/")).then((function(e){var t=[];e.data.datacenters.map((function(e){a.props.privilege.datacenters.length>0?("*"===a.props.privilege.datacenters[0]||a.props.privilege.datacenters.includes(e.name))&&t.push(e):(a.props.privilege.asset||a.props.privilege.admin)&&t.push(e)})),a.setState({loadingDatacenters:!1,datacenterList:t})}))},a.getNextAssetNum=function(){p.a.get(U(_,kt.GET_NEXT_ASSET_NUM)).then((function(e){return a.setState({loadingAssetNumber:!1,asset_number:e.data.asset_number})}))},a.getAssetList=function(){p.a.post(U(_,Va),Ua).then((function(e){var t=e.data.instances,n=[],s={};t.map((function(e){""!==e.hostname&&n.push(e.hostname),s[e.hostname]=e.model})),a.setState({loadingHostnames:!1,assetNumList:n,assetNumToModelList:s},a.availableNetworkConnections())}))},a.validJSON=function(e){return""!==e.model&&""!==e.datacenter_name&&(""!==e.rack||"blade"==a.state.mount_type)&&(-1!==e.rack_position||"blade"==a.state.mount_type)&&e.asset_number>=1e5&&e.asset_number<=999999},a.createAsset=function(e){e.preventDefault();var t=a.createJSON(),n={change_plan_id:a.props.changePlanID,step:a.props.changePlanStep,action:"create",asset_numberOriginal:"",new_record:t},s=a.props.changePlanActive?U(Yt,kt.CHANGE_PLAN_CREATE_ACTION):U(Jt,kt.create);p.a.post(s,a.props.changePlanActive?n:t).then((function(e){e.data.message===Xt?(a.props.incrementChangePlanStep(),a.props.showStatus(!0,"success","Successfully created asset"),a.closeModal()):a.setState({statusOpen:!0,statusMessage:e.data.message,statusSeverity:Qt})}))},a.updateModel=function(e){var t=e.target.value;if(""!==t){var n=a.state.networkList[t],s={};null!==n&&void 0!==n&&n.map((function(e){s[e]={mac_address:"",connection_hostname:"",connection_port:""}})),a.setState({mount_type:a.state.mountTypes[t]})}else s={};a.setState({model:t,network_connections:s},(function(){a.validateForm(),a.restoreDefaults()}))},a.updateBladeChassis=function(e){a.setState({blade_chassis:e.target.value})},a.updateBladePosition=function(e){a.setState({blade_position:e.target.value})},a.updateHostname=function(e){a.setState({hostname:e.target.value},(function(){a.validateForm()}))},a.updateRack=function(e){var t=e.target.value;a.setState({rack:t},(function(){a.validateForm()})),2===t.length&&""!==a.state.datacenter_name&&p.a.post(U(x,"nextPDU/"),{rack:t,datacenter_name:a.state.datacenter_name}).then((function(e){console.log(a.state.power_connections);try{var t=e.data.free_left,n=[];a.state.power_connections.map((function(e,s){s%2===0&&s<a.state.power_connections.length-1?(console.log(s),n[s]=t[s],n[s+1]=t[s+1]):console.log("passing")}))}catch(s){console.log(s)}}))},a.updateRackU=function(e){a.setState({rackU:e.target.value},(function(){a.validateForm()}))},a.updateOwner=function(e){a.setState({owner:e.target.value},(function(){a.validateForm()}))},a.updateComment=function(e){a.setState({comment:e.target.value},(function(){a.validateForm()}))},a.updateDatacenter=function(e){var t=!1;a.state.datacenterList.map((function(a){a.name===e.target.value&&(t=a.is_offline_storage)}));var n=a.state.allInstances.filter((function(t){return t.datacenter_name===e.target.value})).map((function(e){return e.hostname}));a.setState({filteredChassisList:n,datacenter_name:e.target.value,datacenterIsOffline:t},(function(){a.validateForm()}))},a.changeNetworkMacAddress=function(e,t){var n=wa(e.target.value);a.setState((function(e){var a=Object.assign({},e.network_connections);return a[t].mac_address=n,{network_connections:a}}),(function(){a.validateForm()}))},a.changeNetworkHostname=function(e,t){var n=void 0===e?"":e;a.setState((function(e){var a=Object.assign({},e.network_connections);return a[t].connection_hostname=n,{network_connections:a}}),(function(){a.getPortOptions(n),a.validateForm()}))},a.changeNetworkPort=function(e,t){var n=void 0===e?"":e;a.setState((function(e){var a=Object.assign({},e.network_connections);return a[t]=null===a[t]?{}:a[t],a[t].connection_port=n,{network_connections:a}}),(function(){a.validateForm()}))},a.updatePowerPort=function(e,t){var n=e.target.value;a.setState((function(e){var a=Object.assign({},e.power_connections);return a[t]=n,{power_connections:a}}),(function(){a.validateForm()}))},a.changePowerPortState=function(e,t){var n=e.target.value;a.setState((function(e){var a=Object.assign({},e.leftRight);return a[t]=n,{leftRight:a}}),(function(){a.validateForm()}))},a.updateAssetNumber=function(e){a.setState({asset_number:e.target.value},(function(){a.validateForm()}))},a.getPowerConnections=function(){if(null===a.state.leftRight)return[];var e=[];return Object.entries(a.state.leftRight).map((function(t){var n=Object(ea.a)(t,2),s=n[0],r=n[1],i=null===a.state.power_connections?1:a.state.power_connections[s];switch(r){case Ra:e.push("L"+i);break;case Ba:e.push("R"+i)}})),e},a.createJSON=function(){return{model:a.state.model,hostname:a.state.hostname,rack:a.state.rack,rack_position:a.state.rackU,owner:a.state.owner.split("/")[0],comment:a.state.comment,datacenter_name:a.state.datacenter_name,tags:a.state.tags,network_connections:null===a.state.network_connections?{}:a.state.network_connections,power_connections:a.getPowerConnections(),asset_number:a.state.asset_number,chassis_hostname:a.state.blade_chassis,chassis_slot:a.state.blade_position,cpu:a.state.customCPU,display_color:a.state.customColor,memory:a.state.customMemory,storage:a.state.customStorage}},a.availableNetworkConnections=function(){var e=!1;a.state.assetNumList.map((function(t){Object.keys(a.state.networList[a.state.assetNumToModelList[t]].length).length>0&&(e=!0)})),a.setState({availableConnections:e})},a.showModal=function(){a.setState({showModal:!0})},a.closeModal=function(){a.props.fetchAllAssets(),a.props.close()},a.statusClose=function(){a.setState({statusOpen:!1,statusMessage:"",statusSeverity:""})},a.validateForm=function(){a.setState({canSubmit:a.validJSON(a.createJSON())})},a.getPortOptions=function(e){try{a.setState({portOptions:a.state.networkList[a.state.assetNumToModelList[e]]})}catch(t){}},a.cancelUpgrades=function(){a.setState({customizeModel:!1},(function(){a.restoreDefaults()}))},a.restoreDefaults=function(){var e=null;a.state.originalModels.map((function(t){a.state.model===t.vendor+" "+t.model_number&&(e=t)})),null!==e&&void 0!==e?a.setState({customColor:null===e.display_color?"#A52A2A":e.display_color,customCPU:e.cpu,customMemory:e.memory,customStorage:e.storage}):a.setState({customColor:"#A52A2A",customCPU:"",customMemory:"",customStorage:""})},a.state={loadingAssetNumber:!0,loadingModels:!0,modelList:[],networkList:null,powerPortList:null,loadingOwners:!0,ownerList:[],loadingDatacenters:!0,datacenterList:[],loadingHostnames:!0,assetNumList:[],assetNumToModelList:null,model:"",hostname:"",rack:"",rackU:-1,owner:"",comment:"",datacenter_name:"",datacenterIsOffline:!1,tags:[],network_connections:null,power_connections:null,asset_number:1e5,blade_chassis:null,blade_position:null,mount_type:null,chassisList:[],allInstances:[],filteredChassisList:[],mountTypes:null,selectedConnection:null,statusOpen:!1,statusMessage:"",statusSeverity:"",showModal:!1,powerPortState:null,leftRight:null,availableConnections:!1,portOptions:[],canSubmit:!1,next_pair:-1,free_left:-1,free_right:-1,inputs:{model:La(_t.MODEL,"Model",!1,"A reference to an existing model"),hostname:La(_t.HOSTNAME,"Hostname",!1,"A short string compliant with RFC 1034\u2019s definition of 'label'"),rack:La(_t.RACK,"Rack",!1,"The rack the equipment is installed in, written as a row letter and rack number, e.g. 'B12'"),rackU:La(_t.RACK_U,"Rack U",!1,"An integer indicating the vertical location of the bottom of the equipment (e.g. '5')"),owner:La(_t.OWNER,"Owner",!1,"A reference to an existing user on the system who owns this equipment"),comment:La(_t.COMMENT,"Comment",!1,"Any additional information associated with this asset"),datacenter:La(_t.DATACENTER,"Datacenter",!1,"A reference to an existing datacenter"),macAddress:La(_t.MAC_ADDRESS,"Mac Address",!1,"A 6-byte hexadecimal string per network port shown canonically in lower case with colon delimiters (e.g., '00:1e:c9:ac:78:aa').\nA hostname is required to enter in this value"),networkConnections:La(_t.NETWORK_CONNECTIONS,"Port Name",!1,"For each network port, a reference to another network port on another piece of gear"),powerConnections:La(_t.POWER_CONNECTIONS,"Power Connections",!1,"Choice of PDU port number (0 means not plugged in)"),assetNum:La(_t.ASSET_NUMBER,"Asset Number",!1,"A six-digit serial number unique associated with an asset."),bladeChassis:La(_t.BLADE_CHASSIS,"Blade Chassis",!1,"A reference to a blade chassis asset"),bladePosition:La(_t.BLADE_POSITION,"Blade Position",!1,"An integer indicating the slot number of a blade")},customCPU:"",customColor:"",customMemory:"",customStorage:""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getLists()}},{key:"render",value:function(){var e=this,t=this.props.classes;return s.a.createElement("span",{className:t.div},s.a.createElement(ce.a,{elevation:3},this.state.loadingAssetNumber||this.state.loadingDatacenters||this.state.loadingModels||this.state.loadingHostnames||this.state.loadingOwners?s.a.createElement("div",{className:t.progress},s.a.createElement(Fe.a,null)):s.a.createElement("form",{onSubmit:function(t){e.createAsset(t)},className:t.form},s.a.createElement("div",{className:t.dialogDiv},s.a.createElement(Nt.a,{placement:"top",open:this.state.inputs.model.Tooltip,title:this.state.inputs.model.description},s.a.createElement(pe.a,{id:"select-model",options:this.state.modelList,includeInputInList:!0,style:{display:"inline-block"},onSelect:this.updateModel,onChange:this.updateModel,renderInput:function(t){return s.a.createElement(w.a,Object.assign({},t,{label:e.state.inputs.model.label,name:e.state.inputs.model.name,onChange:e.updateModel,onBlur:e.updateModel,required:!0}))}})),"blade"===this.state.mount_type?s.a.createElement(Nt.a,{placement:"top",open:this.state.inputs.datacenter.Tooltip,title:this.state.inputs.datacenter.description},s.a.createElement(pe.a,{id:"input-datacenter",options:this.state.datacenterList.map((function(e){return e.name})),includeInputInList:!0,style:{display:"inline-block"},renderInput:function(t){return s.a.createElement(w.a,Object.assign({},t,{label:e.state.inputs.datacenter.label,name:e.state.inputs.datacenter.name,onChange:function(t){e.updateDatacenter(t)},onBlur:e.updateDatacenter,required:!0}))}})):null,"blade"===this.state.mount_type?s.a.createElement("div",null,s.a.createElement(Nt.a,{placement:"top",open:this.state.inputs.bladeChassis.Tooltip,title:this.state.inputs.bladeChassis.description},s.a.createElement(pe.a,{id:"select-chassis",options:this.state.filteredChassisList,includeInputInList:!0,style:{display:"inline-block"},renderInput:function(t){return s.a.createElement(w.a,Object.assign({},t,{label:e.state.inputs.bladeChassis.label,name:e.state.inputs.bladeChassis.name,onChange:e.updateBladeChassis,onBlur:e.updateBladeChassis,required:!0}))}})),s.a.createElement(_e.a,{id:"select-blade-position-label"},"Blade Position"),s.a.createElement(Nt.a,{placement:"top",open:this.state.inputs.bladePosition.Tooltip,title:this.state.inputs.bladePosition.description},s.a.createElement(ke.a,{labelId:"select-blade-position-label",id:"select-blade-position",value:this.state.blade_position,required:!0,onChange:this.updateBladePosition,style:{display:"inline-block",width:"20%"}},s.a.createElement(ne.a,{value:1},"1"),s.a.createElement(ne.a,{value:2},"2"),s.a.createElement(ne.a,{value:3},"3"),s.a.createElement(ne.a,{value:4},"4"),s.a.createElement(ne.a,{value:5},"5"),s.a.createElement(ne.a,{value:6},"6"),s.a.createElement(ne.a,{value:7},"7"),s.a.createElement(ne.a,{value:8},"8"),s.a.createElement(ne.a,{value:9},"9"),s.a.createElement(ne.a,{value:10},"10"),s.a.createElement(ne.a,{value:11},"11"),s.a.createElement(ne.a,{value:12},"12"),s.a.createElement(ne.a,{value:13},"13"),s.a.createElement(ne.a,{value:14},"14")))):null,s.a.createElement(Nt.a,{placement:"top",open:this.state.inputs.owner.Tooltip,title:this.state.inputs.owner.description},s.a.createElement(pe.a,{id:"select-owner",options:this.state.ownerList,includeInputInList:!0,style:{display:"inline-block"},renderInput:function(t){return s.a.createElement(w.a,Object.assign({},t,{label:e.state.inputs.owner.label,name:e.state.inputs.owner.name,onChange:e.updateOwner,onBlur:e.updateOwner}))}})),"blade"!==this.state.mount_type?s.a.createElement(Nt.a,{placement:"top",open:this.state.inputs.datacenter.Tooltip,title:this.state.inputs.datacenter.description},s.a.createElement(pe.a,{id:"input-datacenter",options:this.state.datacenterList.map((function(e){return e.name})),includeInputInList:!0,style:{display:"inline-block"},renderInput:function(t){return s.a.createElement(w.a,Object.assign({},t,{label:e.state.inputs.datacenter.label,name:e.state.inputs.datacenter.name,onChange:function(t){e.updateDatacenter(t)},onBlur:e.updateDatacenter,required:!0}))}})):null,this.state.datacenterIsOffline||"blade"==this.state.mount_type?null:s.a.createElement(Nt.a,{placement:"top",open:this.state.inputs.rack.Tooltip,title:this.state.inputs.rack.description},s.a.createElement(w.a,{id:"input-rack",style:{display:"inline-block"},label:this.state.inputs.rack.label,name:this.state.inputs.rack.name,onChange:this.updateRack,value:this.state.rack,required:!0})),this.state.datacenterIsOffline||"blade"==this.state.mount_type?null:s.a.createElement(Nt.a,{placement:"top",open:this.state.inputs.rackU.Tooltip,title:this.state.inputs.rackU.description},s.a.createElement(w.a,{id:"input-rackU",type:"number",InputProps:{inputProps:{min:1,max:42}},label:this.state.inputs.rackU.label,name:this.state.inputs.rackU.name,onChange:this.updateRackU,required:!0})),s.a.createElement(Nt.a,{placement:"top",open:this.state.inputs.assetNum.Tooltip,title:this.state.inputs.assetNum.description},s.a.createElement(w.a,{id:"input-asset-number",type:"number",InputProps:{inputProps:{min:1e5,max:999999}},label:this.state.inputs.assetNum.label,name:this.state.inputs.assetNum.name,onChange:this.updateAssetNumber,value:this.state.asset_number,required:!0})),s.a.createElement(Nt.a,{placement:"top",open:this.state.inputs.hostname.Tooltip,title:this.state.inputs.hostname.description},s.a.createElement(w.a,{id:"input-hostname",label:this.state.inputs.hostname.label,name:this.state.inputs.hostname.name,onChange:this.updateHostname})),s.a.createElement("div",null,this.state.customizeModel||this.props.disabled?null:s.a.createElement(y.a,{variant:"contained",color:"primary",onClick:function(){return e.setState({customizeModel:!0})}},"Customize Model Hardware"),this.state.customizeModel||this.props.disabled?s.a.createElement("span",null,s.a.createElement(Oe.CompactPicker,{color:this.state.customColor,onChange:function(t){try{e.setState({customColor:t.hex})}catch(a){e.setState({customColor:"#A52A2A"})}},disabled:this.props.disabled}),s.a.createElement(w.a,{disabled:this.props.disabled,label:"CPU",value:this.state.customCPU,onChange:function(t){e.setState({customCPU:t.target.value})}}),s.a.createElement(w.a,{disabled:this.props.disabled,type:"number",value:this.state.customMemory,label:"Memory",onChange:function(t){e.setState({customMemory:t.target.value})},InputProps:{inputProps:{min:0}}}),s.a.createElement(w.a,{disabled:this.props.disabled,label:"Storage",value:this.state.customStorage,onChange:function(t){e.setState({customStorage:t.target.value})}}),this.props.disabled?null:s.a.createElement("div",{className:t.buttons},s.a.createElement(y.a,{variant:"contained",color:"primary",onClick:function(){return e.restoreDefaults()}},"Use original Model Values"),s.a.createElement(y.a,{variant:"contained",color:"secondary",onClick:function(){return e.cancelUpgrades()}},"Cancel Upgrades"))):null),this.state.networkList&&this.state.networkList[this.state.model]&&!this.state.datacenterIsOffline?this.state.networkList[this.state.model].map((function(t){return s.a.createElement("div",null,s.a.createElement(E.a,{style:{display:"inline-block"}},"Network Port: "+t+": "),s.a.createElement(Nt.a,{placement:"top",open:e.state.inputs.macAddress.Tooltip,title:e.state.inputs.macAddress.description},s.a.createElement(w.a,{id:"input-mac-address",label:e.state.inputs.macAddress.label,name:e.state.inputs.macAddress.name,onChange:function(a){e.changeNetworkMacAddress(a,t)},value:null!==e.state.network_connections&&void 0!==e.state.network_connections[t]?e.state.network_connections[t].mac_address:""})),s.a.createElement(Nt.a,{placement:"top",open:e.state.inputs.networkConnections.Tooltip,title:e.state.inputs.networkConnections.description},s.a.createElement(pe.a,{id:"input-network-ports",options:e.state.assetNumList,includeInputInList:!0,style:{display:"inline-block"},onChange:function(a,n){e.changeNetworkHostname(n,t)},required:""!==e.state.network_connections[t].connection_port,renderInput:function(t){return s.a.createElement(w.a,Object.assign({},t,{label:"Connection Hostname",name:"Connection Hostname",disabled:""===e.state.hostname}))}})),s.a.createElement(Nt.a,{placement:"top",open:e.state.inputs.networkConnections.Tooltip,title:e.state.inputs.networkConnections.description},s.a.createElement(pe.a,{id:"input-network-ports",options:e.state.portOptions,includeInputInList:!0,style:{display:"inline-block"},onChange:function(a,n){e.changeNetworkPort(n,t)},renderInput:function(a){return s.a.createElement(w.a,Object.assign({},a,{label:"Connection Port",name:"Connection Port",required:""!==e.state.network_connections[t].connection_hostname,disabled:""===e.state.hostname}))}})))})):null,this.state.powerPortList&&this.state.powerPortList[this.state.model]&&!this.state.datacenterIsOffline?Array.from({length:this.state.powerPortList[this.state.model]},(function(t,a){return s.a.createElement("span",null,s.a.createElement(E.a,null,"Power Port: "+a),s.a.createElement(ua.a,{component:"fieldset"},s.a.createElement(ma.a,{id:"power-port-"+a,"aria-label":"position",name:"position"+a,value:null===e.state.leftRight?"off":void 0===e.state.leftRight[a]?"off":e.state.leftRight[a],onChange:function(t){e.changePowerPortState(t,a)},row:!0},s.a.createElement(da.a,{value:Ra,control:s.a.createElement(pa.a,{color:"primary"}),label:"Left",labelPlacement:"bottom"}),s.a.createElement(da.a,{value:Ba,control:s.a.createElement(pa.a,{color:"primary"}),label:"Right",labelPlacement:"bottom"}),s.a.createElement(da.a,{value:"off",control:s.a.createElement(pa.a,{color:"primary"}),label:"No Connection",labelPlacement:"bottom"}))),null===e.state.leftRight?null:void 0===e.state.leftRight[a]||"off"===e.state.leftRight[a]?null:s.a.createElement(w.a,{type:"number",value:null===e.state.power_connections?1:void 0===e.state.power_connections[a]?1:e.state.power_connections[a],InputProps:{inputProps:{min:1,max:24}},onChange:function(t){e.updatePowerPort(t,a)}}))})):null,s.a.createElement("div",null,s.a.createElement(w.a,{id:"input-comment",style:{width:"50%"},label:this.state.inputs.comment.label,name:this.state.inputs.comment.name,onChange:this.updateComment,multiline:!0})),s.a.createElement("div",{className:t.buttons},s.a.createElement(y.a,{variant:"contained",type:"submit",color:this.props.changePlanActive?"":"primary",style:{backgroundColor:this.props.changePlanActive?"#64b5f6":""}},this.props.changePlanActive?"Create in Change Plan":"Create"),s.a.createElement(y.a,{variant:"contained",color:"primary",onClick:this.closeModal},"Cancel")))),this.state.statusOpen?s.a.createElement(G.a,{severity:this.state.statusSeverity,action:s.a.createElement(B.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){e.statusClose()}},s.a.createElement(H.a,{fontSize:"inherit"}))},this.state.statusMessage):null))}}]),t}(s.a.Component)),Ha=Object(ie.a)((function(e){return{root:{flexGrow:1},dialogDiv:{padding:e.spacing(2,4,3)},modal:{display:"flex",alignItems:"center",justifyContent:"center",maxWidth:"80%",margin:"0 auto",minWidth:"70%",maxHeight:"600px",overflow:"scroll"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},progress:{display:"flex","& > * + *":{marginLeft:e.spacing(2)}},appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},form:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}},div:{width:"70%",margin:"0 auto"},buttons:{"& > *":{margin:e.spacing(1)}}}}))(Fa),Wa=(a(517),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).setFile=function(e){a.setState({importedFile:e})},a.chooseFile=function(e){a.setState({importedFile:e.target.files[0]})},a.uploadFile=function(){var e=new FormData;e.append("file",a.state.importedFile),a.sendUploadedFile(e)},a.closeImport=function(){a.setState({importedFile:null},(function(){a.props.close()}))},a.sendUploadedFile=function(e){var t=a.props.connections?"networkConnections/":Jt;p.a.post(U(t,kt.UPLOAD_FILE),e).then((function(e){e.data.message===Xt?(a.setState({showStatus:!0,statusMessage:e.data.summary,statusSeverity:Xt,showImport:!1}),a.props.refresh(),a.props.close()):a.setState({showStatus:!0,statusMessage:e.data.message,statusSeverity:Qt})}))},a.closeShowStatus=function(){a.setState({showStatus:!1,statusMessage:"",statusSeverity:""})},a.state={importedFile:null,showStatus:!1,statusSeverity:"",statusMessage:""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return s.a.createElement("div",null,s.a.createElement(be.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:this.props.open,onClose:this.closeImport,closeAfterTransition:!0},s.a.createElement(Ee.a,{open:this.props.open},s.a.createElement("div",{className:t.grid},s.a.createElement(f.a,{container:!0,spacing:1,direction:"row",justify:"flex-start",alignItems:"center"},s.a.createElement(f.a,{item:!0,xs:9},s.a.createElement(E.a,{variant:"h5"},"Import Assets")),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(y.a,{onClick:this.closeImport,style:{width:"100%"}},"Close")),s.a.createElement(f.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center",xs:12},s.a.createElement("input",{type:"file",accept:".csv",onChange:this.chooseFile})),s.a.createElement(f.a,{container:!0,item:!0,direciton:"row",justify:"center",alignItems:"center",xs:12},s.a.createElement(y.a,{variant:"contained",color:"primary",style:{width:"40%"},onClick:function(){e.uploadFile()}},"Upload File")))))),s.a.createElement(q,{open:this.state.showStatus,severity:this.state.statusSeverity,closeStatus:this.closeShowStatus,message:this.state.statusMessage}))}}]),t}(s.a.Component)),Ga=Object(ie.a)((function(e){return{grid:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3),width:"50%"}}}))(Wa),qa=s.a.forwardRef((function(e,t){return s.a.createElement(Zt.a,Object.assign({direction:"up",ref:t},e))})),za=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).openImport=function(){a.setState({showImport:!0})},a.closeImport=function(){a.setState({showImport:!1})},a.openConnectionsImport=function(){a.setState({showConnectionsImport:!0})},a.closeConnectionsImport=function(){a.setState({showConnectionsImport:!1})},a.openCreate=function(){a.setState({showCreate:!0})},a.closeCreate=function(){a.setState({showCreate:!1})},a.state={showCreate:!1,showImport:!1,showConnectionsImport:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return s.a.createElement(s.a.Fragment,null,s.a.createElement(ce.a,{elevation:3,style:{minHeight:this.props.height}},s.a.createElement(f.a,{container:!0,spacing:2,direction:"row",justify:"flex-start",alignItems:"center",style:{padding:"10px"}},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{variant:"h5"},"Add")),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(y.a,{variant:"contained",style:{width:"100%",background:"green",color:"white"},onClick:this.openCreate},"Create")),s.a.createElement(f.a,{container:!0,item:!0,direciton:"row",justify:"center",alignItems:"center",xs:12},s.a.createElement("hr",{style:{width:"5vw"}}),s.a.createElement(E.a,{color:"textSecondary"},"Or"),s.a.createElement("hr",{style:{width:"5vw"}})),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(y.a,{variant:"contained",color:"primary",style:{width:"100%"},startIcon:s.a.createElement(xe.a,null),onClick:function(){e.openImport()}},"Import Assets")),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(y.a,{variant:"contained",color:"primary",style:{width:"100%"},startIcon:s.a.createElement(xe.a,null),onClick:function(){e.openConnectionsImport()}},"Import Network Connections")))),s.a.createElement($t.a,{fullScreen:!0,open:this.state.showCreate,onClose:this.closeCreate,TransitionComponent:qa,padding:3},s.a.createElement(Z.a,{className:t.appBar},s.a.createElement(ee.a,null,s.a.createElement(B.a,{edge:"start",color:"inherit",onClick:this.closeCreate,"aria-label":"close"},s.a.createElement(H.a,null)),s.a.createElement(E.a,{variant:"h6",className:t.title},"Create Asset"))),s.a.createElement(Ha,{close:this.closeCreate,getAssetList:this.props.getAssetList,showStatus:this.props.showStatus,privilege:this.props.privilege,changePlanActive:this.props.changePlanActive,changePlanID:this.props.changePlanID,changePlanStep:this.props.changePlanStep,incrementChangePlanStep:this.props.incrementChangePlanStep,fetchAllAssets:this.props.fetchAllAssets})),s.a.createElement(Ga,{open:this.state.showImport,close:this.closeImport,refresh:this.props.fetchAllAssets,connections:!1}),s.a.createElement(Ga,{open:this.state.showConnectionsImport,close:this.closeConnectionsImport,refresh:this.props.fetchAllAssets,connections:!0}))}}]),t}(s.a.Component),Ka=Object(ie.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}}}))(za),Ja=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){a.setState({canCreateChangePlans:a.props.privilege.admin||a.props.privilege.asset||a.props.privilege.datacenters.length>0})},a.downloadTable=function(){p.a.post(U(Jt,kt.EXPORT_FILE),{filter:{},datacenter_name:""}).then((function(e){console.log(e),a.setState({csvData:e.data.csvData}),a.csvLink.link.click()}))},a.openChangePlanModal=function(){a.setState({changePlanModal:!0})},a.closeChangePlanModal=function(){a.setState({changePlanModal:!1})},a.updatePlanName=function(e){a.setState({changePlanName:e.target.value})},a.beginChangePlan=function(){a.closeChangePlanModal(),a.setState({changeDescriptionModal:!0}),p.a.post(U(Yt,kt.CHANGE_PLAN_CREATE),{owner:a.props.username,name:a.state.changePlanName}).then((function(e){a.props.updateChangePlan(!0,e.data.change_plan,1,a.state.changePlanName),a.setState({changePlanName:""})}))},a.closeDescriptionModal=function(){a.setState({changeDescriptionModal:!1})},a.state={csvData:"",changePlanModal:!1,changeDescriptionModal:!1,canCreateChangePlans:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return s.a.createElement("div",null,s.a.createElement(ce.a,{elevation:3,style:{minHeight:this.props.height}},s.a.createElement(f.a,{container:!0,spacing:2,direction:"row",justify:"flex-start",alignItems:"center",style:{padding:"10px"}},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{variant:"h6"},"Export")),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,null,"Download what is currently shown in the table.")),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(y.a,{onClick:function(){e.downloadTable()},variant:"contained",color:"primary",startIcon:s.a.createElement(me.a,null),style:{width:"100%"}},"Export All Data")),!this.props.changePlanActive&&this.state.canCreateChangePlans?s.a.createElement(f.a,{container:!0,item:!0,direciton:"row",justify:"center",alignItems:"center",xs:12},s.a.createElement("hr",{style:{width:"5vw"}}),s.a.createElement(E.a,{color:"textSecondary"},"Or"),s.a.createElement("hr",{style:{width:"5vw"}})):null,!this.props.changePlanActive&&this.state.canCreateChangePlans?s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(y.a,{variant:"contained",color:"default",style:{width:"100%"},startIcon:s.a.createElement(qt.a,null),onClick:this.openChangePlanModal},"Create Change Plan")):null)),s.a.createElement(le.CSVLink,{data:this.state.csvData,filename:"assets.csv",className:"hidden",ref:function(t){return e.csvLink=t},target:"_blank"}),s.a.createElement(be.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:this.state.changePlanModal,onClose:this.closeChangePlanModal,closeAfterTransition:!0},s.a.createElement(ve.a,{in:this.state.changePlanModal},s.a.createElement(Ee.a,{open:this.state.changePlanModal},s.a.createElement("div",{className:t.grid},s.a.createElement(f.a,{container:!0,spacing:1,direction:"row",justify:"flex-start",alignItems:"center"},s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(E.a,null,"Enter plan name:")),s.a.createElement(f.a,{item:!0,xs:9},s.a.createElement(w.a,{type:"text",id:"change-plan-name",variant:"outlined",label:"Change Plan Name",name:"change-plan-name",onChange:this.updatePlanName,style:{width:"100%"}})),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(y.a,{variant:"contained",color:"primary",onClick:this.beginChangePlan,style:{width:"100%"}},"Begin")),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(y.a,{variant:"contained",color:"secondary",onClick:this.closeChangePlanModal,style:{width:"100%"}},"Cancel"))))))),s.a.createElement(be.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:this.state.changeDescriptionModal,onClose:this.closeDescriptionModal,closeAfterTransition:!0},s.a.createElement(ve.a,{in:this.state.changeDescriptionModal},s.a.createElement(Ee.a,{open:this.state.changeDescriptionModal},s.a.createElement("div",{className:t.grid},s.a.createElement(f.a,{container:!0,spacing:1,direction:"row",justify:"flex-start",alignItems:"center"},s.a.createElement(f.a,{item:!0,xs:3}),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(E.a,null,"You are now in change plan mode. All changes made will be logged to the change plan and will not actually be made in the system. Use the icon in the bottom right corner to exit change plan mode!")),s.a.createElement(f.a,{item:!0,xs:3}),s.a.createElement(f.a,{item:!0,xs:3}),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(y.a,{variant:"contained",color:"primary",onClick:this.closeDescriptionModal,style:{width:"100%"}},"Ok")),s.a.createElement(f.a,{item:!0,xs:3})))))))}}]),t}(s.a.Component),Ya=Object(ie.a)((function(e){return{root:{flexGrow:1},modal:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},grid:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3),width:"50%"},progress:{display:"flex","& > * + *":{marginLeft:e.spacing(2)}}}}))(Ja),Xa="decommissioned",Qa={filter:(Ta={vendor:null,model_number:null,height:null,model:null,hostname:null,rack:null,rack_position:null,username:null,display_name:null,email:null,privilege:null},Object(h.a)(Ta,"model",null),Object(h.a)(Ta,"hostname",null),Object(h.a)(Ta,"starting_rack_letter",null),Object(h.a)(Ta,"ending_rack_letter",null),Object(h.a)(Ta,"starting_rack_number",null),Object(h.a)(Ta,"ending_rack_number",null),Object(h.a)(Ta,"rack",null),Object(h.a)(Ta,"rack_position",null),Ta),datacenter_name:""};function Za(e,t,a,n,s,r){return{model:e,hostname:t,datacenter_name:a,rack:n,owner:s,asset_number:r}}var $a,en=[{id:"hostname",numeric:!1,label:"Hostname",align:"left"},{id:"datacenter_name",numeric:!1,label:"Datacenter",align:"left"},{id:"model",numeric:!1,label:"Model",align:"left"},{id:"rack",numeric:!1,label:"Rack",align:"left"},{id:"owner",numeric:!1,label:"Owner",align:"left"},{id:"asset_number",numeric:!1,label:"Asset Number",align:"right"}],tn=[{id:"decommission_user",numeric:!1,label:"User",align:"right"},{id:"timestamp",numeric:!1,label:"Timestamp",align:"right"}],an=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).fetchAllAssets=function(){a.props.changePlanActive?(p.a.post(U(_,kt.search),Qa).then((function(e){var t=[],n=e.data.instances;p.a.post(U("changeplans/",kt.CHANGE_PLAN_GET_ACTIONS),{change_plan_id:a.props.changePlanID,owner:a.props.username}).then((function(e){var s=e.data.change_plan_actions,r=[];s.forEach((function(e){var t=e.asset_numberOriginal;r.push(t)}));var i=n.filter((function(e){return!r.includes(e.asset_number)}));s.forEach((function(e){"decommission"!==e.action&&i.push(e.new_record)})),i.map((function(e){t.push(Za(e.model,e.hostname,e.datacenter_name,a.getRack(e),e.owner,e.asset_number))})),a.setState({allAssets:i,tableItems:t},(function(){return a.filter.current.search()}))}))})),a.getDecommissionedAssets()):(p.a.post(U(_,kt.search),Qa).then((function(e){var t=[];console.log("instances"),console.log(e.data.instances),e.data.instances.map((function(e){t.push(Za(e.model,e.hostname,e.datacenter_name,a.getRack(e),e.owner,e.asset_number))})),a.setState({allAssets:e.data.instances,tableItems:t},(function(){return a.filter.current.search()}))})),a.getDecommissionedAssets())},a.deleteAsset=function(){var e={};e[_t.RACK]=a.state.originalRack,e[_t.RACK_U]=a.state.originalrack_position,p.a.post(U(Jt,kt.delete),e).then((function(e){e.data.message===Xt?a.setState({showStatus:!0,statusMessage:"Successfully deleted asset",statusSeverity:Xt,originalRack:"",originalrack_position:"",showDetailedView:!1}):a.setState({showStatus:!0,statusMessage:e.data.message,statusSeverity:Qt})}))},a.generateLabels=function(){var e={};e[_t.ASSET_NUMBER]=a.state.selectedItems,p.a.post(U(Jt,kt.GENERATE_LABELS),e,{responseType:"arraybuffer"}).then((function(e){try{var t=new Blob([e.data],{type:"application/pdf"}),n=document.createElement("a");n.href=window.URL.createObjectURL(t),n.download="AssetLabels_"+new Date+".pdf",n.click(),a.setState({showStatus:!0,statusMessage:"Successfully generated asset label(s)",statusSeverity:Xt})}catch(s){a.setState({showStatus:!0,statusMessage:"Could not generate asset labels",statusSeverity:Qt})}}))},a.closeDetailedView=function(){a.setState({showDetailedView:!1,assetType:"active"}),a.fetchAllAssets(),a.filter.current.clearFilters()},a.closeShowStatus=function(){a.setState({showStatus:!1})},a.createSortHandler=function(e,t){var n=a.state.orderBy===t&&"asc"===a.state.order;a.setState({order:n?"desc":"asc",orderBy:t})},a.openDetailedView=function(e,t){console.log("opening detail view"),console.log(t);var n={},s=[];"active"===a.state.assetType||"offline"===a.state.assetType?s=a.state.allAssets:a.state.assetType===Xa&&(s=a.state.decAssets),s.map((function(e){e.asset_number===t.asset_number&&Object.assign(n,e)})),console.log(n),a.setState({detailAsset:n,showDetailedView:!0,rowOwner:t.owner})},a.getRack=function(e){var t=e.rack;return"blade"!==e.mount_type&&(t+=" U"+e.rack_position),t},a.updateItems=function(e){var t=[];"active"===a.state.assetType?e.map((function(e){t.push(Za(e.model,e.hostname,e.datacenter_name,a.getRack(e),e.owner,e.asset_number))})):a.state.assetType===Xa?e.map((function(e){var n,s,r,i,o,l,c,u;t.push((n=e.vendor+" "+e.model_number,s=e.hostname,r=e.datacenter_name,i=a.getRack(e),o=e.owner,l=e.asset_number,c=e.decommission_user,u=e.timestamp,{model:n,hostname:s,datacenter_name:r,rack:i,owner:o,asset_number:l,decommission_user:c,timestamp:u}))})):"offline"===a.state.assetType&&e.map((function(e){t.push(Za(e.model,e.hostname,e.datacenter_name,a.getRack(e),e.owner,e.asset_number))})),a.setState({tableItems:t})},a.getAssetList=function(){p.a.post(U(_,kt.search),Qa).then((function(e){console.log(e.data.instances),a.setState({allAssets:e.data.instances})}))},a.getDecommissionedAssets=function(){p.a.post(U(A,kt.search),{filter:{decommission_user:"",start_date:"",end_date:""}}).then((function(e){a.setState({decAssets:e.data.decommissions})}))},a.showStatusBar=function(e,t,n){a.setState({showStatus:e,statusSeverity:t,statusMessage:n})},a.closeShowStatus=function(){a.setState({showStatus:!1,statusSeverity:"",statusMessage:""})},a.onSelectAllClick=function(e){var t=a.state.selectedItems;a.state.tableItems.map((function(e){-1===t.indexOf(e.asset_number)&&(t=t.concat(e.asset_number))})),a.setState({selectedItems:t}),a.forceUpdate()},a.deselectAllClick=function(){var e=a.state.selectedItems;a.state.tableItems.map((function(t){var a=e.indexOf(t.asset_number);0===a?e=e.slice(1):a===e-1?e=e.slice(0,-1):a>0&&(e=e.slice(0,a).concat(e.slice(a+1)))})),a.setState({selectedItems:e}),a.forceUpdate()},a.addCheckedItem=function(e,t){if(a.state.assetType!==Xa&&"MuiButton-label"!==e.target.getAttribute("class")){var n=a.state.selectedItems.indexOf(t),s=[];-1===n?s=s.concat(a.state.selectedItems,t):0===n?s=s.concat(a.state.selectedItems.slice(1)):n===a.state.selectedItems.length-1?s=s.concat(a.state.selectedItems.slice(0,-1)):n>0&&(s=s.concat(a.state.selectedItems.slice(0,n),a.state.selectedItems.slice(n+1))),a.setState({selectedItems:s})}},a.openSpeedDial=function(){a.setState({speedDialOpen:!0})},a.closeSpeedDial=function(){a.setState({speedDialOpen:!1})},a.exitChangePlan=function(){a.props.updateChangePlan(!1,null,null,""),a.fetchAllAssets()},a.switchAssetType=function(e){a.setState({assetType:e},(function(){return a.filter.current.search()}))},a.state={allAssets:[],tableItems:[],selectedItems:[],allSelected:!1,decAssets:[],offlineAssets:[],detailStatusOpen:!1,detailStatusSeverity:"",detailStatusMessage:"",deleteAssetRack:"",deleteAssetrack_position:"",showDetailedView:!1,detailViewLoading:!1,detailAsset:-1,detailHostname:"",originalRack:"",originalrack_position:"",order:"asc",orderBy:"datacenter",showStatus:!1,statusSeverity:"",statusMessage:"",speedDialOpen:!1,assetType:"active",rowOwner:""},a.filter=s.a.createRef(),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.fetchAllAssets()}},{key:"render",value:function(){var e,t,a=this,n=this.props.classes,r=!0;return this.state.tableItems.map((function(e){r=r&&-1!==a.state.selectedItems.indexOf(e.asset_number)})),s.a.createElement(s.a.Fragment,null,s.a.createElement(f.a,{container:!0,spacing:3},s.a.createElement(f.a,{item:!0,xs:12},this.props.changePlanActive?s.a.createElement(G.a,{severity:"info"},s.a.createElement(Lt.a,null,"Change Plan Mode"),s.a.createElement(E.a,null,"Current plan: ",this.props.changePlanName),"You are currently in change plan mode! Changes made are being logged in the plan and not actually made in the system."):null),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},this.props.privilege.admin||this.props.privilege.asset||this.props.privilege.datacenters.length>0?s.a.createElement(Ka,{showStatus:this.showStatusBar,getAssetList:this.getAssetList,privilege:this.props.privilege,changePlanActive:this.props.changePlanActive,changePlanID:this.props.changePlanID,changePlanStep:this.props.changePlanStep,incrementChangePlanStep:this.props.incrementChangePlanStep,fetchAllAssets:this.fetchAllAssets,height:"300px"}):null),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:6},s.a.createElement(Ia,{updateItems:this.updateItems,getAssetList:this.getAssetList,allAssets:this.state.allAssets,decAssets:this.state.decAssets,offlineAssets:this.state.offlineAssets,switchAssetType:this.switchAssetType,assetType:this.state.assetType,ref:this.filter,height:"300px"})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(Ya,{items:this.state.tableItems,changePlanActive:this.props.changePlanActive,updateChangePlan:this.props.updateChangePlan,privilege:this.props.privilege,username:this.props.username,height:"300px"}))),s.a.createElement(f.a,{item:!0,xs:12,style:{marginTop:"20px"}},s.a.createElement(ee.a,null,this.state.selectedItems.length>0?s.a.createElement(E.a,{className:n.title,color:"inherit",variant:"subtitle1"},this.state.selectedItems.length," ",1===this.state.selectedItems.length?"label":"labels"," ready to be generated"):s.a.createElement(E.a,{className:n.title,color:"inherit",variant:"subtitle1"},"Click asset rows to prepare them for label generation"),s.a.createElement(Nt.a,{title:"Generate Labels"},s.a.createElement(y.a,{variant:"contained",color:"primary",startIcon:s.a.createElement(Kt.a,null),onClick:function(){return a.generateLabels()},disabled:this.state.selectedItems.length<1},"Generate Labels"))),s.a.createElement(je.a,{component:ce.a},s.a.createElement(Le.a,{className:n.table,"aria-label":"customized table",style:{backgroundColor:this.props.changePlanActive?"#64b5f6":""}},s.a.createElement(Te.a,null,s.a.createElement(Ue.a,{className:n.styledTableRow},this.state.assetType===Xa?null:s.a.createElement(Ve.a,{padding:"checkbox"},s.a.createElement(Nt.a,{title:"Select All"},s.a.createElement(B.a,{"aria-label":"select-all",onClick:function(){return a.onSelectAllClick()}},s.a.createElement(Rt.a,null))),s.a.createElement(Nt.a,{title:"Deselect All"},s.a.createElement(B.a,{"aria-label":"deselect-all",onClick:function(){return a.deselectAllClick()}},s.a.createElement(Ft.a,null)))),en.map((function(e){return s.a.createElement(Ve.a,{className:n.tableCellHead,key:e.id,align:e.align,sortDirection:a.state.orderBy===e.id&&a.state.order},s.a.createElement(It.a,{active:a.state.orderBy===e.id,direction:a.state.orderBy===e.id?a.state.order:"asc",onClick:function(t){a.createSortHandler(t,e.id)}},s.a.createElement("span",{style:{fontWeight:"bold"}},e.label),a.state.orderBy===e.id?s.a.createElement("span",{className:n.visuallyHidden},"desc"===a.state.order?"sorted descending":"sorted ascending"):null))})),this.state.assetType===Xa?tn.map((function(e){return s.a.createElement(Ve.a,{className:n.tableCellHead,key:e.id,align:e.align,sortDirection:a.state.orderBy===e.id&&a.state.order},s.a.createElement(It.a,{active:a.state.orderBy===e.id,direction:a.state.orderBy===e.id?a.state.order:"asc",onClick:function(t){a.createSortHandler(t,e.id)}},s.a.createElement("span",{style:{fontWeight:"bold"}},e.label),a.state.orderBy===e.id?s.a.createElement("span",{className:n.visuallyHidden},"desc"===a.state.order?"sorted descending":"sorted ascending"):null))})):null,s.a.createElement(Ve.a,{align:"left",className:n.tableCellHead},""))),s.a.createElement(Re.a,null,function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(this.state.tableItems,(e=this.state.order,t=this.state.orderBy,"desc"===e?function(e,a){return ja(e,a,t)}:function(e,a){return-ja(e,a,t)})).map((function(e,t){var n="enhanced-table-checkbox-".concat(t);return s.a.createElement(Ue.a,Object(h.a)({hover:!0,onClick:function(t){return a.addCheckedItem(t,e.asset_number)},role:"checkbox","aria-checked":-1!==a.state.selectedItems.indexOf(e.asset_number),selected:-1!==a.state.selectedItems.indexOf(e.asset_number),tabIndex:-1,key:e.assetNum},"role","checkbox"),a.state.assetType===Xa?null:s.a.createElement(Ve.a,{padding:"checkbox"},s.a.createElement(jt.a,{checked:-1!==a.state.selectedItems.indexOf(e.asset_number),inputProps:{"aria-labelledby":n}})),s.a.createElement(Ve.a,{align:"left"},e.hostname),s.a.createElement(Ve.a,{component:"th",id:n,scope:"row"},e.datacenter_name),s.a.createElement(Ve.a,{align:"left"},e.model),s.a.createElement(Ve.a,{align:"left"},"offline"===a.state.assetType?"N/A":e.rack),s.a.createElement(Ve.a,{align:"left"},e.owner),s.a.createElement(Ve.a,{align:"right"},e.asset_number),a.state.assetType===Xa?s.a.createElement(Ve.a,{align:"right"},e.decommission_user):null,a.state.assetType===Xa?s.a.createElement(Ve.a,{align:"right"},e.timestamp):null,s.a.createElement(Ve.a,{align:"center"},s.a.createElement(y.a,{color:"primary",variant:"contained",onClick:function(t){a.openDetailedView(t,e)}},"More Details")))})))))),this.state.showDetailedView?s.a.createElement(Aa,{open:this.state.showDetailedView,close:this.closeDetailedView,asset:this.state.detailAsset,search:this.getAssetList,privilege:this.props.privilege,changePlanActive:this.props.changePlanActive,changePlanID:this.props.changePlanID,changePlanStep:this.props.changePlanStep,incrementChangePlanStep:this.props.incrementChangePlanStep,disabled:!(this.props.privilege.admin||this.props.privilege.asset||this.props.privilege.datacenters.includes(this.state.detailAsset.datacenter_name))||this.state.assetType===Xa,username:this.props.username,fetchAllAssets:this.fetchAllAssets,changePlanName:this.props.changePlanName,showDecommissioned:this.state.assetType===Xa,showStatus:this.showStatusBar,isOffline:"offline"===this.state.assetType}):null,s.a.createElement(Tt.a,{ariaLabel:"SpeedDial openIcon example",style:{position:"fixed",bottom:"30px",right:"30px"},hidden:!this.props.changePlanActive,icon:s.a.createElement(qt.a,null),onClose:this.closeSpeedDial,onOpen:this.openSpeedDial,open:this.state.speedDialOpen},s.a.createElement(Ut.a,{key:"exit",icon:s.a.createElement(Wt.a,null),tooltipTitle:"Exit Change Plan",onClick:this.exitChangePlan})),s.a.createElement(q,{open:this.state.showStatus,severity:this.state.statusSeverity,closeStatus:this.closeShowStatus,message:this.state.statusMessage}))}}]),t}(s.a.Component),nn=Object(ie.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},styledTableRow:{},tableCellHead:{},styledTableCell:{fontSize:14},table:{minWidth:700},paper:{width:"100%",marginBottom:e.spacing(2)},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},title:{flex:"1 1 100%"}}}))(an),sn=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={hasError:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){return this.state.hasError?s.a.createElement("h1",null,"Something went wrong."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return"An unforseen error occurred. Please refresh the page and try again later."}}]),t}(s.a.Component),rn=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={statusSeverity:"",statusMessage:"",showStatus:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(sn,null,s.a.createElement(f.a,{container:!0,spacing:5,direction:"row",justify:"flex-start",alignItems:"center",style:{margin:"0px",maxWidth:"95vw"}},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{variant:"h4"},"Assets")),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(nn,{privilege:this.props.privilege,username:this.props.username,changePlanActive:this.props.changePlanActive,updateChangePlan:this.props.updateChangePlan,changePlanID:this.props.changePlanID,changePlanStep:this.props.changePlanStep,incrementChangePlanStep:this.props.incrementChangePlanStep,changePlanName:this.props.changePlanName})))))}}]),t}(s.a.Component);!function(e){e.GET_ALL_DATACENTERS="all/",e.CREATE="create/",e.EDIT="edit/",e.DELETE="delete/"}($a||($a={}));var on="offlineStorage",ln="datacenter",cn=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).generateCreateJSON=function(){return{abbreviation:a.state.datacenterAbbreviation,datacenter_name:a.state.datacenterName,is_offline_storage:a.state.siteType===on}},a.createDatacenter=function(){p.a.post(U(O,$a.CREATE),a.generateCreateJSON()).then((function(e){console.log(e),"success"===e.data.message?a.setState({showCreate:!1,datacenterName:"",datacenterAbbreviation:""},(function(){return a.props.search()})):a.setState({showStatus:!0,statusSeverity:"error",statusMessage:e.data.message})}))},a.updateDatacenterName=function(e){a.setState({datacenterName:e.target.value})},a.updateDatacenterAbbrevation=function(e){a.setState({datacenterAbbreviation:a.getAbbreviation(e.target.value)})},a.getAbbreviation=function(e){return e.length>6?e.substring(0,7):e},a.showCreate=function(){a.setState({showCreate:!0})},a.closeCreate=function(){a.setState({showCreate:!1,datacenterName:"",datacenterAbbreviation:""})},a.closeStatus=function(){a.setState({showStatus:!1,statusSeverity:"",statusMessage:""})},a.selectSiteType=function(e){a.setState({siteType:e.target.value})},a.state={showCreate:!1,datacenterName:"",datacenterAbbreviation:"",showStatus:!1,statusSeverity:"",statusMessage:"",siteType:ln},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return s.a.createElement(s.a.Fragment,null,s.a.createElement(f.a,{item:!0,xs:3},this.props.datacenterList.length>0?s.a.createElement(_e.a,{id:"datacenter-select-label"},"Select Site"):null,this.props.datacenterList.length>0?s.a.createElement(ke.a,{name:"datacenter_name",id:"datacenter-select",value:this.props.dc,onChange:this.props.selectDatacenter,style:{width:"100%"}},this.props.datacenterList.map((function(e){return s.a.createElement(ne.a,{value:e},e.name)}))):null),this.props.disabled?null:s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(y.a,{variant:"contained",color:"primary",onClick:function(){e.showCreate()}},"Create New Site")),s.a.createElement(be.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:this.state.showCreate,onClose:this.closeCreate,closeAfterTransition:!0,BackdropComponent:Ee.a,scroll:"body",BackdropProps:{timeout:500}},s.a.createElement(ve.a,{in:this.state.showCreate},s.a.createElement("div",{className:t.paper},s.a.createElement(f.a,{container:!0,spacing:3},s.a.createElement(f.a,{item:!0,xs:2},s.a.createElement(E.a,null,"Site Name:")),s.a.createElement(f.a,{item:!0,xs:9},s.a.createElement(w.a,{id:"input-rack",variant:"outlined",label:"datacenter-name",name:"datacenter-name",onChange:this.updateDatacenterName,required:!0,fullWidth:!0})),s.a.createElement(f.a,{item:!0,xs:2},s.a.createElement(E.a,null,"Site Abbreviation:")),s.a.createElement(f.a,{item:!0,xs:9},s.a.createElement(Nt.a,{placement:"top",title:"Max 6 characters"},s.a.createElement(w.a,{id:"input-rack",variant:"outlined",label:"datacenter-abbreviation",name:"datacenter-abbreviation",onChange:this.updateDatacenterAbbrevation,value:this.state.datacenterAbbreviation,required:!0,fullWidth:!0}))),s.a.createElement(f.a,{item:!0,xs:9},s.a.createElement(ua.a,{component:"fieldset"},s.a.createElement(ma.a,{column:!0,"aria-label":"position",name:"position",defaultValue:"start",value:this.state.siteType,onChange:function(t){return e.selectSiteType(t)}},s.a.createElement(da.a,{control:s.a.createElement(pa.a,{color:"primary"}),label:"Datacenter",value:ln}),s.a.createElement(da.a,{control:s.a.createElement(pa.a,{color:"primary"}),label:"Offline Storage",value:on})))),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(y.a,{variant:"contained",color:"primary",type:"submit",disabled:!(this.state.datacenterAbbreviation&&this.state.datacenterName),onClick:function(){e.createDatacenter()}},"Create Site")),s.a.createElement(f.a,{item:!0,xs:12},this.state.showStatus?s.a.createElement(G.a,{severity:"error",onClose:function(){e.closeStatus()}},this.state.statusMessage):null))))))}}]),t}(s.a.Component),un=Object(ie.a)((function(e){return{root:{width:"100%"},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}))(cn),mn=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).generateEditJSON=function(){return console.log("generating edit"),console.log(a.props.dcName),{nameOriginal:a.props.dcName,abbreviation:a.state.datacenterAbbreviation||a.props.dcAbbrev,datacenter_name:a.state.datacenterName||a.props.dcName,is_offline_storage:a.props.is_offline_storage}},a.editDatacenter=function(){console.log("sending"),console.log(a.state.datacenterName),p.a.post(U(O,$a.EDIT),a.generateEditJSON()).then((function(e){console.log(e),e.status===T?a.setState({datacenterName:"",datacenterAbbreviation:""},(function(){a.props.search(),a.props.close()})):a.setState({})}))},a.updateDatacenterName=function(e){a.setState({datacenterName:e.target.value})},a.updateDatacenterAbbrevation=function(e){a.setState({datacenterAbbreviation:a.getAbbreviation(e.target.value)})},a.getAbbreviation=function(e){return e.length>6?e.substring(0,7):e},a.state={datacenterName:e.dcName,datacenterAbbreviation:e.dcAbbrev},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return s.a.createElement(s.a.Fragment,null,s.a.createElement(be.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:this.props.show,onClose:this.props.close,closeAfterTransition:!0,BackdropComponent:Ee.a,scroll:"body",BackdropProps:{timeout:500}},s.a.createElement(ve.a,{in:this.props.show},s.a.createElement("div",{className:t.paper},s.a.createElement(f.a,{container:!0,spacing:3},s.a.createElement(f.a,{item:!0,xs:2},s.a.createElement(E.a,null,"Datcenter Name:")),s.a.createElement(f.a,{item:!0,xs:9},s.a.createElement(w.a,{id:"input-rack",variant:"outlined",label:"datacenter-name",name:"datacenter-name",onChange:this.updateDatacenterName,value:this.state.datacenterName||this.props.dcName,required:!0,fullWidth:!0})),s.a.createElement(f.a,{item:!0,xs:2},s.a.createElement(E.a,null,"Datcenter Abbreviation:")),s.a.createElement(f.a,{item:!0,xs:9},s.a.createElement(Nt.a,{placement:"top",title:"Max 6 characters"},s.a.createElement(w.a,{id:"input-rack",variant:"outlined",label:"datacenter-abbreviation",name:"datacenter-abbreviation",onChange:this.updateDatacenterAbbrevation,value:this.state.datacenterAbbreviation||this.props.dcAbbrev,required:!0,fullWidth:!0}))),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(y.a,{variant:"contained",color:"primary",type:"submit",onClick:function(){e.editDatacenter()}},"Save Edits")),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(y.a,{variant:"contained",color:"primary",onClick:this.props.close},"Cancel")))))))}}]),t}(s.a.Component),dn=Object(ie.a)((function(e){return{root:{width:"100%"},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}))(mn),pn=a(75),hn=a(528),gn=a(14),fn=a(591),bn=a(592),vn=(a(511),a(166));function En(e){return s.a.createElement(pn.a,Object.assign({fontSize:"inherit"},e),s.a.createElement("path",{d:"M22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0zM17.873 11.023h-11.826q-.375 0-.669.281t-.294.682v0q0 .401.294 .682t.669.281h11.826q.375 0 .669-.281t.294-.682v0q0-.401-.294-.682t-.669-.281z"}))}function wn(e){return s.a.createElement(pn.a,Object.assign({fontSize:"inherit"},e),s.a.createElement("path",{d:"M22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0zM17.873 12.977h-4.923v4.896q0 .401-.281.682t-.682.281v0q-.375 0-.669-.281t-.294-.682v-4.896h-4.923q-.401 0-.682-.294t-.281-.669v0q0-.401.281-.682t.682-.281h4.923v-4.896q0-.401.294-.682t.669-.281v0q.401 0 .682.281t.281.682v4.896h4.923q.401 0 .682.281t.281.682v0q0 .375-.281.669t-.682.294z"}))}function yn(e){var t=Object(vn.useSpring)({from:{opacity:0,transform:"translate3d(20px,0,0)"},to:{opacity:e.in?1:0,transform:"translate3d(".concat(e.in?0:20,"px,0,0)")}});return s.a.createElement(vn.animated.div,{style:t},s.a.createElement(hn.a,e))}var Sn,Cn=Object(ie.a)((function(e){return{iconContainer:{"& .close":{opacity:.3}},group:{marginLeft:12,paddingLeft:12,borderLeft:"1px dashed ".concat(Object(gn.c)(e.palette.text.primary,.4))}}}))((function(e){return s.a.createElement(fn.a,Object.assign({},e,{TransitionComponent:yn}))})),_n=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleFormat=function(e,t){t.length&&a.setState({formats:t})},a.closeShowStatus=function(){a.setState({showStatus:!1})},a.closeConfirmationBox=function(){a.setState({showConfirmationBox:!1})},a.sortRacks=function(e,t){return parseInt(e.substr(1))>parseInt(t.substr(1))},a.deleteRack=function(e){console.log(e)},a.state={items:[],firstRack:"A1",secondRack:"A1",showStatus:!1,statusMessage:"",statusSeverity:"info",showConfirmationBox:!1,racksList:[],racks:{}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return s.a.createElement(sn,null,s.a.createElement(f.a,{container:!0,spacing:5,direction:"row",justify:"center",alignItems:"center",f:!0,style:{margin:"0px",maxWidth:"95vw"}},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{variant:"h5"},"Racks")),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(bn.a,{className:t.root,defaultExpanded:["1"],defaultCollapseIcon:s.a.createElement(En,null),defaultExpandIcon:s.a.createElement(wn,null)},Object.keys(this.props.racks).sort().map((function(t){return s.a.createElement(Cn,{nodeId:t,label:t},e.props.racks[t].sort(e.sortRacks).map((function(e){return s.a.createElement(Cn,{nodeId:e,label:e})})))}))))))}}]),t}(s.a.Component),kn=(Object(ie.a)((function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}))(_n),a(609)),Pn=a(593);function xn(e){var t=s.a.useState("single"),a=Object(ea.a)(t,2),n=a[0],r=a[1],i=s.a.useState("A1"),o=Object(ea.a)(i,2),l=o[0],c=o[1],u=s.a.useState("A1"),m=Object(ea.a)(u,2),d=m[0],p=m[1];try{return 0==e.datacentersList.length?s.a.createElement(E.a,null,"There are currently no datacenters being managed."):s.a.createElement("div",null,s.a.createElement(f.a,{container:!0,spacing:3},s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(ce.a,{elevation:3},e.privilege.admin||e.privilege.asset?s.a.createElement(f.a,{container:!0,spacing:2,direction:"row",justify:"flex-start",alignItems:"center",style:{padding:"10px"}},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{variant:"h6"},"Manage")),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(y.a,{variant:"contained",color:"primary",style:{width:"100%"},onClick:function(t){e.editDatacenter(t,e.dc.name,e.dc.abbreviation)}},"Edit")),s.a.createElement(f.a,{container:!0,item:!0,direciton:"row",justify:"center",alignItems:"center",xs:12},s.a.createElement("hr",{style:{width:"5vw"}}),s.a.createElement(E.a,{color:"textSecondary"},"Or"),s.a.createElement("hr",{style:{width:"5vw"}})),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(y.a,{variant:"contained",color:"secondary",style:{width:"100%"},onClick:function(t){e.openConfirmationBox(t,e.selectedDatacenter)}},"Delete"))):null)),e.isOfflineStorage?null:s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(ce.a,{elevation:3},s.a.createElement(f.a,{container:!0,spacing:2,direction:"row",justify:"flex-start",alignItems:"center",style:{padding:"10px"}},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{variant:"h6"},"Racks")),s.a.createElement(f.a,{container:!0,item:!0,direction:"row",justify:"center",xs:12},s.a.createElement(kn.a,{value:n,exclusive:!0,onChange:function(e,t){r(t)},"aria-label":"rack type"},s.a.createElement(Pn.a,{value:"single","aria-label":"single-rack"},"Single"),s.a.createElement(Pn.a,{value:"range","aria-label":"range-rack"},"Range"))),"single"===n?s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(w.a,{id:"standard-basic",variant:"outlined",label:"Rack",name:"rack1",onChange:function(e){c(e.target.value),p(e.target.value)}})):s.a.createElement(f.a,{container:!0,item:!0,spacing:3,direciton:"row",justify:"center"},s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(w.a,{id:"standard-basic",variant:"outlined",label:"Start Rack (e.g. A1)",name:"rack1",onChange:function(e){c(e.target.value)}})),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(w.a,{id:"standard-basic",variant:"outlined",label:"End Rack (e.g. B10)",name:"rack2",onChange:function(e){p(e.target.value)}}))),e.privilege.admin||e.privilege.asset||e.privilege.datacenters.includes(e.selectedDatacenter)?s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(y.a,{variant:"contained",style:{width:"100%",backgroundColor:"green",color:"white"},onClick:function(){e.updateRacks(Sn.CREATE_RACKS,l,d)}},"Create")):null,e.privilege.admin||e.privilege.asset||e.privilege.datacenters.includes(e.selectedDatacenter)?s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(y.a,{variant:"contained",color:"secondary",style:{width:"100%"},onClick:function(){e.updateRacks(Sn.DELETE_RACKS,l,d)}},"Delete")):null)))))}catch(h){return console.log(h),s.a.createElement(E.a,null,"Could not load any datacenters at this time")}}!function(e){e.GET_ALL_RACKS="all",e.CREATE_RACKS="create",e.DELETE_RACKS="delete",e.GET_RACK_DETAILS="details"}(Sn||(Sn={}));var On=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return s.a.createElement(be.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:this.props.showConfirmationBox,onClose:this.props.closeConfirmationBox,closeAfterTransition:!0,BackdropComponent:Ee.a,BackdropProps:{timeout:500}},s.a.createElement(ve.a,{in:this.props.showConfirmationBox},s.a.createElement("div",{className:t.paper},s.a.createElement(f.a,{container:!0,spacing:5},s.a.createElement(f.a,{item:!0,xs:12},"Are you sure you wish to delete?"),s.a.createElement(f.a,{item:!0,xs:2},s.a.createElement(y.a,{variant:"contained",color:"primary",onClick:this.props.deleteDatacenter},"Yes")),s.a.createElement(f.a,{item:!0,xs:1},s.a.createElement(y.a,{variant:"contained",color:"primary",onClick:function(){return e.props.closeConfirmationBox()}},"No"))))))}}]),t}(s.a.Component),Mn=Object(ie.a)((function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},progress:{display:"flex","& > * + *":{marginLeft:e.spacing(2)},justify:"center",alignItems:"center"},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}))(On),Dn=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).openAssetDetails=function(e){e>1e4&&p.a.post(U(_,"detailView/"),{asset_number:e}).then((function(e){a.setState({detailAsset:e.data.instances[0],showDetailedView:!0})}))},a.closeDetailedView=function(){a.setState({showDetailedView:!1})},a.getAssetList=function(){},a.showStatusBar=function(e,t,n){a.setState({showStatus:e,statusSeverity:t,statusMessage:n})},a.state={showDetailedView:!1,detailAsset:null},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return s.a.createElement("div",{className:t.root},this.props.racks.length>0?this.props.racks.map((function(a,n){return s.a.createElement("span",{className:t.rack},s.a.createElement(E.a,{className:t.title},a.rackTitle),a.racks.map((function(a){return s.a.createElement("div",{onClick:function(){return e.openAssetDetails(a.assetNum)}},s.a.createElement(E.a,{className:t.index},a.index+" "),""!==a.title?s.a.createElement(E.a,{style:{background:a.color,display:"inline-block",width:"70%",color:a.textColor,paddingLeft:"3%"}},a.title):s.a.createElement(E.a,{style:{background:a.color,display:"inline-block",width:"70%",color:a.color}},"."),s.a.createElement(E.a,{className:t.index}," "+a.index))})),s.a.createElement(E.a,{className:t.footer},"."))})):null,this.state.showDetailedView?s.a.createElement(Aa,{close:this.closeDetailedView,showStatus:this.showStatusBar,search:this.props.getRacks,fetchAllAssets:this.props.getRacks,open:this.state.showDetailedView,privilege:this.props.privilege,username:this.props.username,asset:this.state.detailAsset,disabled:!(this.props.privilege.admin||this.props.privilege.asset||this.props.privilege.datacenters.includes(this.state.detailAsset.datacenter_name))||"decommissioned"===this.state.assetType,changePlanActive:!1,changePlanID:"",changePlanStep:-1,incrementChangePlanStep:null,changePlanName:"",showDecommissioned:!1}):null)}}]),t}(n.Component),An=Object(ie.a)((function(e){return{root:{align:"center"},index:{backgroundColor:"#000000",color:"#FFFFFF",width:"15%",display:"inline-block",paddingLeft:"5%"},asset:{width:"70%",display:"inline-block"},title:{backgroundColor:"#A9A9A9",width:"100%",align:"center",paddingLeft:"45%"},footer:{backgroundColor:"#A9A9A9",color:"#A9A9A9",width:"100%",align:"center",paddingLeft:"45%"},rack:{display:"inline-block",width:"20%",margin:"2%"}}}))(Dn),Nn="racks/";function In(e,t,a,n,s){return{color:e,title:t,index:a,assetNum:n,textColor:s}}function jn(e,t){return e.rackTitle>t.rackTitle?1:e.rackTitle<t.rackTitle?-1:0}function Ln(e,t){return e.index>t.index?-1:e.index<t.index?1:0}function Tn(e,t){return e.rack_position>t.rack_position?1:e.rack_position<t.rack_position?-1:0}var Un,Vn=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).getDatacenters=function(){a.setState({loadingDCList:!0}),p.a.get(U(O,$a.GET_ALL_DATACENTERS)).then((function(e){console.log(e.data.datacenters);var t=e.data.datacenters[0];console.log(t);var n=void 0===t?"":t.name,s=void 0===t?"":t.abbreviation;console.log(n),a.setState({datacentersList:e.data.datacenters,loadingDCList:!1,selectedDatacenter:n,fullDatacenter:t,abbreviation:s},(function(){return a.getRacks()}))}))},a.deleteDatacenter=function(){console.log(a.state.currentDatacenter),p.a.post(U(O,$a.DELETE),{datacenter_name:a.state.currentDatacenter}).then((function(e){console.log("Deleteting"),console.log(e),"success"===e.data.message?(a.setState({showConfirmationBox:!1,showStatus:!0,statusMessage:"Successfully deleted site",statusSeverity:"success"}),a.getDatacenters()):a.setState({showConfirmationBox:!1,showStatus:!0,statusMessage:e.data.message,statusSeverity:"error"})}))},a.openConfirmationBox=function(e,t){a.setState({showConfirmationBox:!0,currentDatacenter:t})},a.closeConfirmationBox=function(){a.setState({showConfirmationBox:!1})},a.openEditDatacenter=function(e,t,n){a.setState({editDCName:t,editDCAbbr:n},(function(){return a.setState({showEditDC:!0})}))},a.closeEditDatacenter=function(){a.setState({showEditDC:!1,editDCName:"",editDCAbbr:"",showStatus:!1,statusMessage:"",statusSeverity:"info",isOfflineStorage:!1,selectedDatacenter:"",fullDatacenter:"",racks:[]})},a.closeShowStatus=function(){a.setState({showStatus:!1})},a.updateRacks=function(e,t,n){p.a.post(U(Nn,e),{start_letter:t[0],stop_letter:n[0],start_number:t.substring(1),stop_number:n.substring(1),datacenter_name:a.state.selectedDatacenter}).then((function(t){if("success"===t.data.message){if(a.setState({showStatus:!0,statusMessage:"Success",statusSeverity:"success",showConfirmationBox:!1},(function(){return a.getRacks()})),e===Sn.GET_RACK_DETAILS){var n=window.open(t.data.link,"_blank");null!=n&&n.focus()}}else a.setState({showStatus:!0,statusMessage:t.data.message,statusSeverity:"error"})}))},a.updateDatacenter=function(e){console.log(e.target.value),a.setState({is_offline_storage:e.target.value.is_offline_storage,selectedDatacenter:e.target.value.name,abbreviation:e.target.value.abbreviation,fullDatacenter:e.target.value,isOfflineStorage:e.target.value.is_offline_storage},(function(){return a.getRacks()}))},a.getChassisData=function(e,t){p.a.post(U(_,"getbladesbychassis/"),{blade_chassis:""}).then((function(e){e.data.instances}))},a.createDiagram=function(e,t,n,s){p.a.post(U(x,"details/"),{start_letter:e,stop_letter:t,start_number:n,stop_number:s,datacenter_name:a.state.selectedDatacenter}).then((function(t){var s=t.data.racks[0][e+n];s.sort(Tn);for(var r=[],i=0,o=1;o<=42;o++)if(s.length>0&&i<s.length){var l=s[i];if(l.rack_position===o){for(var c=0;c<l.height;c++){var u=l.model+",  ";u+=""===l.hostname?"#"+l.asset_number:l.hostname,l.mount_type,u=c===Math.floor(l.height/2)?u:"";try{var m=parseInt("0x"+l.display_color.substring(1,3))+parseInt("0x"+l.display_color.substring(3,5))+parseInt("0x"+l.display_color.substring(5))<300?"#FFFFFF":"#000000"}catch(p){m="#000000"}r.push(In(l.display_color,u,o+c,l.asset_number,m))}o+=l.height-1,i++}else r.push(In("#FFFFFF","",o))}else r.push(In("#FFFFFF","",o));var d=e+(n>9?n:" "+n);r.sort(Ln),a.state.racks.push(function(e,t){return{rackTitle:e,racks:t}}(d,r)),a.state.racks.sort(jn),a.forceUpdate()}))},a.getRacks=function(){a.state.racks=[],a.forceUpdate(),p.a.post(U(x,"all/"),{datacenter_name:a.state.selectedDatacenter}).then((function(e){var t=[];e.data.racks.map((function(e){t.push(e.label)})),t.map((function(e){var t=e.substring(0,1),n=parseInt(e.substring(1));a.createDiagram(t,t,n,n)}))}))},a.state={datacentersList:[],loadingDCList:!0,showConfirmationBox:!1,currentDatacenter:"",showEditDC:!1,editDCName:"",editDCAbbr:"",selectedDatacenter:"",abbreviation:"",fullDatacenter:{},racks:{},is_offline_storage:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getDatacenters()}},{key:"render",value:function(){var e,t=this.props.classes;return s.a.createElement(s.a.Fragment,null,s.a.createElement(sn,null,s.a.createElement(f.a,{container:!0,spacing:5,direction:"row",justify:"center",alignItems:"center",style:{margin:"0px",maxWidth:"95vw"}},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{variant:"h4"},"Sites")),s.a.createElement(un,{disabled:!(this.props.privilege.admin||this.props.privilege.asset),search:this.getDatacenters,selectedDatacenter:this.state.selectedDatacenter,dc:this.state.fullDatacenter,selectDatacenter:this.updateDatacenter,datacenterList:this.state.datacentersList}),this.state.loadingDCList?s.a.createElement("div",{className:t.progress},s.a.createElement(Fe.a,null)):s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(xn,(e={classes:t,datacentersList:this.state.datacentersList,privilege:this.props.privilege,openConfirmationBox:this.openConfirmationBox,editDatacenter:this.openEditDatacenter,selectedDatacenter:this.state.selectedDatacenter,updateRacks:this.updateRacks},Object(h.a)(e,"privilege",this.props.privilege),Object(h.a)(e,"dc",this.state.fullDatacenter),Object(h.a)(e,"isOfflineStorage",this.state.isOfflineStorage),e))),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(dn,{show:this.state.showEditDC,close:this.closeEditDatacenter,dcName:this.state.editDCName,dcAbbrev:this.state.editDCAbbr,search:this.getDatacenters,is_offline_storage:this.state.is_offline_storage})),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(Mn,{showConfirmationBox:this.state.showConfirmationBox,closeConfirmationBox:this.closeConfirmationBox,deleteDatacenter:this.deleteDatacenter,close:this.closeEditDatacneter}))),s.a.createElement(ce.a,{elevation:1},s.a.createElement(E.a,{variant:"h5",style:{padding:"1%"}},"Datacenter Name: ",this.state.selectedDatacenter),s.a.createElement(E.a,{variant:"h5",style:{padding:"1%"}},"Datacenter Abbreviation: ",this.state.abbreviation)),this.state.isOfflineStorage?null:s.a.createElement(An,{privilege:this.props.privilege,username:this.props.username,getRacks:this.getRacks,racks:this.state.racks}),s.a.createElement(q,{open:this.state.showStatus,severity:this.state.statusSeverity,closeStatus:this.closeShowStatus,message:this.state.statusMessage})))}}]),t}(s.a.Component),Rn=Object(ie.a)((function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},progress:{display:"flex","& > * + *":{marginLeft:e.spacing(2)},justify:"center",alignItems:"center"},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}))(Vn),Bn=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){this.props.classes;return s.a.createElement(s.a.Fragment,null,s.a.createElement(sn,null,s.a.createElement(Rn,{privilege:this.props.privilege,username:this.props.uesername})))}}]),t}(s.a.Component),Fn=Object(ie.a)((function(e){return{}}))(Bn),Hn=a(64),Wn=a.n(Hn);function Gn(e){var t={};try{t=JSON.parse(e)}catch(n){t=e}if(0===Object.entries(t).length&&t.constructor===Object)return[];var a=[];return Object.keys(t).map((function(e){var n=[];return n.push(e),n.push(t[e]),a.push(n),e})),a}!function(e){e.GENERATE_REPORT="generate-report",e.TEST="test"}(Un||(Un={}));var qn,zn=a(607),Kn=a(594),Jn=a(595),Yn="stats/",Xn={totalUsage:"Total Usage",spaceUsage:"Space Usage",vendorUsage:"Vendor Usage",modelUsage:"Model Usage",ownerUsage:"Owner Usage"},Qn={totalUsage:["Total","Usage"],spaceUsage:["Rack","Usage"],vendorUsage:["Vendor","Usage"],modelUsage:["Model","Usage"],ownerUsage:["Ownder","Usage"]},Zn=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).getDatacenters=function(){p.a.get(U(O,$a.GET_ALL_DATACENTERS)).then((function(e){console.log(e),a.setState({datacenterList:e.data.datacenters,loadingDatacenters:!1})}))},a.generateReport=function(e){var t=e.target.value;a.setState({selectedDatacenter:t,generatingReport:!0}),p.a.post(U(Yn,Un.GENERATE_REPORT),{datacenter_name:"All Datacenters"===t.name?"":t.name}).then((function(e){try{var t=e.data,n=[],s=["Total Usage"];s.push(t.totalUsage),n.push(s);var r=Gn(t.spaceUsage);0===r.length&&r.push(["No space is currently being used",[]]);var i=Gn(t.vendorUsage);0===i.length&&i.push(["No vendors currently using space",[]]);var o=Gn(t.modelUsage);0===o.length&&o.push(["No models currently using space",[]]);var l=Gn(t.ownerUsage);0===l.length&&l.push(["No owners currently using space",[]]),a.setState({showStatus:!0,statusSeverity:"success",statusMessage:"Successfully generated Report",tableValues:{totalUsage:n,spaceUsage:r,vendorUsage:i,modelUsage:o,ownerUsage:l}})}catch(c){a.setState({showStatus:!0,statusMessage:"Failed to generate Report",statusSeverity:"error"})}a.setState({generatingReport:!1})}))},a.state={loadingDatacenters:!0,datacenterList:[],selectedDatacenter:"All Datacenters",tableValues:{totalUsage:[],spaceUsage:[],vendorUsage:[],modelUsage:[],ownerUsage:[]},totalUsage:[],spaceUsage:[],vendorUsage:[],modelUsage:[],ownerUsage:[],showStatus:!1,statusMessage:"",statusSeverity:""},a.closeShowStatus=a.closeShowStatus.bind(Object(g.a)(a)),p.a.defaults.headers.common.token=a.props.token,p.a.defaults.headers.common.privilege=a.props.privilege,a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getDatacenters();this.generateReport({target:{value:"All Datacenters"}})}},{key:"closeShowStatus",value:function(){this.setState({showStatus:!1})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(sn,null,s.a.createElement(q,{open:this.state.showStatus,severity:this.state.statusSeverity,closeStatus:this.closeShowStatus,message:this.state.statusMessage}),s.a.createElement(f.a,{container:!0,spacing:5,direction:"row",justify:"center",alignItems:"center",style:{margin:"0px",maxWidth:"95vw"}},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{variant:"h4"},"Reports")),s.a.createElement(f.a,{item:!0,xs:3},this.state.loadingDatacenters||this.state.generatingReport?s.a.createElement(Fe.a,null):s.a.createElement("span",null,s.a.createElement(_e.a,{id:"datacenter-select-label"},"Select Datacenter"),s.a.createElement(ke.a,{name:"datacenter_name",id:"datacenter-select",value:this.state.selectedDatacenter,onChange:function(t){return e.generateReport(t)},style:{width:"100%"}},s.a.createElement(ne.a,{value:"All Datacenters"},"All Datacenters"),this.state.datacenterList.map((function(e){if(!e.is_offline_storage)return s.a.createElement(ne.a,{value:e},e.name)})))))),s.a.createElement("div",null),Object.keys(Xn).map((function(t){return s.a.createElement(zn.a,null,s.a.createElement(Kn.a,{expandIcon:s.a.createElement(Wn.a,null)},s.a.createElement(E.a,null,Xn[t])),s.a.createElement(Jn.a,null,s.a.createElement(je.a,{component:ce.a},s.a.createElement(Le.a,null,s.a.createElement(Te.a,null,s.a.createElement(Ue.a,null,Qn[t].map((function(e){return s.a.createElement(Ve.a,null,s.a.createElement("span",{id:e},e))})))),s.a.createElement(Re.a,null,e.state.tableValues[t].map((function(e){return s.a.createElement(Ue.a,null,e.map((function(e){return s.a.createElement(Ve.a,null,s.a.createElement("span",{id:e},e+(isNaN(e)?"":"%")))})))})))))))}))))}}]),t}(s.a.Component);!function(e){e.TEST="test/",e.GET_LOGS="getlogs/"}(qn||(qn={}));var $n="type",es="timestamp",ts=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).getLogs=function(){p.a.get(U(M,qn.GET_LOGS)).then((function(e){a.parseLog(e.data.log),a.filter()}))},a.parseLog=function(e){var t=[];e.map((function(e,a){var n="";Object.entries(e).map((function(e){var t=Object(ea.a)(e,2),a=t[0],s=t[1];a!==$n&&a!==es&&(n+=s+"\n")})),t.push(function(e,t,a,n){return{index:e,timestamp:t,type:a,message:n}}(a,e[es],e[$n],n))})),a.setState({logItems:t,filteredLogs:t,allLogs:e})},a.filter=function(){var e=a.state.filterUser,t=a.state.filterAsset,n=[];a.state.allLogs.map((function(a){console.log(a);var s=!1,r=!1;try{a.message.match(/\[.+\]/)[0].includes(e)&&(r=!0)}catch(i){r=!1}try{if(""!==t)(""+a.request.asset_number).includes(t)&&(s=!0);else s=!0}catch(o){s=!1}s&&r&&n.push(a)})),n.sort((function(e,t){return e.timestamp>t.timestamp?-1:e.timestamp<t.timestamp?1:0})),a.setState({filteredLogs:n})},a.updateFilterUser=function(e){a.setState({filterUser:e.target.value},(function(){a.filter()}))},a.updateFilterAsset=function(e){a.setState({filterAsset:e.target.value},(function(){a.filter()}))},a.state={logItems:[],filteredLogs:[],allLogs:null,filterUser:"",filterAsset:""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getLogs()}},{key:"render",value:function(){var e=this.props.classes;return s.a.createElement(s.a.Fragment,null,s.a.createElement(sn,null,s.a.createElement(f.a,{container:!0,spacing:5,direction:"row",justify:"flex-start",alignItems:"center",style:{margin:"0px",maxWidth:"95vw"}},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{variant:"h4"},"Logs")),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(y.a,{variant:"contained",color:"primary",onClick:this.getLogs},"Refresh Logs")),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(w.a,{className:e.searchbar,name:"filter-users",placeholder:"Search users",fullWidth:!0,onChange:this.updateFilterUser})),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(w.a,{className:e.searchbar,name:"filter-assets",placeholder:"Search assets",fullWidth:!0,onChange:this.updateFilterAsset})),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(je.a,{component:ce.a},s.a.createElement(Le.a,{className:e.table,"aria-label":"simple table"},s.a.createElement(Te.a,null,s.a.createElement(Ue.a,null,s.a.createElement(Ve.a,{align:"left"},s.a.createElement("span",{id:"timestamp",style:{fontWeight:"bold"}},"Timestamp")),s.a.createElement(Ve.a,{align:"left"},s.a.createElement("span",{id:"type",style:{fontWeight:"bold"}},"type")),s.a.createElement(Ve.a,{align:"left"},s.a.createElement("span",{id:"message",style:{fontWeight:"bold"}},"Message")))),s.a.createElement(Re.a,null,this.state.filteredLogs.map((function(e){return s.a.createElement(Ue.a,{key:e.timestamp},s.a.createElement(Ve.a,{aligh:"left"},e.timestamp),s.a.createElement(Ve.a,{align:"left"},e.type),s.a.createElement(Ve.a,{align:"left"},e.message))})))))))))}}]),t}(s.a.Component),as=Object(ie.a)({table:{minWidth:650},searchbar:{minWidth:"200px",flexGrow:1}})(ts),ns=a(604),ss=a(255),rs=a.n(ss),is=a(254),os=a.n(is),ls=a(253),cs=a.n(ls),us=a(252),ms=a.n(us),ds="changeplans/",ps=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).fetchAllChangePlans=function(){p.a.post(U(ds,kt.CHANGE_PLAN_GET_PLANS),{owner:a.props.username}).then((function(e){var t=e.data.change_plans;null!==t&&(a.setState({changePlans:t}),t.forEach((function(e){p.a.post(U(ds,kt.CHANGE_PLAN_GET_ACTIONS),{change_plan_id:e.identifier,owner:a.props.username}).then((function(t){var n=a.state.changePlanDetails;n[e.identifier]=t.data.change_plan_actions,a.setState({changePlanDetails:n})}))})))}))},a.closeShowStatus=function(){a.setState({showStatus:!1})},a.startEditing=function(){a.closeDescriptionModal(),a.props.updateChangePlan(!0,a.state.editId,a.state.editStep,a.state.editName)},a.updatePlanName=function(e){a.setState({planName:e.target.value})},a.renameChangePlan=function(){a.closeRenameDialog(),p.a.post(U(ds,kt.CHANGE_PLAN_EDIT),{change_plan_id:a.state.planId,name:a.state.planName,owner:a.props.username}).then((function(e){a.setState({planId:null,planName:""}),a.fetchAllChangePlans(),"success"===e.data.message?a.setState({statusOpen:!0,statusMessage:"Success",statusSeverity:"success"}):a.setState({statusOpen:!0,statusMessage:e.data.message,statusSeverity:"error"})}))},a.openRenameDialog=function(e){a.setState({renameDialog:!0,planId:e})},a.closeRenameDialog=function(){a.setState({renameDialog:!1})},a.openExecuteDialog=function(e){a.setState({executeDialog:!0,executeId:e})},a.closeExecuteDialog=function(){a.setState({executeDialog:!1})},a.executeChangePlan=function(){a.closeExecuteDialog(),p.a.post(U(ds,kt.CHANGE_PLAN_EXECUTE),{change_plan_id:a.state.executeId,owner:a.props.username}).then((function(e){a.setState({executeId:null}),a.fetchAllChangePlans(),"success"===e.data.message?(a.props.updateChangePlan(!1,null,null,""),a.setState({statusOpen:!0,statusMessage:"Success",statusSeverity:"success"})):a.setState({statusOpen:!0,statusMessage:e.data.message,statusSeverity:"error"})}))},a.openDeleteDialog=function(e){a.setState({deleteDialog:!0,deleteId:e})},a.closeDeleteDialog=function(){a.setState({deleteDialog:!1})},a.deleteChangePlan=function(){a.closeDeleteDialog(),p.a.post(U(ds,kt.CHANGE_PLAN_DELETE),{change_plan_id:a.state.deleteId,owner:a.props.username}).then((function(e){a.setState({deleteId:null}),a.fetchAllChangePlans(),"success"===e.data.message?a.setState({statusOpen:!0,statusMessage:"Success",statusSeverity:"success"}):a.setState({statusOpen:!0,statusMessage:e.data.message,statusSeverity:"error"})}))},a.openDescriptionModal=function(e,t,n){console.log(t),a.setState({editId:e,editStep:t,editName:n,changeDescriptionModal:!0})},a.closeDescriptionModal=function(){a.setState({changeDescriptionModal:!1})},a.closeDescription=function(){a.setState({descriptionModal:!1})},a.reducePorts=function(e){var t="";return e.forEach((function(e){e.connection_hostname.length>0&&(t+="Host: "+e.connection_hostname+" "),e.connection_port.length>0&&(t+="Port: "+e.connection_port+" "),e.mac_address.length>0&&(t+="Mac: "+e.mac_address+" ")})),t},a.validate=function(e){p.a.post(U(ds,"validateplan/"),{change_plan_id:e}).then((function(e){console.log(e);var t=e.data.conflicts;0===Object.keys(t).length?a.setState({statusOpen:!0,statusMessage:"Success",statusSeverity:"success"}):a.setState({statusOpen:!0,statusMessage:e.data.conflicts[Object.keys(t)[0]],statusSeverity:"error"})}))},a.deleteAction=function(e,t){p.a.post(U(ds,kt.CHANGE_PLAN_DELETE_ACTION),{change_plan_id:e,step:t}).then((function(e){a.fetchAllChangePlans(),"success"===e.data.message?a.setState({statusOpen:!0,statusMessage:"Success",statusSeverity:"success"}):a.setState({statusOpen:!0,statusMessage:e.data.message,statusSeverity:"error"})}))},a.lookup=function(e){return{asset_numberOriginal:"Asset Number",model:"Model",hostname:"Hostname",rack:"Rack",rack_position:"Rack Position",owner:"Owner",comment:"Comment",datacenter_name:"Datacenter",tags:"Tags",network_connections:"Network Connections",power_connections:"Power Connections",asset_number:"Asset Number"}[e]},a.closeShowStatus=function(){a.setState({statusOpen:!1})},a.createChangePlan=function(){a.setState({changePlanModal:!0})},a.closeChangePlanModal=function(){a.setState({changePlanModal:!1})},a.updatePlanName=function(e){a.setState({changePlanName:e.target.value})},a.beginChangePlan=function(){a.closeChangePlanModal(),a.setState({descriptionModal:!0}),p.a.post(U("changeplans/","createplan"),{owner:a.props.username,name:a.state.changePlanName}).then((function(e){a.props.updateChangePlan(!0,e.data.change_plan,1,a.state.changePlanName),a.setState({changePlanName:null}),a.fetchAllChangePlans()}))},a.generateWorkOrder=function(e,t){p.a.post(U(ds,"workorder/"),{change_plan_id:t},{responseType:"arraybuffer"}).then((function(e){try{var t=new Blob([e.data],{type:"application/pdf"}),a=document.createElement("a");a.href=window.URL.createObjectURL(t),a.download="WorkOrder_"+new Date+".pdf",a.click()}catch(n){}}))},a.state={statusOpen:!1,statusMessage:"",statusSeverity:"",changePlans:[],changePlanDetails:{},renameDialog:!1,planName:"",planId:null,executeDialog:!1,executeId:null,deleteDialog:!1,deleteId:null,changeDescriptionModal:!1,editId:null,editStep:null,editName:"",conflicts:null,changePlanModal:!1,changePlanName:null,descriptionModal:!1},p.a.defaults.headers.common.token=a.props.token,p.a.defaults.headers.common.privilege=a.props.privilege,a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.fetchAllChangePlans()}},{key:"render",value:function(){var e=this,t=this.props.classes;return s.a.createElement("div",null,s.a.createElement(sn,null,s.a.createElement(q,{open:this.state.statusOpen,severity:this.state.statusSeverity,closeStatus:this.closeShowStatus,message:this.state.statusMessage}),s.a.createElement(f.a,{container:!0,spacing:5,direction:"row",justify:"center",alignItems:"center",style:{margin:"0px",maxWidth:"95vw"}},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{variant:"h4"},"Change Plans")),s.a.createElement(f.a,{item:!0,xs:5}),s.a.createElement(f.a,{item:!0,xs:2},s.a.createElement(y.a,{variant:"contained",color:"primary",style:{width:"100%"},startIcon:s.a.createElement(ms.a,null),onClick:this.createChangePlan},"Create Change Plan")),s.a.createElement(f.a,{item:!0,xs:5}),s.a.createElement(f.a,{item:!0,xs:2}),s.a.createElement(f.a,{item:!0,xs:8},this.state.changePlans.map((function(t){var a="True"===t.executed,n=e.state.changePlanDetails[t.identifier],r=1;return void 0!==n&&(n.forEach((function(e){r=Math.max(r,e.step)})),r+=1),s.a.createElement(zn.a,{key:t.identifier},s.a.createElement(Kn.a,{expandIcon:s.a.createElement(Wn.a,null)},s.a.createElement(E.a,null,t.name),a?s.a.createElement(ns.a,{size:"small",icon:s.a.createElement(cs.a,null),color:"primary",label:"Executed at "+t.timestamp,style:{marginLeft:"15px"}}):null),s.a.createElement(Jn.a,null,s.a.createElement(f.a,{container:!0,spacing:3,direction:"row",justify:"center",alignItems:"center",style:{margin:"0px",maxWidth:"95vw"}},s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(y.a,{variant:"contained",color:"primary",style:{width:"100%"},onClick:function(a){return e.generateWorkOrder(a,t.identifier)}},"Generate work order")),s.a.createElement(f.a,{item:!0,xs:3},a?null:s.a.createElement(y.a,{variant:"contained",color:"primary",style:{width:"100%"},startIcon:s.a.createElement(os.a,null),onClick:function(){e.openRenameDialog(t.identifier)}},"Rename")),s.a.createElement(f.a,{item:!0,xs:3},a?null:s.a.createElement(y.a,{variant:"contained",color:"default",style:{width:"100%"},startIcon:s.a.createElement(Ye.a,null),onClick:function(){e.openDescriptionModal(t.identifier,r,t.name)}},"Edit")),s.a.createElement(f.a,{item:!0,xs:12},void 0!==e.state.changePlanDetails[t.identifier]?e.state.changePlanDetails[t.identifier].map((function(n){var r=n.diff;if(0==Object.keys(r).length)return null;var i="create"===n.action||"decommission"===n.action;return s.a.createElement("div",null,s.a.createElement(je.a,{component:ce.a},s.a.createElement(E.a,{style:{margin:"10px"}},n.action.charAt(0).toUpperCase()+n.action.slice(1)," Asset Number: ",void 0===n.new_record.asset_numberOriginal?n.new_record.asset_number:n.new_record.asset_numberOriginal,a||"collateral"===n.action?null:s.a.createElement(B.a,{style:{marginLeft:"20px"},onClick:function(){e.deleteAction(t.identifier,n.step)}},s.a.createElement(We.a,null))),s.a.createElement(Le.a,null,s.a.createElement(Te.a,null,s.a.createElement(Ue.a,null,s.a.createElement(Ve.a,null,"Field"),i?s.a.createElement(Ve.a,null,"Value"):s.a.createElement(Ve.a,null,"Current"),i?null:s.a.createElement(Ve.a,null,"New"))),s.a.createElement(Re.a,null,Object.keys(r).map((function(t){return"tags"===t?null:i?s.a.createElement(Ue.a,null,s.a.createElement(Ve.a,null,e.lookup(t)),s.a.createElement(Ve.a,null,"power_connections"!==t?"network_connections"===t?Object.keys(r[t]).length:r[t]:r[t].length)):s.a.createElement(Ue.a,null,s.a.createElement(Ve.a,null,e.lookup(t)),s.a.createElement(Ve.a,null,"network_connections"!==t?r[t][0]:e.reducePorts(r[t][0])),s.a.createElement(Ve.a,null,"network_connections"!==t?r[t][1]:e.reducePorts(r[t][1])))}))))),s.a.createElement("br",null))})):"This change plan has made no changes!"),s.a.createElement(f.a,{item:!0,xs:3},a?null:s.a.createElement(y.a,{variant:"contained",color:"default",style:{width:"100%"},startIcon:s.a.createElement(Rt.a,null),onClick:function(){e.validate(t.identifier)}},"Validate")),s.a.createElement(f.a,{item:!0,xs:3},a?null:s.a.createElement(y.a,{variant:"contained",color:"primary",style:{width:"100%"},startIcon:s.a.createElement(rs.a,null),onClick:function(){e.openExecuteDialog(t.identifier)}},"Execute")),s.a.createElement(f.a,{item:!0,xs:3},a?null:s.a.createElement(y.a,{variant:"contained",color:"secondary",style:{width:"100%"},startIcon:s.a.createElement(We.a,null),onClick:function(){e.openDeleteDialog(t.identifier)}},"Delete")))))}))),s.a.createElement(f.a,{item:!0,xs:2})),s.a.createElement(be.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:this.state.renameDialog,onClose:this.closeRenameDialog,closeAfterTransition:!0},s.a.createElement(ve.a,{in:this.state.renameDialog},s.a.createElement(Ee.a,{open:this.state.renameDialog},s.a.createElement("div",{className:t.grid},s.a.createElement(f.a,{container:!0,spacing:1,direction:"row",justify:"flex-start",alignItems:"center"},s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(E.a,null,"New plan name:")),s.a.createElement(f.a,{item:!0,xs:9},s.a.createElement(w.a,{type:"text",id:"change-plan-name",variant:"outlined",label:"Change Plan Name",name:"change-plan-name",onChange:this.updatePlanName,style:{width:"100%"}})),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(y.a,{variant:"contained",color:"primary",onClick:this.renameChangePlan,style:{width:"100%"}},"Save")),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(y.a,{variant:"contained",color:"secondary",onClick:this.closeRenameDialog,style:{width:"100%"}},"Cancel"))))))),s.a.createElement(be.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:this.state.executeDialog,onClose:this.closeExecuteDialog,closeAfterTransition:!0},s.a.createElement(ve.a,{in:this.state.executeDialog},s.a.createElement(Ee.a,{open:this.state.executeDialog},s.a.createElement("div",{className:t.grid},s.a.createElement(f.a,{container:!0,spacing:1,direction:"row",justify:"flex-start",alignItems:"center"},s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(E.a,null,"Are you sure you want to execute this change plan?")),s.a.createElement(f.a,{item:!0,xs:9}),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(y.a,{variant:"contained",color:"primary",onClick:this.executeChangePlan,style:{width:"100%"}},"Yes")),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(y.a,{variant:"contained",color:"secondary",onClick:this.closeExecuteDialog,style:{width:"100%"}},"Cancel"))))))),s.a.createElement(be.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:this.state.deleteDialog,onClose:this.closeDeleteDialog,closeAfterTransition:!0},s.a.createElement(ve.a,{in:this.state.deleteDialog},s.a.createElement(Ee.a,{open:this.state.deleteDialog},s.a.createElement("div",{className:t.grid},s.a.createElement(f.a,{container:!0,spacing:1,direction:"row",justify:"flex-start",alignItems:"center"},s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(E.a,null,"Are you sure you want to delete this change plan?")),s.a.createElement(f.a,{item:!0,xs:9}),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(y.a,{variant:"contained",color:"primary",onClick:this.deleteChangePlan,style:{width:"100%"}},"Yes")),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(y.a,{variant:"contained",color:"secondary",onClick:this.closeDeleteDialog,style:{width:"100%"}},"Cancel"))))))),s.a.createElement(be.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:this.state.changeDescriptionModal,onClose:this.closeDescriptionModal,closeAfterTransition:!0},s.a.createElement(ve.a,{in:this.state.changeDescriptionModal},s.a.createElement(Ee.a,{open:this.state.changeDescriptionModal},s.a.createElement("div",{className:t.grid},s.a.createElement(f.a,{container:!0,spacing:1,direction:"row",justify:"flex-start",alignItems:"center"},s.a.createElement(f.a,{item:!0,xs:3}),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(E.a,null,"You are now in change plan mode. All changes made will be logged to the change plan and will not actually be made in the system. Use the icon in the bottom right corner to exit change plan mode!")),s.a.createElement(f.a,{item:!0,xs:3}),s.a.createElement(f.a,{item:!0,xs:3}),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(y.a,{variant:"contained",color:"primary",onClick:this.startEditing,style:{width:"100%"}},"Ok")),s.a.createElement(f.a,{item:!0,xs:3})))))),s.a.createElement(be.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:this.state.changePlanModal,onClose:this.closeChangePlanModal,closeAfterTransition:!0},s.a.createElement(ve.a,{in:this.state.changePlanModal},s.a.createElement(Ee.a,{open:this.state.changePlanModal},s.a.createElement("div",{className:t.grid},s.a.createElement(f.a,{container:!0,spacing:1,direction:"row",justify:"flex-start",alignItems:"center"},s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(E.a,null,"Enter plan name:")),s.a.createElement(f.a,{item:!0,xs:9},s.a.createElement(w.a,{type:"text",id:"change-plan-name",variant:"outlined",label:"Change Plan Name",name:"change-plan-name",onChange:this.updatePlanName,style:{width:"100%"}})),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(y.a,{variant:"contained",color:"primary",onClick:this.beginChangePlan,style:{width:"100%"}},"Begin")),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(y.a,{variant:"contained",color:"secondary",onClick:this.closeChangePlanModal,style:{width:"100%"}},"Cancel"))))))),s.a.createElement(be.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:this.state.descriptionModal,onClose:this.closeDescription,closeAfterTransition:!0},s.a.createElement(ve.a,{in:this.state.descriptionModal},s.a.createElement(Ee.a,{open:this.state.descriptionModal},s.a.createElement("div",{className:t.grid},s.a.createElement(f.a,{container:!0,spacing:1,direction:"row",justify:"flex-start",alignItems:"center"},s.a.createElement(f.a,{item:!0,xs:3}),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(E.a,null,"You are now in change plan mode. All changes made will be logged to the change plan and will not actually be made in the system. Use the icon in the bottom right corner to exit change plan mode!")),s.a.createElement(f.a,{item:!0,xs:3}),s.a.createElement(f.a,{item:!0,xs:3}),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(y.a,{variant:"contained",color:"primary",onClick:this.closeDescription,style:{width:"100%"}},"Ok")),s.a.createElement(f.a,{item:!0,xs:3}))))))))}}]),t}(s.a.Component),hs=Object(ie.a)((function(e){return{root:{flexGrow:1},modal:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},grid:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3),width:"50%"},progress:{display:"flex","& > * + *":{marginLeft:e.spacing(2)}}}}))(ps),gs=(a(515),"currentTab"),fs=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleProfileMenuOpen=function(e){a.setState({anchorEl:e.currentTarget,isMenuOpen:!0})},a.handleMenuClose=function(){a.setState({anchorEl:null,isMenuOpen:!1})},a.updateChangePlan=function(e,t,n,s){console.log(e,t,n,s),a.setState({changePlanActive:e,changePlanID:t,changePlanStep:n,changePlanName:s}),!1===e&&a.setState({changePlanStep:null,changePlanName:""})},a.incrementChangePlanStep=function(){var e=a.state.changePlanStep;a.setState({changePlanStep:e+1})},a.state={currentTabID:0,anchorEl:null,isMenuOpen:!1,changePlanActive:!1,changePlanID:null,changePlanStep:null,changePlanName:""},a.handleChange=a.handleChange.bind(Object(g.a)(a)),console.log(sessionStorage.getItem(gs)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){if(console.log(sessionStorage.getItem(gs)),null!==sessionStorage.getItem(gs)){var e=parseInt(sessionStorage.getItem(gs));this.setState({currentTabID:e})}}},{key:"componentWillUnmount",value:function(){sessionStorage.removeItem(gs)}},{key:"handleChange",value:function(e,t){this.setState({currentTabID:t}),sessionStorage.setItem(gs,t)}},{key:"render",value:function(){var e=this.props.classes;return s.a.createElement("div",{className:e.root},s.a.createElement(sn,null,s.a.createElement(Z.a,{position:"static"},s.a.createElement(ee.a,null,s.a.createElement(E.a,{variant:"h6",className:e.title},"Hyposoft Server Management"),s.a.createElement("div",null,s.a.createElement(B.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",color:"inherit",onClick:this.handleProfileMenuOpen},s.a.createElement(re.a,null)),s.a.createElement(ae.a,{anchorEl:this.state.anchorEl,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-search-account-menu",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:this.state.isMenuOpen,onClose:this.handleMenuClose},s.a.createElement(ne.a,null,"Username: "+this.props.username),s.a.createElement(ne.a,{onClick:this.props.logout},"LOGOUT"))))),s.a.createElement($.a,{value:this.state.currentTabID,onChange:this.handleChange,indicatorColor:"primary",textColor:"primary",centered:!0},s.a.createElement(te.a,{value:0,style:{flexGrow:1},label:"Models"}," "),s.a.createElement(te.a,{value:1,style:{flexGrow:1},label:"Assets"}),this.props.privilege.asset||this.props.privilege.admin||this.props.privilege.datacenters.length>0?s.a.createElement(te.a,{value:6,style:{flexGrow:1},label:"Change Plans"}):null,this.props.privilege.admin?s.a.createElement(te.a,{value:2,style:{flexGrow:1},label:"Users"}):null,this.props.privilege.admin||this.props.privilege.asset||this.props.privilege.datacenters.length>0?s.a.createElement(te.a,{value:3,style:{flexGrow:1},label:"Sites"}):null,s.a.createElement(te.a,{value:4,style:{flexGrow:1},label:"Statistics"}),this.props.privilege.admin||this.props.privilege.audit?s.a.createElement(te.a,{value:5,style:{flexGrow:1},label:"Logs"}):null),0!==this.state.currentTabID?null:s.a.createElement(E.a,{component:"div",role:"tabpanel",id:"simple-tabpanel-0","aria-labelledby":"simple-tab-0"},s.a.createElement(oe.a,{className:e.tab},s.a.createElement(lt,{token:this.props.token,privilege:this.props.privilege}))),1!==this.state.currentTabID?null:s.a.createElement(E.a,{component:"div",role:"tabpanel",id:"simple-tabpanel-0","aria-labelledby":"simple-tab-0"},s.a.createElement(oe.a,{className:e.tab},s.a.createElement(rn,{token:this.props.token,privilege:this.props.privilege,username:this.props.username,changePlanActive:this.state.changePlanActive,updateChangePlan:this.updateChangePlan,changePlanID:this.state.changePlanID,changePlanStep:this.state.changePlanStep,incrementChangePlanStep:this.incrementChangePlanStep,changePlanName:this.state.changePlanName}))),2!==this.state.currentTabID?null:s.a.createElement(E.a,{component:"div",role:"tabpanel",id:"simple-tabpanel-0","aria-labelledby":"simple-tab-0"},s.a.createElement(oe.a,{className:e.tab},s.a.createElement(At,{token:this.props.token,privilege:this.props.privilege}))),3!==this.state.currentTabID?null:s.a.createElement(E.a,{component:"div",role:"tabpanel",id:"simple-tabpanel-0","aria-labelledby":"simple-tab-0"},s.a.createElement(oe.a,{className:e.tab},s.a.createElement(Fn,{token:this.props.token,privilege:this.props.privilege,username:this.props.username}))),4!==this.state.currentTabID?null:s.a.createElement(E.a,{component:"div",role:"tabpanel",hidden:4!==this.state.currentTabID,id:"simple-tabpanel-0","aria-labelledby":"simple-tab-0"},s.a.createElement(oe.a,{className:e.tab},s.a.createElement(Zn,{token:this.props.token,privilege:this.props.privilege}))),5!==this.state.currentTabID?null:s.a.createElement(E.a,{component:"div",role:"tabpanel",hidden:5!==this.state.currentTabID,id:"tab-panel-logs","aria-labelledby":"tab-panel-logs"},s.a.createElement(oe.a,{className:e.tab},s.a.createElement(as,null))),6!==this.state.currentTabID?null:s.a.createElement(E.a,{component:"div",role:"tabpanel",hidden:6!==this.state.currentTabID,id:"tab-panel-logs","aria-labelledby":"tab-panel-logs"},s.a.createElement(oe.a,{className:e.tab},s.a.createElement(hs,{token:this.props.token,privilege:this.props.privilege,username:this.props.username,updateChangePlan:this.updateChangePlan})))))}}]),t}(s.a.Component),bs=Object(ie.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},tab:{flexGrow:"flex",alignItems:"center",justifyContent:"center",maxWidth:"100%",width:"100%",margin:"0 auto"}}}))(fs),vs="token",Es="privilege",ws="loggedIn",ys="username",Ss=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).login=function(e,t,n){console.log(n),sessionStorage.setItem(vs,e),sessionStorage.setItem(Es,JSON.stringify(n)),sessionStorage.setItem(ws,!0),sessionStorage.setItem(ys,t),p.a.defaults.headers.common.token=e,p.a.defaults.headers.common.privilege=n,a.setState({token:e,privilege:n,loggedIn:!0,username:t}),window.history.replaceState({},"Hyposoft Asset Management","/")},a.loginWithOAuth=function(e,t,n){sessionStorage.setItem(vs,e),sessionStorage.setItem(Es,n),sessionStorage.setItem(ws,!0),sessionStorage.setItem(ys,t),p.a.defaults.headers.common.token=e,p.a.defaults.headers.common.privilege=n,a.setState({token:e,privilege:n,loggedIn:!0,username:t},(function(){window.history.replaceState({},"Hyposoft Asset Management","/")}))},a.logout=function(){p.a.get(U("users/","logout")),a.setState({token:"",privilege:"",loggedIn:!1,username:""}),sessionStorage.removeItem(vs),sessionStorage.removeItem(Es),sessionStorage.removeItem(ws),sessionStorage.removeItem(ys),window.history.replaceState({},"Hyposoft Asset Management","/"),console.log(window.location.href),console.log(I)},a.state={token:sessionStorage.getItem(vs)||"",privilege:sessionStorage.getItem(Es)||"",loggedIn:sessionStorage.getItem(ws)||"",username:sessionStorage.getItem(ys)||""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){p.a.defaults.headers.common.token=this.state.token,p.a.defaults.headers.common.privilege=this.state.privilege}},{key:"render",value:function(){var e="";try{e=JSON.parse(this.state.privilege)}catch(t){e=this.state.privilege}return console.log("privilege: "),console.log(e),s.a.createElement(sn,null,s.a.createElement("div",null,this.state.loggedIn?s.a.createElement(bs,{token:this.state.token,username:this.state.username,privilege:e,logout:this.logout}):s.a.createElement(Q,{loginFunc:this.login,shib:this.props.redirected,loginFuncOAuth:this.loginWithOAuth})))}}]),t}(s.a.Component);i.a.render(s.a.createElement(Ss,{redirected:document.referrer}),document.getElementById("root"))}},[[288,1,2]]]);
//# sourceMappingURL=main.0fc94a71.chunk.js.map
