(this.webpackJsonpreactfrontend=this.webpackJsonpreactfrontend||[]).push([[0],{122:function(e,t,a){e.exports=a.p+"static/media/logo.df79d0ea.png"},276:function(e,t,a){e.exports=a(502)},281:function(e,t,a){},451:function(e,t,a){},452:function(e,t,a){},500:function(e,t,a){},501:function(e,t,a){},502:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(18),i=a.n(r),o=(a(281),a(9)),l=a(8),c=a(10),m=a(11),u=a(12),d=a(7),p=a.n(d),h=a(6),g=a(21),f=a(542),E=a(548),b=a(545),v="http://localhost:4010/",w=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","W","X","Y","Z"],S="instances/",y="models/",C="users/",k="datacenters/",O="logs/",x="ParselTonguesUserAuth",M="";M="http://localhost:3000"===window.location.href||"http://localhost:3000/"===window.location.href?window.location.href:v;var _,N="https://oauth.oit.duke.edu/oauth/authorize.php?client_id="+encodeURIComponent(x)+"&client_secret="+encodeURIComponent("LpUwB*eiK4Iw#1gaCu5jYp1u5uRF3ERsdmuNUGoKYNzn7rHm7b")+"&redirect_uri="+encodeURIComponent(M)+"&response_type=token&state=1129&scope="+encodeURIComponent("basic"),j=200;function A(e,t){return v+e+t}!function(e){e.ADMIN="admin",e.USER="user"}(_||(_={}));var P,D,I=a(503),L=a(52),T=a.n(L),U=a(573),R=a(571),V=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(U.a,{open:this.props.open,autoHideDuration:12e3,onClose:this.props.closeStatus},s.a.createElement(R.a,{elevation:6,variant:"filled",severity:this.props.severity},s.a.createElement("div",null,this.props.message,s.a.createElement(I.a,{"aria-label":"close",color:"inherit",size:"small",onClick:this.props.closeStatus},s.a.createElement(T.a,{fontSize:"inherit"}))))))}}]),t}(s.a.Component),F=a(543),B=a(544),W=a(88),H=a(122),G=a.n(H),K=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={username:"",password:"",statusMessage:"",showStatus:!1,statusSeverity:"info"},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement(f.a,{container:!0,spacing:5,direction:"column",justify:"flex-start",alignItems:"center",onKeyDown:function(t){return e.onKeyPressed(t)},style:{minHeight:"102vh",background:"linear-gradient(to top, #a8e063, #56ab2f)"}},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement("img",{src:G.a,alt:"",style:{height:"200px",marginTop:"50px"}})),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(F.a,{style:{minWidth:"20vw"}},s.a.createElement(B.a,null,s.a.createElement(f.a,{container:!0,spacing:1,direction:"column",justify:"center",alignItems:"center"},s.a.createElement(f.a,{container:!0,item:!0,alignItems:"flex-start",xs:12},s.a.createElement(W.a,{variant:"h6",color:"textPrimary",fontWeight:"fontWeightBold",gutterBottom:!0},"Please wait while we log you in...")))))),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(V,{open:this.state.showStatus,severity:this.state.statusSeverity,closeStatus:this.closeShowStatus,message:this.state.statusMessage})))}}]),t}(s.a.Component),q="users/",z=a(303),J=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).getDukeCredentials=function(e){p.a.get("https://api.colab.duke.edu/identity/v1/",{headers:{"x-api-key":x,Authorization:"Bearer ".concat(e)}}).then((function(t){p.a.post(A(q,"oauth"),{username:t.data.netid,email:t.data.mail,display_name:t.data.displayName,client_id:x,token:e}).then((function(e){console.log("response:"),console.log(e);e.data.message;e.status===j?(a.setState({username:"",password:"",statusMessage:"",showStatus:!1,statusSeverity:"info",initialized:!1,oauth:!1}),a.props.loginFuncOAuth(e.data.token,e.data.username,e.data.privilege)):a.setState({showStatus:!0,statusMessage:e.data.message})}))}))},a.loginWithOAuth=function(){window.location=N},a.state={username:"",password:"",statusMessage:"",showStatus:!1,statusSeverity:"info",initialized:!1,oauth:!1},a.closeShowStatus=a.closeShowStatus.bind(Object(g.a)(a)),a.submitCredentials=a.submitCredentials.bind(Object(g.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){try{var e=z.parse(window.location.hash.substring(1));null!=e.access_token&&(this.getDukeCredentials(e.access_token),this.setState({oauth:!0}))}catch(t){console.log("tried:")}this.setState({initialized:!0})}},{key:"submitCredentials",value:function(){var e=this;p.a.post(A(q,"authenticate"),{username:this.state.username,password:this.state.password}).then((function(t){console.log(t),"success"===t.data.message?(e.setState({message:""}),e.props.loginFunc(t.data.token,e.state.username,t.data.privilege)):e.setState({showStatus:!0,statusMessage:t.data.message})}))}},{key:"updateUsername",value:function(e){this.setState({username:e.target.value})}},{key:"updatePassword",value:function(e){this.setState({password:e.target.value})}},{key:"closeShowStatus",value:function(){this.setState({showStatus:!1})}},{key:"onKeyPressed",value:function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),this.submitCredentials())}},{key:"render",value:function(){var e,t=this;return s.a.createElement("div",null,this.state.oauth?s.a.createElement(K,null):s.a.createElement(f.a,{container:!0,spacing:5,direction:"column",justify:"flex-start",alignItems:"center",onKeyDown:function(e){return t.onKeyPressed(e)},style:(e={minHeight:"102vh",background:"#56ab2f"},Object(h.a)(e,"background","-webkit-linear-gradient(to top, #a8e063, #56ab2f)"),Object(h.a)(e,"background","linear-gradient(to top, #a8e063, #56ab2f)"),e)},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement("img",{src:G.a,style:{height:"200px",marginTop:"50px"},alt:"Hyposoft"})),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(F.a,{style:{minWidth:"20vw"}},s.a.createElement(B.a,null,s.a.createElement(f.a,{container:!0,spacing:1,direction:"column",justify:"center",alignItems:"center"},s.a.createElement(f.a,{container:!0,item:!0,alignItems:"flex-start",xs:12},s.a.createElement(W.a,{variant:"h4",color:"textPrimary",fontWeight:"fontWeightBold",gutterBottom:!0},"Login")),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(b.a,{id:"username-input",label:"Username",variant:"outlined",required:!0,ref:"username",onChange:this.updateUsername.bind(this),style:{minWidth:"15vw"}})),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(b.a,{id:"password-input",label:"Password",variant:"outlined",required:!0,ref:"password",type:"password",onChange:this.updatePassword.bind(this),style:{minWidth:"15vw"}})),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{onClick:this.submitCredentials,variant:"contained",color:"primary",style:{minWidth:"15vw"}},"Sign In")),s.a.createElement(f.a,{container:!0,item:!0,direciton:"row",justify:"center",alignItems:"center",xs:12},s.a.createElement("hr",{style:{width:"5vw"}}),s.a.createElement(W.a,{color:"textSecondary"},"Or"),s.a.createElement("hr",{style:{width:"5vw"}})),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{onClick:this.loginWithOAuth,variant:"contained",color:"primary"},"Sign In with NetID")))))),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(V,{open:this.state.showStatus,severity:this.state.statusSeverity,closeStatus:this.closeShowStatus,message:this.state.statusMessage}))))}}]),t}(s.a.Component),X=a(565),Y=a(569),Q=a(566),Z=a(567),$=a(254),ee=a(560),te=a(253),ae=a.n(te),ne=a(5),se=a(568),re=a(126);!function(e){e.create="create/",e.delete="delete/",e.edit="edit/",e.view="view/",e.detailView="detailView/",e.search="search/",e.VENDOR_VALUES="assistedvendor/",e.UPLOAD_FILE="import/",e.EXPORT_FILE="export/"}(P||(P={})),function(e){e.Vendor="vendor",e.model_number="model_number",e.Height="height",e.display_color="display_color",e.ethernet_ports="ethernet_ports",e.power_ports="power_ports",e.CPU="cpu",e.Memory="memory",e.Storage="storage",e.Comment="comment"}(D||(D={}));var ie=a(136),oe=a(127),le=a.n(oe),ce=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(ie.a,{elevation:3},s.a.createElement(f.a,{container:!0,spacing:2,direction:"row",justify:"flex-start",alignItems:"center",style:{padding:"10px"}},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(W.a,{variant:"h6"},"Export")),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(W.a,null,"Download what is currently shown in the table.")),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{onClick:this.props.downloadTable,variant:"contained",color:"primary",startIcon:s.a.createElement(le.a,null),style:{width:"100%"}},"Export")),s.a.createElement(f.a,{container:!0,item:!0,direciton:"row",justify:"center",alignItems:"center",xs:12},s.a.createElement("hr",{style:{width:"5vw"}}),s.a.createElement(W.a,{color:"textSecondary"},"Or"),s.a.createElement("hr",{style:{width:"5vw"}})),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{onClick:this.props.showAll,variant:"contained",color:"default",style:{width:"100%"}},"Show all models")))))}}]),t}(s.a.Component),me=a(572);function ue(e,t){return{label:t,name:e}}var de={vendor:ue("vendor","Vendor"),modelNumber:ue("model_number","Model Number"),height:ue("height","Height"),displayColor:ue("display_color","Display Color"),ethernetPorts:ue("ethernet_ports","Network Ports"),powerPorts:ue("power_ports","Power Ports"),cpu:ue("cpu","CPU"),memory:ue("memory","Memory"),storage:ue("storage","Storage"),comments:ue("comments","Comments")},pe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={filters:{}},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"updateSearchText",value:function(e){if(this.state.filters.hasOwnProperty(e.target.id)){var t=this.state.filters;t[e.target.id]=e.target.value,this.setState({filters:t}),this.forceUpdate()}else{var a=this.state.filters;a[e.target.id]=e.target.value,this.setState({filters:a}),this.forceUpdate()}}},{key:"search",value:function(){this.props.search(this.state.filters)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(ie.a,{elevation:3},s.a.createElement(f.a,{container:!0,spacing:2,direction:"row",justify:"flex-start",alignItems:"center",style:{padding:"10px"}},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(W.a,{variant:"h5"},"Search")),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(me.a,{id:"vendor",options:this.props.options,includeInputInList:!0,freeSolo:!0,renderInput:function(t){return s.a.createElement(b.a,Object.assign({},t,{label:de.vendor.label,name:de.vendor.name,onChange:e.updateSearchText.bind(e),onBlur:e.updateSearchText.bind(e),variant:"outlined",fullWidth:!0}))}})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(b.a,{id:"model_number",variant:"outlined",label:"Model Number",name:"model_number",onChange:this.updateSearchText.bind(this),style:{width:"100%"}})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(b.a,{id:"min_height",type:"number",variant:"outlined",label:"Min Height",name:"min_height",onChange:this.updateSearchText.bind(this),style:{width:"100%"},InputProps:{inputProps:{min:1,max:42}}})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(b.a,{id:"max_height",type:"number",variant:"outlined",label:"Max Height",name:"max_height",onChange:this.updateSearchText.bind(this),style:{width:"100%"},InputProps:{inputProps:{min:1,max:42}}})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(b.a,{id:"min_ethernet_ports",type:"number",variant:"outlined",label:"Min Network Ports",name:"min_ethernet_ports",onChange:this.updateSearchText.bind(this),style:{width:"100%"},InputProps:{inputProps:{min:0}}})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(b.a,{id:"max_ethernet_ports",type:"number",variant:"outlined",label:"Max Network Ports",name:"max_ethernet_ports",onChange:this.updateSearchText.bind(this),style:{width:"100%"},InputProps:{inputProps:{min:0}}})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(b.a,{id:"min_power_ports",type:"number",variant:"outlined",label:"Min Power Ports",name:"min_power_ports",onChange:this.updateSearchText.bind(this),style:{width:"100%"},InputProps:{inputProps:{min:0}}})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(b.a,{id:"max_power_ports",type:"number",variant:"outlined",label:"Max Power Ports",name:"max_power_ports",onChange:this.updateSearchText.bind(this),style:{width:"100%"},InputProps:{inputProps:{min:0}}})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(b.a,{id:"cpu",variant:"outlined",label:"CPU",name:"cpu",onChange:this.updateSearchText.bind(this),style:{width:"100%"}})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(b.a,{id:"memory",type:"number",variant:"outlined",label:"Memory",name:"memory",onChange:this.updateSearchText.bind(this),style:{width:"100%"},InputProps:{inputProps:{min:0}}})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(b.a,{id:"storage",variant:"outlined",label:"Storage",name:"storage",onChange:this.updateSearchText.bind(this),style:{width:"100%"}})),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{onClick:this.search.bind(this),variant:"contained",color:"primary",style:{width:"100%"}},"Search")))))}}]),t}(s.a.Component),he=a(128),ge=(a(451),a(257)),fe=a(510),Ee=a(256),be=a(129),ve=a.n(be),we=a(167),Se=a(547),ye=a(511),Ce=a(550),ke=a(549);function Oe(e,t){return{label:t,name:e}}var xe={vendor:Oe("vendor","Vendor"),modelNumber:Oe("model_number","Model Number"),height:Oe("height","Height"),displayColor:Oe("display_color","Display Color"),ethernetPorts:Oe("ethernet_ports","Network Ports"),powerPorts:Oe("power_ports","Power Ports"),cpu:Oe("cpu","CPU"),memory:Oe("memory","Memory"),storage:Oe("storage","Storage"),comment:Oe("comment","Comment")},Me=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).updateColor=function(e){a.setState({color:e}),a.props.updateModelColor(e.hex)},a.showModal=function(){a.setState({showModal:!0})},a.showImportModal=function(){a.setState({showImportModal:!0})},a.closeModal=function(){a.setState({showModal:!1,networkPorts:[],numPorts:0})},a.closeImportModal=function(){a.setState({showImportModal:!1})},a.create=function(){a.props.createModel(a.state.networkPorts),a.closeModal()},a.uploadFile=function(){var e=new FormData;e.append("file",a.state.importedFile),a.sendUploadedFile(e)},a.chooseFile=function(e){a.setState({importedFile:e.target.files[0]})},a.updateNetworkPorts=function(e){for(var t=""===e.target.value?0:e.target.value,n=[],s=1;s<=t;s++)n.push(s.toString());a.setState({networkPorts:n,numPorts:t}),a.props.updateModelCreator(e)},a.updatePort=function(e,t){var n=a.state.networkPorts;n[e]=t.target.value,a.setState({networkPorts:n})},a.state={color:"#000",showModal:!1,showImportModal:!1,importedFile:null,networkPorts:[],numPorts:0},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return s.a.createElement("div",null,s.a.createElement(ie.a,{elevation:3},s.a.createElement(f.a,{container:!0,spacing:2,direction:"row",justify:"flex-start",alignItems:"center",style:{padding:"10px"}},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(W.a,{variant:"h5"},"Add")),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{variant:"contained",style:{width:"100%",background:"green",color:"white"},onClick:this.showModal},"Create")),s.a.createElement(f.a,{container:!0,item:!0,direciton:"row",justify:"center",alignItems:"center",xs:12},s.a.createElement("hr",{style:{width:"5vw"}}),s.a.createElement(W.a,{color:"textSecondary"},"Or"),s.a.createElement("hr",{style:{width:"5vw"}})),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{variant:"contained",color:"primary",style:{width:"100%"},startIcon:s.a.createElement(ve.a,null),onClick:function(){e.showImportModal()}},"Import")))),s.a.createElement(ge.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:this.state.showModal,onClose:this.closeModal,closeAfterTransition:!0},s.a.createElement(Ee.a,{in:this.state.showModal},s.a.createElement(fe.a,{open:this.state.showModal},s.a.createElement("div",{className:t.grid},s.a.createElement(f.a,{container:!0,spacing:1,direction:"row",justify:"flex-start",alignItems:"center"},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(W.a,{variant:"h5"},"New Model")),s.a.createElement(f.a,{item:!0,xs:12,sm:12,md:6,lg:6},s.a.createElement(me.a,{id:"select-vendor",options:this.props.options,includeInputInList:!0,freeSolo:!0,renderInput:function(t){return s.a.createElement(b.a,Object.assign({},t,{label:xe.vendor.label,name:xe.vendor.name,onChange:e.props.updateModelCreator,onBlur:e.props.updateModelCreator,variant:"outlined",fullWidth:!0}))}})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(b.a,{id:"standard-basic",variant:"outlined",label:xe.modelNumber.label,name:xe.modelNumber.name,onChange:this.props.updateModelCreator})),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(b.a,{type:"number",id:"standard-basic",variant:"outlined",label:xe.height.label,name:xe.height.name,onChange:this.props.updateModelCreator,InputProps:{inputProps:{min:1,max:42}},style:{width:"100%"}})),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(b.a,{type:"number",id:"standard-basic",variant:"outlined",label:xe.ethernetPorts.label,name:xe.ethernetPorts.name,onChange:this.updateNetworkPorts,InputProps:{inputProps:{min:0}}})),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(b.a,{type:"number",id:"standard-basic",variant:"outlined",label:xe.powerPorts.label,name:xe.powerPorts.name,onChange:this.props.updateModelCreator,InputProps:{inputProps:{min:0}}})),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(b.a,{id:"standard-basic",variant:"outlined",label:xe.cpu.label,name:xe.cpu.name,onChange:this.props.updateModelCreator})),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(b.a,{type:"number",id:"standard-basic",variant:"outlined",label:xe.memory.label,name:xe.memory.name,onChange:this.props.updateModelCreator,InputProps:{inputProps:{min:0}},style:{width:"100%"}})),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(b.a,{id:"standard-basic",variant:"outlined",label:xe.storage.label,name:xe.storage.name,onChange:this.props.updateModelCreator})),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(b.a,{id:"standard-basic",variant:"outlined",label:xe.comment.label,name:xe.comment.name,onChange:this.props.updateModelCreator})),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(W.a,null,"Display Color"),s.a.createElement(he.CompactPicker,{color:this.state.color,onChange:this.updateColor})),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(Se.a,{className:t.root,subheader:s.a.createElement(ke.a,{component:"div",id:"nested-list-subheader"},"Network Ports"),style:{maxHeight:"30vh",overflow:"auto"}},Array.from({length:this.state.numPorts},(function(e,t){return t})).map((function(t,a){var n="list-label-".concat(e.state.networkPorts[a]);return s.a.createElement(ye.a,{key:a,role:void 0,dense:!0,button:!0},s.a.createElement(Ce.a,{id:n,primary:"Port "+(a+1).toString()}),s.a.createElement(b.a,{defaultValue:e.state.networkPorts[a],onChange:function(t){return e.updatePort(a,t)}}))})),0===this.state.numPorts?s.a.createElement(ye.a,{key:"add-items",role:void 0,dense:!0},s.a.createElement(Ce.a,{id:"add-items-label",primary:"Enter the number of network ports above"})):null)),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(E.a,{variant:"contained",color:"primary",onClick:this.create,style:{width:"100%"}},"Create")),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(E.a,{variant:"contained",color:"secondary",onClick:this.closeModal,style:{width:"100%"}},"Cancel"))))))),s.a.createElement(ge.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:this.state.showImportModal,onClose:this.closeImportModal,closeAfterTransition:!0},s.a.createElement(Ee.a,{in:this.state.showImportModal},s.a.createElement(fe.a,{open:this.state.showImportModal},s.a.createElement("div",{className:t.grid},null===this.state.importedFile?s.a.createElement(f.a,{container:!0,spacing:1,direction:"row",justify:"flex-start",alignItems:"center"},s.a.createElement(f.a,{item:!0,xs:9},s.a.createElement(W.a,{variant:"h5"},"Import Models")),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(E.a,{onClick:this.closeImportModal,style:{width:"100%"}},"Close")),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(we.a,{onDrop:function(t){e.setState({importedFile:t[0]})},accept:".csv"},(function(e){var t=e.getRootProps,a=e.getInputProps;return s.a.createElement("section",null,s.a.createElement("div",t(),s.a.createElement("input",a()),s.a.createElement(ie.a,{elevation:3,style:{height:"100px"}},s.a.createElement(f.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",style:{padding:"30px"}},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(W.a,{align:"center",variant:"h6"},"Drag and drop file here!"))))))}))),s.a.createElement(f.a,{container:!0,item:!0,direciton:"row",justify:"center",alignItems:"center",xs:12},s.a.createElement("hr",{style:{width:"20vw"}}),s.a.createElement(W.a,{color:"textSecondary"},"Or"),s.a.createElement("hr",{style:{width:"20vw"}})),s.a.createElement(f.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center",xs:12},s.a.createElement(E.a,{variant:"contained",color:"primary",style:{width:"40%"}},"Choose File"))):null)))))}}]),t}(s.a.Component),_e=Object(ne.a)((function(e){return{root:{flexGrow:1},modal:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",margin:"0 auto",overflow:"scroll"},grid:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3),width:"50%"},progress:{display:"flex","& > * + *":{marginLeft:e.spacing(2)}}}}))(Me),Ne=a(552),je=a(556),Ae=a(555),Pe=a(551),De=a(553),Ie=a(554),Le=a(546),Te=a(132),Ue=a.n(Te),Re=a(249),Ve=a.n(Re),Fe=a(131),Be=a.n(Fe),We=a(250),He=a.n(We),Ge=a(557),Ke="There was an error in the backend. Could not perform the given model operation at this time.",qe="models/";function ze(e,t){return{label:t,name:e}}var Je,Xe,Ye={vendor:ze("vendor","Vendor"),modelNumber:ze("model_number","Model Number"),height:ze("height","Height"),displayColor:ze("display_color","Display Color"),ethernetPorts:ze("ethernet_ports","Network Ports"),powerPorts:ze("power_ports","Power Ports"),cpu:ze("cpu","CPU"),memory:ze("memory","Memory"),storage:ze("storage","Storage"),comment:ze("comment","Comment")},Qe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).updateColor=function(e){a.setState({color:e}),a.props.updateModelColor(e.hex)},a.showDetailedView=function(e){a.setState({row:e,showDetailedView:!0,detailViewLoading:!0,color:null===e["Display Color"]?"#000000":e["Display Color"],networkPorts:null===e["Network Ports"]?[]:e["Network Ports"],numPorts:null===e["Network Ports"]?0:e["Network Ports"].length}),a.detailViewModel(e.Vendor,e["Model Number"])},a.detailViewModel=function(e,t){p.a.post(A(qe,P.detailView),{vendor:e,model_number:t}).then((function(e){var t=e.data.models[0];a.setState({detailedValues:t,detailViewLoading:!1,originalVendor:t.vendor,originalModelNumber:t.model_number,originalHeight:t.height})})).catch((function(e){this.setState({showStatus:!0,statusMessage:Ke,statusSeverity:"error"})}))},a.closeDetailedView=function(){a.setState({showDetailedView:!1,row:null,color:"#000000",originalVendor:"",originalModelNumber:"",originalHeight:""})},a.showDeleteModal=function(e){a.setState({showDeleteModal:!0,originalVendor:e.Vendor,originalModelNumber:e["Model Number"]})},a.closeDeleteModal=function(){a.setState({showDeleteModal:!1,originalVendor:"",originalModelNumber:"",originalHeight:""})},a.delete=function(){a.props.deleteModel(a.state.originalVendor,a.state.originalModelNumber),a.closeDeleteModal()},a.clickInfo=function(e,t){a.setState({popoverAnchor:e.target,networkPorts:t})},a.clickComment=function(e,t){a.setState({commentPopover:e.target,comment:t})},a.handlePopoverClose=function(){a.setState({popoverAnchor:null})},a.handleCommentPopoverClose=function(){a.setState({commentPopover:null})},a.updateNetworkPorts=function(e){for(var t=""===e.target.value?0:e.target.value,n=[],s=1;s<=t;s++)n.push(s.toString());a.setState({networkPorts:n,numPorts:t}),a.props.updateModelEdited(e)},a.updatePort=function(e,t){var n=a.state.networkPorts;n[e]=t.target.value,a.setState({networkPorts:n})},a.save=function(){a.props.editModel(a.state.originalVendor,a.state.originalModelNumber,a.state.originalHeight,a.state.detailedValues,a.state.networkPorts),a.closeDetailedView()},a.updateModelEdited=function(e){a.state.detailedValues[e.target.name]=e.target.value,a.forceUpdate()},a.state={popoverAnchor:null,commentPopover:null,networkPorts:[],numPorts:0,showDetailedView:!1,showDeleteModal:!1,row:null,comment:"",color:"#000",detailViewLoading:!1,detailedValues:{vendor:"",model_number:"",height:"",display_color:"",ethernet_ports:[],power_ports:"",cpu:"",memory:"",storage:"",comment:""},originalVendor:"",originalModelNumber:"",originalHeight:""},p.a.defaults.headers.common.token=a.props.token,p.a.defaults.headers.common.privilege=a.props.privilege,a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return s.a.createElement("div",null,s.a.createElement(Pe.a,{component:ie.a},s.a.createElement(Ne.a,{style:{minWidth:1e3},"aria-label":"simple table"},s.a.createElement(De.a,null,s.a.createElement(Ie.a,null,this.props.columns.map((function(e){return s.a.createElement(Ae.a,{align:"center"},s.a.createElement("span",{id:e,style:{fontWeight:"bold"}},e))})))),s.a.createElement(je.a,null,this.props.vals.map((function(t,a){return s.a.createElement(Ie.a,{id:a,hover:!0},e.props.privilege===_.ADMIN?s.a.createElement(Ae.a,{scope:"row",align:"center"},s.a.createElement(E.a,null,s.a.createElement(Be.a,{onClick:function(){return e.showDetailedView(t)}})),s.a.createElement(E.a,null,s.a.createElement(Ue.a,{onClick:function(){return e.showDeleteModal(t)}}))):null,e.props.keys.map((function(a){return"Display Color"===a?s.a.createElement(Ae.a,{scope:"row",align:"center",style:{backgroundColor:t[a]}}):"Network Ports"===a?s.a.createElement(Ae.a,{scope:"row",align:"center"},null===t[a]?"":t[a].length,null==t[a]?null:s.a.createElement(Ve.a,{style:{margin:"5px"},onClick:function(n){e.clickInfo(n,t[a])}})):"Comment"==a?null!==t.Comment&&t.Comment.length>0?s.a.createElement(Ae.a,{scope:"row",align:"center"},s.a.createElement(E.a,null,s.a.createElement(He.a,{onClick:function(a){return e.clickComment(a,t.Comment)}}))):s.a.createElement(Ae.a,{scope:"row",align:"center"}):s.a.createElement(Ae.a,{scope:"row",align:"center"},t[a])})))}))))),s.a.createElement(Le.a,{id:Boolean(this.state.popoverAnchor)?"simple-popover":void 0,open:Boolean(this.state.popoverAnchor),anchorEl:this.state.popoverAnchor,onClose:this.handlePopoverClose,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},s.a.createElement(Se.a,{className:t.root,subheader:s.a.createElement(ke.a,{component:"div",id:"nested-list-subheader"},"Network Ports")},this.state.networkPorts.map((function(e){var t="checkbox-list-label-".concat(e);return s.a.createElement(ye.a,{key:e,role:void 0,dense:!0,button:!0},s.a.createElement(Ce.a,{id:t,primary:e}))})))),s.a.createElement(Le.a,{id:Boolean(this.state.commentPopover)?"simple-popover":void 0,open:Boolean(this.state.commentPopover),anchorEl:this.state.commentPopover,onClose:this.handleCommentPopoverClose,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},s.a.createElement(W.a,{variant:"body1",style:{padding:"30px"}},this.state.comment)),s.a.createElement(ge.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:this.state.showDetailedView,onClose:this.closeDetailedView,closeAfterTransition:!0},s.a.createElement(Ee.a,{in:this.state.showDetailedView},s.a.createElement(fe.a,{open:this.state.showDetailedView},s.a.createElement("div",{className:t.grid},this.state.detailViewLoading?s.a.createElement(Ge.a,null):s.a.createElement(f.a,{container:!0,spacing:1,direction:"row",justify:"flex-start",alignItems:"center"},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(W.a,{variant:"h5"},"Model Details")),s.a.createElement(f.a,{item:!0,xs:12,sm:12,md:6,lg:6},s.a.createElement(me.a,{id:"select-vendor",options:this.props.options,defaultValue:null==this.state.detailedValues?"":this.state.detailedValues.vendor,includeInputInList:!0,freeSolo:!0,renderInput:function(t){return s.a.createElement(b.a,Object.assign({},t,{label:Ye.vendor.label,name:Ye.vendor.name,onChange:e.updateModelEdited,onBlur:e.updateModelEdited,variant:"outlined",fullWidth:!0}))}})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(b.a,{id:"standard-basic",variant:"outlined",label:Ye.modelNumber.label,name:Ye.modelNumber.name,defaultValue:null==this.state.detailedValues?"":this.state.detailedValues.model_number,onChange:this.updateModelEdited})),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(b.a,{type:"number",id:"standard-basic",variant:"outlined",label:Ye.height.label,name:Ye.height.name,defaultValue:null==this.state.detailedValues?"":this.state.detailedValues.height,onChange:this.updateModelEdited,InputProps:{inputProps:{min:1,max:42}},style:{width:"100%"}})),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(b.a,{type:"number",id:"standard-basic",variant:"outlined",label:Ye.ethernetPorts.label,name:Ye.ethernetPorts.name,defaultValue:null==this.state.detailedValues?"":null==this.state.detailedValues.ethernet_ports?"":this.state.detailedValues.ethernet_ports.length,onChange:this.updateNetworkPorts,InputProps:{inputProps:{min:0}}})),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(b.a,{type:"number",id:"standard-basic",variant:"outlined",label:Ye.powerPorts.label,name:Ye.powerPorts.name,defaultValue:null==this.state.detailedValues?"":this.state.detailedValues.power_ports,onChange:this.updateModelEdited,InputProps:{inputProps:{min:0}}})),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(b.a,{id:"standard-basic",variant:"outlined",label:Ye.cpu.label,name:Ye.cpu.name,defaultValue:null==this.state.detailedValues?"":this.state.detailedValues.cpu,onChange:this.updateModelEdited})),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(b.a,{type:"number",id:"standard-basic",variant:"outlined",label:Ye.memory.label,name:Ye.memory.name,defaultValue:null==this.state.detailedValues?"":this.state.detailedValues.memory,onChange:this.updateModelEdited,InputProps:{inputProps:{min:0}},style:{width:"100%"}})),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(b.a,{id:"standard-basic",variant:"outlined",label:Ye.storage.label,name:Ye.storage.name,defaultValue:null==this.state.detailedValues?"":this.state.detailedValues.storage,onChange:this.updateModelEdited})),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(b.a,{id:"standard-basic",variant:"outlined",label:Ye.comment.label,name:Ye.comment.name,defaultValue:null==this.state.detailedValues?"":this.state.detailedValues.comment,onChange:this.updateModelEdited})),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(W.a,null,"Display Color"),s.a.createElement(he.CompactPicker,{color:this.state.color,onChange:this.updateColor})),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(Se.a,{className:t.root,subheader:s.a.createElement(ke.a,{component:"div",id:"nested-list-subheader"},"Network Ports"),style:{maxHeight:"30vh",overflow:"auto"}},Array.from({length:this.state.numPorts},(function(e,t){return t})).map((function(t,a){var n="list-label-".concat(e.state.networkPorts[a]);return s.a.createElement(ye.a,{key:a,role:void 0,dense:!0,button:!0},s.a.createElement(Ce.a,{id:n,primary:"Port "+(a+1).toString()}),s.a.createElement(b.a,{defaultValue:e.state.networkPorts[a],onChange:function(t){return e.updatePort(a,t)}}))})),0===this.state.numPorts?s.a.createElement(ye.a,{key:"add-items",role:void 0,dense:!0},s.a.createElement(Ce.a,{id:"add-items-label",primary:"Enter the number of network ports above"})):null)),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(E.a,{variant:"contained",color:"primary",onClick:this.save,style:{width:"100%"}},"Save")),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(E.a,{variant:"contained",color:"secondary",onClick:this.closeDetailedView,style:{width:"100%"}},"Cancel"))))))),s.a.createElement(ge.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:this.state.showDeleteModal,onClose:this.closeDeleteModal,closeAfterTransition:!0},s.a.createElement(Ee.a,{in:this.state.showDeleteModal},s.a.createElement(fe.a,{open:this.state.showDeleteModal},s.a.createElement("div",{className:t.grid},s.a.createElement(f.a,{container:!0,spacing:1,direction:"row",justify:"flex-start",alignItems:"center"},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(W.a,{variant:"h5"},"Are you sure?")),s.a.createElement(f.a,{item:!0,xs:12,sm:12,md:6,lg:6},s.a.createElement(W.a,{variant:"body1"},"Doing this will remove the model permanently.")),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(E.a,{variant:"contained",color:"secondary",onClick:this.delete,style:{width:"100%"}},"Yes")),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(E.a,{variant:"contained",color:"primary",onClick:this.closeDeleteModal,style:{width:"100%"}},"No"))))))))}}]),t}(s.a.Component),Ze=Object(ne.a)((function(e){return{root:{flexGrow:1},modal:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",margin:"0 auto",overflow:"scroll"},grid:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3),width:"50%"},progress:{display:"flex","& > * + *":{marginLeft:e.spacing(2)}}}}))(Qe),$e=["Vendor","Model Number","Height","Display Color","Network Ports","Power Ports","CPU","Memory","Storage","Comment"],et=["Actions","Vendor","Model Number","Height","Display Color","Network Ports","Power Ports","CPU","Memory","Storage","Comment"],tt={vendor:"Vendor",model_number:"Model Number",height:"Height",display_color:"Display Color",ethernet_ports:"Network Ports",power_ports:"Power Ports",cpu:"CPU",memory:"Memory",storage:"Storage",comment:"Comment"},at="models/",nt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).createModel=function(e){p.a.post(A(at,P.create),Object(h.a)({vendor:a.state.createdModel[D.Vendor],model_number:a.state.createdModel[D.model_number],height:a.state.createdModel[D.Height],display_color:a.state.createdModel[D.display_color],ethernet_ports:a.state.createdModel[D.ethernet_ports],power_ports:a.state.createdModel[D.power_ports],cpu:a.state.createdModel[D.CPU],memory:a.state.createdModel[D.Memory],storage:a.state.createdModel[D.Storage],comment:a.state.createdModel[D.Comment]},"ethernet_ports",e)).then((function(e){"success"===e.data.message?(a.setState({showStatus:!0,statusMessage:"Successfully created model",statusSeverity:"success",createdModel:{vendor:"",model_number:"",height:"",display_color:"",ethernet_ports:"",power_ports:"",cpu:"",memory:"",storage:"",comment:""},showCreateModal:!1}),a.getVendorList(),a.searchModels()):a.setState({createStatusOpen:!0,createStatusMessage:e.data.message,createStatusSeverity:"error"})})).catch(a.setState({createStatusOpen:!0,createStatusMessage:Ke,createStatusSeverity:"error"}))},a.editModel=function(e,t,n,s,r){p.a.post(A(at,P.edit),{vendorOriginal:e,model_numberOriginal:t,heightOriginal:n,vendor:s[D.Vendor],model_number:s[D.model_number],height:s[D.Height],display_color:s[D.display_color],ethernet_ports:r,power_ports:s[D.power_ports],cpu:s[D.CPU],memory:s[D.Memory],storage:s[D.Storage],comment:s[D.Comment]}).then((function(e){"success"===e.data.message?(a.setState({showStatus:!0,statusSeverity:"success",statusMessage:"Successfully edited model",showDetailedView:!1}),a.getVendorList(),a.searchModels()):a.setState({detailStatusOpen:!0,detailStatusMessage:e.data.message,detailStatusSeverity:"error"})})).catch(a.setState({detailStatusOpen:!0,detailStatusMessage:Ke,detailStatusSeverity:"error"}))},a.deleteModel=function(e,t){console.log(e),p.a.post(A(at,P.delete),{vendor:e,model_number:t}).then((function(e){"success"===e.data.message?(a.setState({showStatus:!0,statusSeverity:"success",statusMessage:"Successfully deleted model"}),a.getVendorList(),a.searchModels()):a.setState({showStatus:!0,statusMessage:e.data.message,statusSeverity:"error"})})).catch(a.setState({showStatus:!0,statusMessage:Ke,statusSeverity:"error"}))},a.detailViewModel=function(e,t){p.a.post(A(at,P.detailView),{vendor:e,model_number:t}).then((function(e){a.setState({detailedValues:e.data.models[0],detailViewLoading:!1})})).catch((function(e){this.setState({showStatus:!0,statusMessage:Ke,statusSeverity:"error"})})),a.setState({viewVendor:"",viewModel:""})},a.searchModels=function(){p.a.post(A(at,P.search),{filter:{vendor:a.state.searchVendor,model_number:a.state.searchModelNum,height:a.state.searchHeight}}).then((function(e){var t=void 0===e.data.models?[]:e.data.models,n=[];Object.values(t).forEach((function(e){var t={};Object.keys(e).forEach((function(a){a in tt?t[tt[a]]=e[a]:t[a]=e[a]})),n.push(t)})),a.setState({rows:n,items:t})})),a.setState({searchText:""})},a.getVendorList=function(){p.a.get(A(at,P.VENDOR_VALUES),{}).then((function(e){return a.setState({vendorsList:e.data.results})})),a.setState({madeVendorQuery:!0})},a.sendUploadedFile=function(e){p.a.post(A(at,P.UPLOAD_FILE),e).then((function(e){"success"===e.data.message?(a.setState({showStatus:!0,statusMessage:e.data.summary,statusSeverity:"success",showImportModal:!1}),a.searchModels()):a.setState({showStatus:!0,statusMessage:e.data.message,statusSeverity:"error"})}))},a.downloadTable=function(){p.a.post(A(at,P.EXPORT_FILE),{filter:{vendor:a.state.searchVendor,model_number:a.state.searchModelNum,height:a.state.searchHeight}}).then((function(e){a.setState({csvData:e.data.csvData}),a.csvLink.link.click()}))},a.search=function(e){a.setState({searchVendor:e.vendor,searchModelNum:e.model_number,searchHeight:e.height},a.searchModels)},a.searchAll=function(){a.search({vendor:"",model_number:"",height:""})},a.openCreateModal=function(){a.setState({showCreateModal:!0})},a.openImportModal=function(){a.setState({showImportModal:!0})},a.showDetailedView=function(e){a.setState({detailViewLoading:!0});var t=e.Vendor,n=e["Model Number"];a.detailViewModel(t,n)},a.closeCreateModal=function(){a.setState({showCreateModal:!1})},a.closeImportModal=function(){a.setState({showImportModal:!1})},a.closeDetailedView=function(){a.setState({showDetailedView:!1})},a.updateModelCreator=function(e){a.state.createdModel[e.target.name]=e.target.value,a.forceUpdate()},a.updateModelColor=function(e){a.state.createdModel.display_color=e,a.forceUpdate()},a.updateModelColorDetails=function(e){a.state.detailedValues.display_color=e,a.forceUpdate()},a.updateSearchText=function(e){a.setState({searchText:e.target.value})},a.closeShowStatus=function(e,t){"clickaway"!==t&&a.setState({showStatus:!1})},a.createStatusClose=function(e,t){"clickaway"!==t&&a.setState({createStatusOpen:!1})},a.detailStatusClose=function(e,t){"clickaway"!==t&&a.setState({detailStatusOpen:!1})},a.state={showCreateModal:!1,showImportModal:!1,items:[],rows:[],createdModel:{vendor:"",model_number:"",height:"",display_color:"",ethernet_ports:"",power_ports:"",cpu:"",memory:"",storage:"",comment:""},createdVendor:"",createdModelNum:"",createdHeight:"",createdDispClr:"",createdEthPorts:"",createdPwrPorts:"",createdCPU:"",createdMem:"",createdStorage:"",createdComments:"",deleteVendor:"",deleteModel:"",viewVendor:"",viewModel:"",searchText:"",searchVendor:"",searchModelNum:"",searchHeight:"",csvData:"",statusOpen:!1,statusSeverity:"",statusMessage:"",detailStatusOpen:!1,detailStatusSeverity:"",detailStatusMessage:"",createStatusOpen:!1,createStatusSeverity:"",createStatusMessage:"",vendorsList:[],madeVendorQuery:!1},p.a.defaults.headers.common.token=a.props.token,p.a.defaults.headers.common.privilege=a.props.privilege,a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.searchModels(),this.getVendorList()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(f.a,{container:!0,spacing:5,direction:"row",justify:"flex-start",alignItems:"center",style:{margin:"0px",maxWidth:"95vw"}},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(W.a,{variant:"h4"},"Models")),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},this.props.privilege==_.ADMIN?s.a.createElement("div",null,s.a.createElement(_e,{statusOpen:this.state.createStatusOpen,statusSeverity:this.state.createStatusSeverity,statusClose:this.createStatusClose,statusMessage:this.state.createStatusMessage,showCreateModal:this.state.showCreateModal,closeCreateModal:this.closeCreateModal,createModel:this.createModel,updateModelCreator:this.updateModelCreator,options:this.state.vendorsList,useAutocomplete:!0,updateModelColor:this.updateModelColor})):null),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:6,lg:6},s.a.createElement(pe,{updateSearchText:this.updateSearchText,search:this.search,filters:$e,options:this.state.vendorsList,useAutocomplete:!0})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},this.props.privilege===_.ADMIN?s.a.createElement("div",null,s.a.createElement(ce,{downloadTable:this.downloadTable,showAll:this.searchAll}),s.a.createElement(re.CSVLink,{data:this.state.csvData,filename:"models.csv",className:"hidden",ref:function(t){return e.csvLink=t},target:"_blank"})):null),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(Ze,{columns:this.props.privilege==_.ADMIN?et:$e,vals:this.state.rows,privilege:this.props.privilege,token:this.props.token,keys:$e,filters:this.props.privilege==_.ADMIN?et:$e,updateModelColor:this.updateModelColorDetails,deleteModel:this.deleteModel,editModel:this.editModel}))))}}]),t}(s.a.Component);!function(e){e.create="create/",e.delete="delete/",e.edit="edit/",e.view="view/",e.detailView="detailView/",e.search="search/"}(Je||(Je={})),function(e){e.Username="username",e.Password="password",e.Email="email",e.display_name="display_name",e.Privilege="privilege"}(Xe||(Xe={}));var st,rt,it=a(512),ot=a(514),lt=a(506),ct=a(574),mt=a(558),ut=a(559),dt=a(33),pt=a.n(dt),ht=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={filters:{}},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"updateSearchText",value:function(e){this.state.filters.hasOwnProperty(e.target.id),this.state.filters[e.target.id]=e.target.value,this.forceUpdate()}},{key:"search",value:function(){this.props.search(this.state.filters)}},{key:"render",value:function(){return s.a.createElement(ct.a,null,s.a.createElement(mt.a,{expandIcon:s.a.createElement(pt.a,null)},s.a.createElement(W.a,null,"Search")),s.a.createElement(ut.a,null,s.a.createElement(f.a,{container:!0,spacing:1,direction:"row",justify:"flex-start",alignItems:"center"},s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(b.a,{id:"username",inputProps:{"aria-label":"search"},variant:"outlined",label:"Username",placeholder:"Username",name:"username",onChange:this.updateSearchText.bind(this)})),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(b.a,{id:"standard-basic",variant:"outlined",label:"Display Name",name:"display_name",onChange:this.props.updateModelCreator})),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(b.a,{id:"standard-basic",variant:"outlined",label:"Email",name:"email",onChange:this.props.updateModelCreator,style:{width:"100%"}})),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(lt.a,{style:{minWidth:"200px"}},s.a.createElement(ot.a,{id:"privilege-select"},"Privilege"),s.a.createElement(it.a,{id:"privilege-select",onChange:this.props.updateModelCreator},s.a.createElement(ee.a,{value:"admin"},"Administrator"),s.a.createElement(ee.a,{value:"user"},"User")))),s.a.createElement(f.a,{container:!0,item:!0,direction:"column",justify:"center",alignItems:"center",xs:12},s.a.createElement(E.a,{variant:"contained",color:"primary",onClick:this.search.bind(this),style:{width:"100%",marginTop:"20px"}},"Search")))))}}]),t}(s.a.Component),gt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={showConfirmationBox:!1},a.closeModal=a.closeModal.bind(Object(g.a)(a)),a.confirmDelete=a.confirmDelete.bind(Object(g.a)(a)),a.deleteItem=a.deleteItem.bind(Object(g.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"confirmDelete",value:function(){this.setState({showConfirmationBox:!0})}},{key:"closeModal",value:function(){this.setState({showConfirmationBox:!1})}},{key:"deleteItem",value:function(){this.setState({showConfirmationBox:!1}),this.props.delete()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,this.props.showDetailedView?s.a.createElement(ct.a,null,s.a.createElement(mt.a,{expandIcon:s.a.createElement(pt.a,null)},s.a.createElement(W.a,null,"Create")),s.a.createElement(ut.a,null,s.a.createElement(V,{open:this.props.statusOpen,severity:this.props.statusSeverity,closeStatus:this.props.statusClose,message:this.props.statusMessage}),this.props.loading?s.a.createElement(Ge.a,null):s.a.createElement("div",null,this.props.inputs.map((function(t){return s.a.createElement(b.a,{name:t,disabled:e.props.disabled,id:"standard-basic",label:t,onChange:e.props.updateModelEdited,defaultValue:e.props.defaultValues[t]})})),this.props.disabled?null:s.a.createElement("div",null,s.a.createElement(E.a,{variant:"contained",color:"primary",onClick:this.props.edit,disabled:this.state.showConfirmationBox},"Save"),s.a.createElement(E.a,{variant:"contained",color:"primary",onClick:this.confirmDelete,disabled:this.state.showConfirmationBox},"Delete")),s.a.createElement(E.a,{variant:"contained",color:"primary",onClick:this.props.closeDetailedView,disabled:this.state.showConfirmationBox},"Close"),this.state.showConfirmationBox?s.a.createElement("div",null,"Are you sure you wish to delete?",s.a.createElement(E.a,{variant:"contained",color:"primary",onClick:this.deleteItem},"Yes"),s.a.createElement(E.a,{variant:"contained",color:"primary",onClick:this.closeModal},"No")):null))):null)}}]),t}(s.a.Component),ft=(a(452),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement(ct.a,null,s.a.createElement(mt.a,{expandIcon:s.a.createElement(pt.a,null)},s.a.createElement(W.a,null,"Create")),s.a.createElement(ut.a,null,s.a.createElement(f.a,{container:!0,spacing:1,direction:"row",justify:"flex-start",alignItems:"center"},s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(b.a,{id:"standard-basic",variant:"outlined",label:"Username",name:"username",onChange:this.props.updateModelCreator})),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(b.a,{id:"standard-basic",variant:"outlined",label:"Display Name",name:"display_name",onChange:this.props.updateModelCreator})),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(b.a,{id:"standard-basic",variant:"outlined",label:"Password",name:"password",type:"password",onChange:this.props.updateModelCreator})),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(b.a,{id:"standard-basic",variant:"outlined",label:"Email",name:"email",type:"email",onChange:this.props.updateModelCreator})),s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(lt.a,{style:{minWidth:"200px"},gutterbottom:"true"},s.a.createElement(ot.a,{id:"privilege-select"},"Privilege"),s.a.createElement(it.a,{name:"privilege",id:"privilege-select",onChange:this.props.updateModelCreator},s.a.createElement(ee.a,{value:"admin"},"Administrator"),s.a.createElement(ee.a,{value:"user"},"User")))),s.a.createElement(f.a,{container:!0,item:!0,direction:"column",justify:"center",alignItems:"center",xs:12},s.a.createElement(E.a,{variant:"contained",onClick:this.props.createModel,style:{width:"100%",marginTop:"20px",backgroundColor:"green",color:"white"}},"Create")))))}}]),t}(s.a.Component)),Et=a(251),bt=a.n(Et),vt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).beginEditing=function(){a.setState({canEdit:!0})},a.endEditing=function(){a.setState({canEdit:!1})},a.state={canEdit:!1},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"showDetailedView",value:function(e){this.props.showDetailedView(e)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(Pe.a,{component:ie.a},s.a.createElement(Ne.a,{style:{minWidth:1e3},"aria-label":"simple table"},s.a.createElement(De.a,null,s.a.createElement(Ie.a,null,this.props.columns.map((function(e){return s.a.createElement(Ae.a,{align:"center"},s.a.createElement("span",{id:e,style:{fontWeight:"bold"}},e))})))),s.a.createElement(je.a,null,this.props.vals.map((function(t,a){return s.a.createElement(Ie.a,{id:a},e.props.privilege===_.ADMIN?s.a.createElement(Ae.a,{scope:"row",align:"center"},s.a.createElement(E.a,null,e.state.canEdit?s.a.createElement(bt.a,{onClick:e.endEditing}):s.a.createElement(Be.a,{onClick:e.beginEditing})),s.a.createElement(E.a,null,s.a.createElement(Ue.a,null))):null,e.props.keys.map((function(a){return"Privilege"===a?e.state.canEdit?s.a.createElement(Ae.a,{scope:"row",align:"center"},s.a.createElement(it.a,{id:"privilege-select",defaultValue:t[a]},s.a.createElement(ee.a,{value:"admin"},"Administrator"),s.a.createElement(ee.a,{value:"user"},"User"))):s.a.createElement(Ae.a,{scope:"row",align:"center"},"admin"===t[a]?"Administrator":"User"):s.a.createElement(Ae.a,{scope:"row",align:"center"},t[a])})))}))))))}}]),t}(s.a.Component),wt="There was an error in the backend. Could not perform the given user operation at this time.",St=["username","email","display_name","privilege","password"],yt=["Username","Email","Display Name","Privilege"],Ct=["Actions","Username","Email","Display Name","Privilege"],kt={username:"Username",email:"Email",display_name:"Display Name",privilege:"Privilege"},Ot="users/",xt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).createUser=function(){p.a.post(A(Ot,Je.create),{username:a.state.createdUser[Xe.Username],password:a.state.createdUser[Xe.Password],display_name:a.state.createdUser[Xe.display_name],email:a.state.createdUser[Xe.Email],privilege:a.state.createdUser[Xe.Privilege]}).then((function(e){"success"===e.data.message?(a.setState({statusOPen:!0,statusMessage:"Successfully created user",statusSeverity:"success",createdUser:{username:"",password:"",display_name:"",email:"",privilege:""},showCreateModal:!1}),a.searchUsers()):a.setState({statusOpen:!0,statusMessage:e.data.message,statusSeverity:"error"})})).catch(a.setState({statusOpen:!0,statusMessage:wt,statusSeverity:"error"}))},a.editUser=function(){p.a.post(A(Ot,Je.edit),{username_original:a.state.originalUsername,username:a.state.detailedValues[Xe.Username],display_name:a.state.detailedValues[Xe.display_name],email:a.state.detailedValues[Xe.Email],privilege:a.state.detailedValues[Xe.Privilege]}).then((function(e){"success"===e.data.message?(a.setState({detailStatusOpen:!0,detailStatusMessage:"Successfully edited user",detailStatusSeverity:"success",originalUsername:"",detailedValues:{username:"",display_name:"",email:"",privilege:""},showDetailedView:!1}),a.searchUsers()):a.setState({detailStatusOpen:!0,detailStatusMessage:e.data.message,detailStatusSeverity:"error"})})).catch(a.setState({detailStatusOpen:!0,detailStatusMessage:wt,detailStatusSeverity:"error"}))},a.deleteUser=function(){p.a.post(A(Ot,Je.delete),{username:a.state.originalUsername}).then((function(e){"success"===e.data.message?(a.setState({statusOpen:!0,statusMessage:"Successfully deleted user",statusSeverity:"success",deleteUsername:"",showDetailedView:!1}),a.searchUsers()):a.setState({showStatus:!0,statusMessage:e.data.message,statusSeverity:"error"})})).catch(a.setState({showStatus:!0,statusMessage:wt,statusSeverity:"error"}))},a.detailViewUser=function(e){p.a.post(A(Ot,Je.detailView),{username:e}).then((function(e){return a.setState({detailedValues:e.data.user,detailViewLoading:!1})})).catch(a.setState({showStatus:!0,statusMessage:wt,statusSeverity:"error"})),a.setState({viewUser:""})},a.searchUsers=function(){p.a.post(A(Ot,Je.search),{filter:{username:a.state.searchUsernm,email:a.state.searchEml,display_name:a.state.searchDspNm,privilege:a.state.searchPriv}}).then((function(e){var t=void 0===e.data.users?[]:e.data.users,n=[];Object.values(t).forEach((function(e){var t={};Object.keys(e).forEach((function(a){a in kt?t[kt[a]]=e[a]:t[a]=e[a]})),n.push(t)})),a.setState({items:n})})),a.setState({initialized:!0})},a.search=function(e){a.setState({searchUsernm:e.username,searchEml:e.email,searchDspNm:e.display_name,searchPriv:e.privilege},a.searchUsers)},a.downloadTable=function(){a.csvLink.link.click()},a.openCreateModal=function(){a.setState({showCreateModal:!0})},a.openImportModal=function(){a.setState({showImportModal:!0})},a.showDetailedView=function(e){a.setState({showDetailedView:!0,detailViewLoading:!0,originalUsername:a.state.items[e].username});var t=a.state.items[e].username;a.detailViewUser(t)},a.closeCreateModal=function(){a.setState({showCreateModal:!1})},a.closeImportModal=function(){a.setState({showImportModal:!1})},a.closeDetailedView=function(){a.setState({showDetailedView:!1})},a.updateUserCreator=function(e){var t=a.state.createdUser;t[e.target.name]=e.target.value,a.setState({createdUser:t}),a.forceUpdate()},a.updateUserEdited=function(e){var t=a.state.detailedValues;t[e.target.name]=e.target.value,a.setState({detailedValues:t}),a.forceUpdate()},a.closeShowStatus=function(){a.setState({showStatus:!1})},a.createStatusClose=function(){a.setState({createStatusOpen:!1})},a.detailStatusClose=function(){a.setState({detailStatusOpen:!1})},a.state={showCreateModal:!1,showImportModal:!1,items:[],createdUser:{username:"",password:"",display_name:"",email:"",privilege:""},statusOpen:!1,statusSeverity:"",statusMessage:"",detailStatusOpen:!1,detailStatusSeverity:"",detailStatusMessage:"",createStatusOpen:!1,createStatusSeverity:"",createStatusMessage:"",searchUsernm:"",searchEml:"",searchDspNm:"",searchPriv:"",deleteUsername:"",viewUser:"",csvData:[],showDetailedView:!1,detailViewLoading:!1,detailedValues:{username:"",display_name:"",email:"",privilege:""},originalUsername:"",initialized:!1},p.a.defaults.headers.common.token=a.props.token,p.a.defaults.headers.common.privilege=a.props.privilege,a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.searchUsers()}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(V,{open:this.state.showStatus,severity:this.state.statusSeverity,closeStatus:this.closeShowStatus,message:this.state.statusMessage}),s.a.createElement(f.a,{container:!0,spacing:5,direction:"row",justify:"flex-start",alignItems:"center",style:{margin:"0px",maxWidth:"95vw"}},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(W.a,{variant:"h4"},"Users")),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},this.props.privilege===_.ADMIN?s.a.createElement("div",null,s.a.createElement(ft,{showCreateModal:this.state.showCreateModal,closeCreateModal:this.closeCreateModal,createModel:this.createUser,updateModelCreator:this.updateUserCreator,inputs:St,options:[],useAutocomplete:!1})):null),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(ht,{updateSearchText:this.updateSearchText,search:this.search,filters:yt})),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(vt,{columns:this.props.privilege==_.ADMIN?Ct:yt,vals:this.state.items,keys:yt,privilege:this.props.privilege,showDetailedView:this.showDetailedView,filters:this.props.privilege==_.ADMIN?Ct:yt})),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(gt,{showDetailedView:this.state.showDetailedView,closeDetailedView:this.closeDetailedView,inputs:yt,updateModelEdited:this.updateUserEdited,defaultValues:this.state.detailedValues,loading:this.state.detailViewLoading,edit:this.editUser,delete:this.deleteUser,disabled:this.props.privilege===_.USER}))))}}]),t}(s.a.Component),Mt=a(576);!function(e){e.MODEL="model",e.HOSTNAME="hostname",e.RACK="rack",e.RACK_U="rack_position",e.RACK_ORIGINAL="rackOriginal",e.RACK_U_ORIGINAL="rack_positionOriginal",e.OWNER="owner",e.COMMENT="comment",e.DATACENTER="datacenter_id",e.TAGS="tags",e.MAC_ADDRESS="mac_address",e.NETWORK_CONNECTIONS="network_connections",e.POWER_CONNECTIONS="power_connections",e.ASSET_NUMBER="asset_number"}(st||(st={})),function(e){e.create="create/",e.delete="delete/",e.edit="edit/",e.view="view/",e.detailView="detailView/",e.search="search/",e.GET_ALL_MODELS="assistedmodel/",e.GET_ALL_OWNERS="assistedowner/",e.GET_ALL_DATACENTERS="assisteddatacenter/",e.GET_ALL_HOSTNAME="assistedhostname/",e.UPLOAD_FILE="import/",e.EXPORT_FILE="export/",e.GET_NEXT_ASSET_NUM="nextAssetNumber/"}(rt||(rt={}));var _t="instances/",Nt="success",jt="error",At=a(561),Pt=a(564),Dt=a(20),It=a(252),Lt=a.n(It);function Tt(e,t){var a={},n=[];n.push({id:0,label:""+t,color:"#F5F5DC"}),a[t]=0;var s=[],r=1;return Object.entries(e).map((function(e){var i=Object(Dt.a)(e,2),o=i[0],l=i[1];void 0!==a[o]?s.push({from:t,to:a[o]}):(n.push({id:r,label:""+o,color:"#F0FFFF"}),s.push({from:0,to:r}),a[o]=r);var c=r+1;l.map((function(e){void 0!==a[e]?s.push({from:r,to:a[e]}):(n.push({id:c,label:""+e,color:"#7FFFD4"}),s.push({from:r,to:c}),a[e]=c,c++)})),r=c+1})),{nodes:n,edges:s}}var Ut,Rt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement(Lt.a,{graph:Tt(this.props.vals,this.props.host),options:{layout:{hierarchical:!0},edges:{color:"#000000"},height:"500px",interaction:{dragNodes:!1,dragView:!1}},events:{select:function(e){e.nodes,e.edges}},getNetwork:function(e){}})}}]),t}(s.a.Component),Vt=(document.getElementById("root"),Rt),Ft=a(562),Bt=a(570),Wt=a(575),Ht=a(563),Gt=a(508);function Kt(e){var t="";return(t=e.replace(/[^0-9A-Fa-f]*/g,"").toLowerCase()).length>12&&(t=t.substring(0,12)),1===t.length||2===t.length?t:3===t.length||4===t.length?t.substring(0,2)+":"+t.substring(2):5===t.length||6===t.length?t.substring(0,2)+":"+t.substring(2,4)+":"+t.substring(4):7===t.length||8===t.length?t.substring(0,2)+":"+t.substring(2,4)+":"+t.substring(4,6)+":"+t.substring(6):9===t.length||10===t.length?t.substring(0,2)+":"+t.substring(2,4)+":"+t.substring(4,6)+":"+t.substring(6,8)+":"+t.substring(8):11===t.length||12===t.length?t.substring(0,2)+":"+t.substring(2,4)+":"+t.substring(4,6)+":"+t.substring(6,8)+":"+t.substring(8,10)+":"+t.substring(10,12):t}function qt(e,t,a,n){return{label:t,name:e,showTooltip:a,description:n}}var zt={filter:(Ut={vendor:null,model_number:null,height:null,model:null,hostname:null,rack:null,rack_position:null,username:null,display_name:null,email:null,privilege:null},Object(h.a)(Ut,"model",null),Object(h.a)(Ut,"hostname",null),Object(h.a)(Ut,"starting_rack_letter",null),Object(h.a)(Ut,"ending_rack_letter",null),Object(h.a)(Ut,"starting_rack_number",null),Object(h.a)(Ut,"ending_rack_number",null),Object(h.a)(Ut,"rack",null),Object(h.a)(Ut,"rack_position",null),Ut),datacenter_name:""},Jt="search/",Xt="left",Yt="right",Qt=(s.a.forwardRef((function(e,t){return s.a.createElement(At.a,Object.assign({direction:"up",ref:t},e))})),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).getLists=function(){a.getModelList(),a.getOwnerList(),a.getDatacenterList(),a.getNextAssetNum(),a.getAssetList()},a.getModelList=function(){p.a.post(A(y,Jt),zt).then((function(e){var t=e.data.models,n=[],s={},r={};t.map((function(e){var t=e.vendor+" "+e.model_number;n.push(t),s[t]=e.ethernet_ports,r[t]=parseInt(e.power_ports)})),a.setState({loadingModels:!1,modelList:n,networkList:s,powerPortList:r})}))},a.getOwnerList=function(){p.a.post(A(C,Jt),zt).then((function(e){var t=[];e.data.users.map((function(e){return t.push(e.username+"/"+e.display_name)})),a.setState({loadingOwners:!1,ownerList:t})}))},a.getDatacenterList=function(){p.a.get(A(k,"all/")).then((function(e){var t=[];e.data.datacenters.map((function(e){return t.push(e.name)})),a.setState({loadingDatacenters:!1,datacenterList:t})}))},a.getNextAssetNum=function(){p.a.get(A(S,rt.GET_NEXT_ASSET_NUM)).then((function(e){return a.setState({loadingAssetNumber:!1,asset_number:e.data.asset_number})}))},a.getAssetList=function(){p.a.post(A(S,Jt),zt).then((function(e){var t=e.data.instances,n=[],s={};t.map((function(e){n.push(e.hostname),s[e.hostname]=e.model})),a.setState({loadingHostnames:!1,assetNumList:n,assetNumToModelList:s},a.availableNetworkConnections())}))},a.validJSON=function(e){return""!==e.model&&""!==e.owner&&""!==e.datacenter_name&&""!==e.rack&&-1!==e.rack_position&&e.asset_number>=1e5&&e.asset_number<=999999},a.createAsset=function(e){e.preventDefault();var t=a.createJSON();a.validJSON(t)&&p.a.post(A(_t,rt.create),t).then((function(e){console.log(e),e.data.message===Nt?a.closeModal():a.setState({statusOpen:!0,statusMessage:e.data.message,statusSeverity:jt})}))},a.updateModel=function(e){var t=e.target.value;if(""!==t){var n=a.state.networkList[t],s={};n.map((function(e){s[e]={mac_address:"",connection_hostname:"",connection_port:""}}))}else s={};a.setState({model:t,network_connections:s},(function(){a.validateForm()}))},a.updateHostname=function(e){a.setState({hostname:e.target.value},(function(){a.validateForm()}))},a.updateRack=function(e){var t=e.target.value;a.setState({rack:t},(function(){a.validateForm()}))},a.updateRackU=function(e){a.setState({rackU:e.target.value},(function(){a.validateForm()}))},a.updateOwner=function(e){a.setState({owner:e.target.value},(function(){a.validateForm()}))},a.updateComment=function(e){a.setState({comment:e.target.value},(function(){a.validateForm()}))},a.updateDatacenter=function(e){a.setState({datacenter_name:e.target.value},(function(){a.validateForm()}))},a.updateTags=function(e){a.setState({tags:e.target.value},(function(){a.validateForm()}))},a.changeNetworkMacAddress=function(e,t){var n=Kt(e.target.value);a.setState((function(e){var a=Object.assign({},e.network_connections);return a[t].mac_address=n,{network_connections:a}}),(function(){a.validateForm()}))},a.changeNetworkHostname=function(e,t){var n=void 0===e?"":e;a.setState((function(e){var a=Object.assign({},e.network_connections);return a[t].connection_hostname=n,{network_connections:a}}),(function(){a.getPortOptions(n),a.validateForm()}))},a.changeNetworkPort=function(e,t){var n=void 0===e?"":e;a.setState((function(e){var a=Object.assign({},e.network_connections);return a[t]=null===a[t]?{}:a[t],a[t].connection_port=n,{network_connections:a}}),(function(){a.validateForm()}))},a.updatePowerPort=function(e,t){var n=e.target.value;a.setState((function(e){var a=Object.assign({},e.power_connections);return a[t]=n,{power_connections:a}}),(function(){a.validateForm()}))},a.changePowerPortState=function(e,t){var n=e.target.value;a.setState((function(e){var a=Object.assign({},e.leftRight);return a[t]=n,{leftRight:a}}),(function(){a.validateForm()}))},a.updateAssetNumber=function(e){a.setState({asset_number:e.target.value},(function(){a.validateForm()}))},a.getPowerConnections=function(){if(null===a.state.leftRight)return[];var e=[];return Object.entries(a.state.leftRight).map((function(t){var n=Object(Dt.a)(t,2),s=n[0],r=n[1],i=null===a.state.power_connections?1:a.state.power_connections[s];switch(r){case Xt:e.push("L"+i);break;case Yt:e.push("R"+i)}})),e},a.createJSON=function(){return{model:a.state.model,hostname:a.state.hostname,rack:a.state.rack,rack_position:a.state.rackU,owner:a.state.owner.split("/")[0],comment:a.state.comment,datacenter_name:a.state.datacenter_name,tags:a.state.tags,network_connections:null===a.state.network_connections?{}:a.state.network_connections,power_connections:a.getPowerConnections(),asset_number:a.state.asset_number}},a.availableNetworkConnections=function(){var e=!1;a.state.assetNumList.map((function(t){Object.keys(a.state.networList[a.state.assetNumToModelList[t]].length).length>0&&(e=!0)})),a.setState({availableConnections:e})},a.showModal=function(){a.setState({showModal:!0})},a.closeModal=function(){a.setState({loadingAssetNumber:!0,loadingModels:!0,modelList:[],networkList:null,powerPortList:null,loadingOwners:!0,ownerList:[],loadingDatacenters:!0,datacenterList:[],loadingHostnames:!0,assetNumList:[],assetNumToModelList:null,model:"",hostname:"",rack:"",rackU:-1,owner:"",comment:"",datacenter_name:"",tags:[],network_connections:null,power_connections:null,asset_number:1e5,selectedConnection:null,statusOpen:!1,statusMessage:"",statusSeverity:"",showModal:!1,powerPortState:null,leftRight:null,availableConnections:!1,portOptions:[],canSubmit:!1},(function(){a.getLists(),a.props.getAssetList(),a.props.close()}))},a.statusClose=function(){a.setState({statusOpen:!1,statusMessage:"",statusSeverity:""})},a.validateForm=function(){a.setState({canSubmit:a.validJSON(a.createJSON())})},a.getPortOptions=function(e){try{a.setState({portOptions:a.state.networkList[a.state.assetNumToModelList[e]]})}catch(t){}},a.state={loadingAssetNumber:!0,loadingModels:!0,modelList:[],networkList:null,powerPortList:null,loadingOwners:!0,ownerList:[],loadingDatacenters:!0,datacenterList:[],loadingHostnames:!0,assetNumList:[],assetNumToModelList:null,model:"",hostname:"",rack:"",rackU:-1,owner:"",comment:"",datacenter_name:"",tags:[],network_connections:null,power_connections:null,asset_number:1e5,selectedConnection:null,statusOpen:!1,statusMessage:"",statusSeverity:"",showModal:!1,powerPortState:null,leftRight:null,availableConnections:!1,portOptions:[],canSubmit:!1,inputs:{model:qt(st.MODEL,"Model",!1,"A reference to an existing model"),hostname:qt(st.HOSTNAME,"Hostname",!1,"A short string compliant with RFC 1034\u2019s definition of 'label'"),rack:qt(st.RACK,"Rack",!1,"The rack the equipment is installed in, written as a row letter and rack number, e.g. 'B12'"),rackU:qt(st.RACK_U,"Rack U",!1,"An integer indicating the vertical location of the bottom of the equipment (e.g. '5')"),owner:qt(st.OWNER,"Owner",!1,"A reference to an existing user on the system who owns this equipment"),comment:qt(st.COMMENT,"Comment",!1,"Any additional information associated with this asset"),datacenter:qt(st.DATACENTER,"Datacenter",!1,"A reference to an existing datacenter"),macAddress:qt(st.MAC_ADDRESS,"Mac Address",!1,"A 6-byte hexadecimal string per network port shown canonically in lower case with colon delimiters (e.g., '00:1e:c9:ac:78:aa').\nA hostname is required to enter in this value"),networkConnections:qt(st.NETWORK_CONNECTIONS,"Port Name",!1,"For each network port, a reference to another network port on another piece of gear"),powerConnections:qt(st.POWER_CONNECTIONS,"Power Connections",!1,"Choice of PDU port number (0 means not plugged in)"),assetNum:qt(st.ASSET_NUMBER,"Asset Number",!1,"A six-digit serial number unique associated with an asset.")}},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getLists()}},{key:"render",value:function(){var e=this,t=this.props.classes;return s.a.createElement("span",null,this.state.loadingAssetNumber||this.state.loadingDatacenters||this.state.loadingModels||this.state.loadingHostnames||this.state.loadingOwners?s.a.createElement("div",{className:t.progress},s.a.createElement(Ge.a,null)):s.a.createElement("form",null,s.a.createElement("div",{className:t.dialogDiv},s.a.createElement(f.a,{container:!0,spacing:3},s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(Ft.a,{placement:"top",open:this.state.inputs.model.Tooltip,title:this.state.inputs.model.description},s.a.createElement(me.a,{id:"select-model",options:this.state.modelList,includeInputInList:!0,renderInput:function(t){return s.a.createElement(b.a,Object.assign({},t,{label:e.state.inputs.model.label,name:e.state.inputs.model.name,onChange:e.updateModel,onBlur:e.updateModel,variant:"outlined",fullWidth:!0,required:!0}))}}))),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(Ft.a,{placement:"top",open:this.state.inputs.owner.Tooltip,title:this.state.inputs.owner.description},s.a.createElement(me.a,{id:"select-owner",options:this.state.ownerList,includeInputInList:!0,renderInput:function(t){return s.a.createElement(b.a,Object.assign({},t,{label:e.state.inputs.owner.label,name:e.state.inputs.owner.name,onChange:e.updateOwner,onBlur:e.updateOwner,variant:"outlined",fullWidth:!0,required:!0}))}}))),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(Ft.a,{placement:"top",open:this.state.inputs.datacenter.Tooltip,title:this.state.inputs.datacenter.description},s.a.createElement(me.a,{id:"input-datacenter",options:this.state.datacenterList,includeInputInList:!0,renderInput:function(t){return s.a.createElement(b.a,Object.assign({},t,{label:e.state.inputs.datacenter.label,name:e.state.inputs.datacenter.name,onChange:e.updateDatacenter,onBlur:e.updateDatacenter,variant:"outlined",fullWidth:!0,required:!0}))}}))),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(Ft.a,{placement:"top",open:this.state.inputs.rack.Tooltip,title:this.state.inputs.rack.description},s.a.createElement(b.a,{id:"input-rack",variant:"outlined",label:this.state.inputs.rack.label,name:this.state.inputs.rack.name,onChange:this.updateRack,value:this.state.rack,required:!0,fullWidth:!0}))),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(Ft.a,{placement:"top",open:this.state.inputs.rackU.Tooltip,title:this.state.inputs.rackU.description},s.a.createElement(b.a,{id:"input-rackU",variant:"outlined",type:"number",InputProps:{inputProps:{min:1,max:42}},label:this.state.inputs.rackU.label,name:this.state.inputs.rackU.name,onChange:this.updateRackU,required:!0,fullWidth:!0}))),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(Ft.a,{placement:"top",open:this.state.inputs.assetNum.Tooltip,title:this.state.inputs.assetNum.description},s.a.createElement(b.a,{id:"input-asset-number",variant:"outlined",type:"number",InputProps:{inputProps:{min:1e5,max:999999}},label:this.state.inputs.assetNum.label,name:this.state.inputs.assetNum.name,onChange:this.updateAssetNumber,value:this.state.asset_number,required:!0,fullWidth:!0}))),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(Ft.a,{placement:"top",open:this.state.inputs.hostname.Tooltip,title:this.state.inputs.hostname.description},s.a.createElement(b.a,{id:"input-hostname",variant:"outlined",label:this.state.inputs.hostname.label,name:this.state.inputs.hostname.name,onChange:this.updateHostname,fullWidth:!0}))),this.state.networkList&&this.state.networkList[this.state.model]?s.a.createElement(f.a,{item:!0,xs:12},this.state.networkList[this.state.model].map((function(t){return s.a.createElement(f.a,{container:!0,spacing:3},s.a.createElement(f.a,{item:!0,xs:2},s.a.createElement(W.a,null,t+": ")),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(Ft.a,{placement:"top",open:e.state.inputs.macAddress.Tooltip,title:e.state.inputs.macAddress.description},s.a.createElement(b.a,{id:"input-mac-address",variant:"outlined",label:e.state.inputs.macAddress.label,name:e.state.inputs.macAddress.name,onChange:function(a){e.changeNetworkMacAddress(a,t)},fullWidth:!0,disabled:""===e.state.hostname,value:null!==e.state.network_connections&&void 0!==e.state.network_connections[t]?e.state.network_connections[t].mac_address:""}))),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(Ft.a,{placement:"top",open:e.state.inputs.networkConnections.Tooltip,title:e.state.inputs.networkConnections.description},s.a.createElement(me.a,{id:"input-network-ports",options:e.state.assetNumList,includeInputInList:!0,onChange:function(a,n){e.changeNetworkHostname(n,t)},required:""!==e.state.network_connections[t].connection_port,renderInput:function(t){return s.a.createElement(b.a,Object.assign({},t,{label:"Connection Hostname",name:"Connection Hostname",variant:"outlined",fullWidth:!0,disabled:""===e.state.hostname}))}}))),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(Ft.a,{placement:"top",open:e.state.inputs.networkConnections.Tooltip,title:e.state.inputs.networkConnections.description},s.a.createElement(me.a,{id:"input-network-ports",options:e.state.portOptions,includeInputInList:!0,onChange:function(a,n){e.changeNetworkPort(n,t)},renderInput:function(a){return s.a.createElement(b.a,Object.assign({},a,{label:"Connection Port",name:"Connection Port",variant:"outlined",fullWidth:!0,required:""!==e.state.network_connections[t].connection_hostname,disabled:""===e.state.hostname}))}}))))}))):null,this.state.powerPortList&&this.state.powerPortList[this.state.model]?Array.from({length:this.state.powerPortList[this.state.model]},(function(t,a){return s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(f.a,{container:!0,spacing:3},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(W.a,null,"Power Port: "+a)),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(lt.a,{component:"fieldset"},s.a.createElement(Wt.a,{id:"power-port-"+a,"aria-label":"position",name:"position"+a,value:null===e.state.leftRight?"off":void 0===e.state.leftRight[a]?"off":e.state.leftRight[a],onChange:function(t){e.changePowerPortState(t,a)},row:!0},s.a.createElement(Ht.a,{value:Xt,control:s.a.createElement(Bt.a,{color:"primary"}),label:"Left",labelPlacement:"bottom"}),s.a.createElement(Ht.a,{value:Yt,control:s.a.createElement(Bt.a,{color:"primary"}),label:"Right",labelPlacement:"bottom"}),s.a.createElement(Ht.a,{value:"off",control:s.a.createElement(Bt.a,{color:"primary"}),label:"No Connection",labelPlacement:"bottom"})))),null===e.state.leftRight?null:void 0===e.state.leftRight[a]||"off"===e.state.leftRight[a]?null:s.a.createElement(f.a,{item:!0,xs:2},s.a.createElement(b.a,{type:"number",value:null===e.state.power_connections?1:void 0===e.state.power_connections[a]?1:e.state.power_connections[a],InputProps:{inputProps:{min:1,max:24}},onChange:function(t){e.updatePowerPort(t,a)}}),s.a.createElement(Gt.a,null,"Power Port Number"))))})):null,s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(b.a,{id:"input-comment",variant:"outlined",label:this.state.inputs.comment.label,name:this.state.inputs.comment.name,onChange:this.updateComment,multiline:!0,fullWidth:!0})),s.a.createElement(f.a,{item:!0,xs:6}),s.a.createElement(f.a,{item:!0,xs:1},s.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",onClick:function(t){e.createAsset(t)},disabled:!this.state.canSubmit},"Save Edits"))))),this.state.statusOpen?s.a.createElement(R.a,{severity:this.statusSeverity,action:s.a.createElement(I.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){e.statusClose()}},s.a.createElement(T.a,{fontSize:"inherit"}))},this.statusMessage):null)}}]),t}(s.a.Component)),Zt=Object(ne.a)((function(e){return{root:{flexGrow:1},dialogDiv:{padding:e.spacing(2,4,3)},modal:{display:"flex",alignItems:"center",justifyContent:"center",maxWidth:"80%",margin:"0 auto",minWidth:"70%",maxHeight:"600px",overflow:"scroll"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},progress:{display:"flex","& > * + *":{marginLeft:e.spacing(2)}},appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}}}))(Qt);var $t,ea=s.a.forwardRef((function(e,t){return s.a.createElement(At.a,Object.assign({direction:"up",ref:t},e))})),ta=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={networkNodes:null},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.classes;return s.a.createElement("span",null,s.a.createElement(Pt.a,{fullScreen:!0,open:this.props.open,onClose:this.props.close,TransitionComponent:ea,padding:3},s.a.createElement(X.a,{className:e.appBar},s.a.createElement(Q.a,null,s.a.createElement(I.a,{edge:"start",color:"inherit",onClick:this.props.close,"aria-label":"close"},s.a.createElement(T.a,null)),s.a.createElement(W.a,{variant:"h6",className:e.title},"Asset Details"))),s.a.createElement(ct.a,null,s.a.createElement(mt.a,{expandIcon:s.a.createElement(pt.a,null),"aria-controls":"panel1a-content",id:"fields-header"},s.a.createElement(W.a,null,"Asset General Details")),s.a.createElement(ut.a,null,s.a.createElement(Zt,{defaultValues:this.props.asset,disabled:this.props.disabled,close:this.closeCreate,getAssetList:this.props.getAssetList}))),s.a.createElement(ct.a,null,s.a.createElement(mt.a,{expandIcon:s.a.createElement(pt.a,null),"aria-controls":"panel1a-content",id:"networks-header"},s.a.createElement(W.a,null,"Asset Network Management")),s.a.createElement(ut.a,null,""!==this.props.hostname&&this.state.networkNodes?s.a.createElement(Vt,{vals:this.state.networkNodes,host:this.props.hostname}):s.a.createElement(W.a,null,"This asset is not currently connected to any other assets"))),s.a.createElement(ct.a,null,s.a.createElement(mt.a,{expandIcon:s.a.createElement(pt.a,null),"aria-controls":"panel1a-content",id:"power-header"},s.a.createElement(W.a,null,"Asset Power Management")),s.a.createElement(ut.a,null)),s.a.createElement(f.a,{container:!0,spacing:3},s.a.createElement(f.a,{item:!0,xs:2},s.a.createElement(E.a,{variant:"contained",color:"primary"},"Save edits")),s.a.createElement(f.a,{item:!0,xs:2},s.a.createElement(E.a,{variant:"contained",color:"primary"},"Delete asset")),s.a.createElement(f.a,{item:!0,xs:8},s.a.createElement(E.a,{variant:"contained",color:"primary"},"Close without saving")))))}}]),t}(s.a.Component),aa=Object(ne.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}}}))(ta),na=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).updateDatacenter=function(e){a.setState({datacenter:e.target.value},(function(){a.search()}))},a.updateModel=function(e){a.setState({model:e.target.value},(function(){a.search()}))},a.updateHostname=function(e){a.setState({hostname:e.target.value},(function(){a.search()}))},a.updateStartingLetter=function(e){a.setState({startingLetter:e.target.value},(function(){a.search()}))},a.updateEndingLetter=function(e){a.setState({endingLetter:e.target.value},(function(){a.search()}))},a.updateStartingNum=function(e){a.setState({startingNum:e.target.value},(function(){a.search()}))},a.updateEndingNum=function(e){a.setState({endingNum:e.target.value},(function(){a.search()}))},a.search=function(){var e=[];a.props.allAssets.map((function(t){(t.datacenter_name.includes(a.state.datacenter)||t.datacenter_abbreviation.includes(a.state.datacenter))&&t.model.includes(a.state.model)&&t.hostname.includes(a.state.hostname)&&t.rack>=a.state.startingLetter+""+a.state.startingNum&&t.rack<=a.state.endingLetter+""+a.state.endingNum&&e.push(t)})),a.props.updateItems(e)},a.state={allAssets:[],datacenter:"",model:"",hostname:"",startingLetter:"A",endingLetter:"Z",startingNum:1,endingNum:1e3},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.search()}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e,t=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(ie.a,{elevation:3},s.a.createElement(f.a,{container:!0,spacing:2,direction:"row",justify:"flex-start",alignItems:"center",style:{padding:"10px"}},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(W.a,{variant:"h5"},"Filter")),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(b.a,{id:"datacenter",label:"Datacenter",name:"datacenter",onChange:function(e){t.updateDatacenter(e)},style:{width:"100%"}})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(b.a,{id:"model",label:"Model",name:"model",onChange:function(e){t.updateModel(e)},style:{width:"100%"}})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(b.a,{id:"hostname",label:"Hostname",name:"hostname",onChange:function(e){return t.updateHostname(e)},style:{width:"100%"}})),s.a.createElement(f.a,(e={item:!0},Object(h.a)(e,"item",!0),Object(h.a)(e,"xs",12),Object(h.a)(e,"sm",6),Object(h.a)(e,"md",4),Object(h.a)(e,"lg",3),e)),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:2},s.a.createElement(lt.a,null,s.a.createElement(it.a,{id:"starting-letter-selector",value:this.state.startingLetter,onChange:this.updateStartingLetter},w.map((function(e){return s.a.createElement(ee.a,{value:e},e)}))),s.a.createElement(Gt.a,null,"Starting Letter"))),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:2},s.a.createElement(lt.a,null,s.a.createElement(it.a,{id:"ending-letter-selector",value:this.state.endingLetter,onChange:this.updateEndingLetter},w.map((function(e){return s.a.createElement(ee.a,{value:e},e)}))),s.a.createElement(Gt.a,null,"Ending Letter"))),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(lt.a,null,s.a.createElement(b.a,{id:"starting-num-selector",type:"number",value:this.state.startingNum,onChange:this.updateStartingNum,InputProps:{inputProps:{min:1}}}),s.a.createElement(Gt.a,null,"Starting Number"))),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},s.a.createElement(lt.a,null,s.a.createElement(b.a,{id:"ending-num-selector",type:"number",value:this.state.endingNum,onChange:this.updateEndingNum,InputProps:{inputProps:{min:1}}}),s.a.createElement(Gt.a,null,"Ending Number"))))))}}]),t}(s.a.Component);function sa(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}function ra(e,t,a,n){return{label:t,name:e,showTooltip:a,description:n}}var ia,oa={filter:($t={vendor:null,model_number:null,height:null,model:null,hostname:null,rack:null,rack_position:null,username:null,display_name:null,email:null,privilege:null},Object(h.a)($t,"model",null),Object(h.a)($t,"hostname",null),Object(h.a)($t,"starting_rack_letter",null),Object(h.a)($t,"ending_rack_letter",null),Object(h.a)($t,"starting_rack_number",null),Object(h.a)($t,"ending_rack_number",null),Object(h.a)($t,"rack",null),Object(h.a)($t,"rack_position",null),$t),datacenter_name:""},la="search/",ca="left",ma="right",ua=(s.a.forwardRef((function(e,t){return s.a.createElement(At.a,Object.assign({direction:"up",ref:t},e))})),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).getLists=function(){a.getModelList(),a.getOwnerList(),a.getDatacenterList(),a.getNextAssetNum(),a.getAssetList()},a.getModelList=function(){p.a.post(A(y,la),oa).then((function(e){var t=e.data.models,n=[],s={},r={};t.map((function(e){var t=e.vendor+" "+e.model_number;n.push(t),s[t]=e.ethernet_ports,r[t]=parseInt(e.power_ports)})),a.setState({loadingModels:!1,modelList:n,networkList:s,powerPortList:r})}))},a.getOwnerList=function(){p.a.post(A(C,la),oa).then((function(e){var t=[];e.data.users.map((function(e){return t.push(e.username+"/"+e.display_name)})),a.setState({loadingOwners:!1,ownerList:t})}))},a.getDatacenterList=function(){p.a.get(A(k,"all/")).then((function(e){var t=[];e.data.datacenters.map((function(e){return t.push(e.name)})),a.setState({loadingDatacenters:!1,datacenterList:t})}))},a.getNextAssetNum=function(){p.a.get(A(S,rt.GET_NEXT_ASSET_NUM)).then((function(e){return a.setState({loadingAssetNumber:!1,asset_number:e.data.asset_number})}))},a.getAssetList=function(){p.a.post(A(S,la),oa).then((function(e){var t=e.data.instances,n=[],s={};t.map((function(e){n.push(e.hostname),s[e.hostname]=e.model})),a.setState({loadingHostnames:!1,assetNumList:n,assetNumToModelList:s},a.availableNetworkConnections())}))},a.validJSON=function(e){return""!==e.model&&""!==e.owner&&""!==e.datacenter_name&&""!==e.rack&&-1!==e.rack_position&&e.asset_number>=1e5&&e.asset_number<=999999},a.createAsset=function(e){e.preventDefault();var t=a.createJSON();a.validJSON(t)&&p.a.post(A(_t,rt.create),t).then((function(e){console.log(e),e.data.message===Nt?a.closeModal():a.setState({statusOpen:!0,statusMessage:e.data.message,statusSeverity:jt})}))},a.updateModel=function(e){var t=e.target.value;if(""!==t){var n=a.state.networkList[t],s={};n.map((function(e){s[e]={mac_address:"",connection_hostname:"",connection_port:""}}))}else s={};a.setState({model:t,network_connections:s},(function(){a.validateForm()}))},a.updateHostname=function(e){a.setState({hostname:e.target.value},(function(){a.validateForm()}))},a.updateRack=function(e){var t=e.target.value;a.setState({rack:t},(function(){a.validateForm()}))},a.updateRackU=function(e){a.setState({rackU:e.target.value},(function(){a.validateForm()}))},a.updateOwner=function(e){a.setState({owner:e.target.value},(function(){a.validateForm()}))},a.updateComment=function(e){a.setState({comment:e.target.value},(function(){a.validateForm()}))},a.updateDatacenter=function(e){a.setState({datacenter_name:e.target.value},(function(){a.validateForm()}))},a.updateTags=function(e){a.setState({tags:e.target.value},(function(){a.validateForm()}))},a.changeNetworkMacAddress=function(e,t){var n=Kt(e.target.value);a.setState((function(e){var a=Object.assign({},e.network_connections);return a[t].mac_address=n,{network_connections:a}}),(function(){a.validateForm()}))},a.changeNetworkHostname=function(e,t){var n=void 0===e?"":e;a.setState((function(e){var a=Object.assign({},e.network_connections);return a[t].connection_hostname=n,{network_connections:a}}),(function(){a.getPortOptions(n),a.validateForm()}))},a.changeNetworkPort=function(e,t){var n=void 0===e?"":e;a.setState((function(e){var a=Object.assign({},e.network_connections);return a[t]=null===a[t]?{}:a[t],a[t].connection_port=n,{network_connections:a}}),(function(){a.validateForm()}))},a.updatePowerPort=function(e,t){var n=e.target.value;a.setState((function(e){var a=Object.assign({},e.power_connections);return a[t]=n,{power_connections:a}}),(function(){a.validateForm()}))},a.changePowerPortState=function(e,t){var n=e.target.value;a.setState((function(e){var a=Object.assign({},e.leftRight);return a[t]=n,{leftRight:a}}),(function(){a.validateForm()}))},a.updateAssetNumber=function(e){a.setState({asset_number:e.target.value},(function(){a.validateForm()}))},a.getPowerConnections=function(){if(null===a.state.leftRight)return[];var e=[];return Object.entries(a.state.leftRight).map((function(t){var n=Object(Dt.a)(t,2),s=n[0],r=n[1],i=null===a.state.power_connections?1:a.state.power_connections[s];switch(r){case ca:e.push("L"+i);break;case ma:e.push("R"+i)}})),e},a.createJSON=function(){return{model:a.state.model,hostname:a.state.hostname,rack:a.state.rack,rack_position:a.state.rackU,owner:a.state.owner.split("/")[0],comment:a.state.comment,datacenter_name:a.state.datacenter_name,tags:a.state.tags,network_connections:null===a.state.network_connections?{}:a.state.network_connections,power_connections:a.getPowerConnections(),asset_number:a.state.asset_number}},a.availableNetworkConnections=function(){var e=!1;a.state.assetNumList.map((function(t){Object.keys(a.state.networList[a.state.assetNumToModelList[t]].length).length>0&&(e=!0)})),a.setState({availableConnections:e})},a.showModal=function(){a.setState({showModal:!0})},a.closeModal=function(){a.setState({loadingAssetNumber:!0,loadingModels:!0,modelList:[],networkList:null,powerPortList:null,loadingOwners:!0,ownerList:[],loadingDatacenters:!0,datacenterList:[],loadingHostnames:!0,assetNumList:[],assetNumToModelList:null,model:"",hostname:"",rack:"",rackU:-1,owner:"",comment:"",datacenter_name:"",tags:[],network_connections:null,power_connections:null,asset_number:1e5,selectedConnection:null,statusOpen:!1,statusMessage:"",statusSeverity:"",showModal:!1,powerPortState:null,leftRight:null,availableConnections:!1,portOptions:[],canSubmit:!1},(function(){a.getLists(),a.props.getAssetList(),a.props.close()}))},a.statusClose=function(){a.setState({statusOpen:!1,statusMessage:"",statusSeverity:""})},a.validateForm=function(){a.setState({canSubmit:a.validJSON(a.createJSON())})},a.getPortOptions=function(e){try{a.setState({portOptions:a.state.networkList[a.state.assetNumToModelList[e]]})}catch(t){}},a.state={loadingAssetNumber:!0,loadingModels:!0,modelList:[],networkList:null,powerPortList:null,loadingOwners:!0,ownerList:[],loadingDatacenters:!0,datacenterList:[],loadingHostnames:!0,assetNumList:[],assetNumToModelList:null,model:"",hostname:"",rack:"",rackU:-1,owner:"",comment:"",datacenter_name:"",tags:[],network_connections:null,power_connections:null,asset_number:1e5,selectedConnection:null,statusOpen:!1,statusMessage:"",statusSeverity:"",showModal:!1,powerPortState:null,leftRight:null,availableConnections:!1,portOptions:[],canSubmit:!1,inputs:{model:ra(st.MODEL,"Model",!1,"A reference to an existing model"),hostname:ra(st.HOSTNAME,"Hostname",!1,"A short string compliant with RFC 1034\u2019s definition of 'label'"),rack:ra(st.RACK,"Rack",!1,"The rack the equipment is installed in, written as a row letter and rack number, e.g. 'B12'"),rackU:ra(st.RACK_U,"Rack U",!1,"An integer indicating the vertical location of the bottom of the equipment (e.g. '5')"),owner:ra(st.OWNER,"Owner",!1,"A reference to an existing user on the system who owns this equipment"),comment:ra(st.COMMENT,"Comment",!1,"Any additional information associated with this asset"),datacenter:ra(st.DATACENTER,"Datacenter",!1,"A reference to an existing datacenter"),macAddress:ra(st.MAC_ADDRESS,"Mac Address",!1,"A 6-byte hexadecimal string per network port shown canonically in lower case with colon delimiters (e.g., '00:1e:c9:ac:78:aa').\nA hostname is required to enter in this value"),networkConnections:ra(st.NETWORK_CONNECTIONS,"Port Name",!1,"For each network port, a reference to another network port on another piece of gear"),powerConnections:ra(st.POWER_CONNECTIONS,"Power Connections",!1,"Choice of PDU port number (0 means not plugged in)"),assetNum:ra(st.ASSET_NUMBER,"Asset Number",!1,"A six-digit serial number unique associated with an asset.")}},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getLists()}},{key:"render",value:function(){var e=this,t=this.props.classes;return s.a.createElement("span",null,this.state.loadingAssetNumber||this.state.loadingDatacenters||this.state.loadingModels||this.state.loadingHostnames||this.state.loadingOwners?s.a.createElement("div",{className:t.progress},s.a.createElement(Ge.a,null)):s.a.createElement("form",null,s.a.createElement("div",{className:t.dialogDiv},s.a.createElement(f.a,{container:!0,spacing:3},s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(Ft.a,{placement:"top",open:this.state.inputs.model.Tooltip,title:this.state.inputs.model.description},s.a.createElement(me.a,{id:"select-model",options:this.state.modelList,includeInputInList:!0,renderInput:function(t){return s.a.createElement(b.a,Object.assign({},t,{label:e.state.inputs.model.label,name:e.state.inputs.model.name,onChange:e.updateModel,onBlur:e.updateModel,variant:"outlined",fullWidth:!0,required:!0}))}}))),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(Ft.a,{placement:"top",open:this.state.inputs.owner.Tooltip,title:this.state.inputs.owner.description},s.a.createElement(me.a,{id:"select-owner",options:this.state.ownerList,includeInputInList:!0,renderInput:function(t){return s.a.createElement(b.a,Object.assign({},t,{label:e.state.inputs.owner.label,name:e.state.inputs.owner.name,onChange:e.updateOwner,onBlur:e.updateOwner,variant:"outlined",fullWidth:!0,required:!0}))}}))),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(Ft.a,{placement:"top",open:this.state.inputs.datacenter.Tooltip,title:this.state.inputs.datacenter.description},s.a.createElement(me.a,{id:"input-datacenter",options:this.state.datacenterList,includeInputInList:!0,renderInput:function(t){return s.a.createElement(b.a,Object.assign({},t,{label:e.state.inputs.datacenter.label,name:e.state.inputs.datacenter.name,onChange:e.updateDatacenter,onBlur:e.updateDatacenter,variant:"outlined",fullWidth:!0,required:!0}))}}))),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(Ft.a,{placement:"top",open:this.state.inputs.rack.Tooltip,title:this.state.inputs.rack.description},s.a.createElement(b.a,{id:"input-rack",variant:"outlined",label:this.state.inputs.rack.label,name:this.state.inputs.rack.name,onChange:this.updateRack,value:this.state.rack,required:!0,fullWidth:!0}))),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(Ft.a,{placement:"top",open:this.state.inputs.rackU.Tooltip,title:this.state.inputs.rackU.description},s.a.createElement(b.a,{id:"input-rackU",variant:"outlined",type:"number",InputProps:{inputProps:{min:1,max:42}},label:this.state.inputs.rackU.label,name:this.state.inputs.rackU.name,onChange:this.updateRackU,required:!0,fullWidth:!0}))),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(Ft.a,{placement:"top",open:this.state.inputs.assetNum.Tooltip,title:this.state.inputs.assetNum.description},s.a.createElement(b.a,{id:"input-asset-number",variant:"outlined",type:"number",InputProps:{inputProps:{min:1e5,max:999999}},label:this.state.inputs.assetNum.label,name:this.state.inputs.assetNum.name,onChange:this.updateAssetNumber,value:this.state.asset_number,required:!0,fullWidth:!0}))),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(Ft.a,{placement:"top",open:this.state.inputs.hostname.Tooltip,title:this.state.inputs.hostname.description},s.a.createElement(b.a,{id:"input-hostname",variant:"outlined",label:this.state.inputs.hostname.label,name:this.state.inputs.hostname.name,onChange:this.updateHostname,fullWidth:!0}))),this.state.networkList&&this.state.networkList[this.state.model]?s.a.createElement(f.a,{item:!0,xs:12},this.state.networkList[this.state.model].map((function(t){return s.a.createElement(f.a,{container:!0,spacing:3},s.a.createElement(f.a,{item:!0,xs:2},s.a.createElement(W.a,null,t+": ")),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(Ft.a,{placement:"top",open:e.state.inputs.macAddress.Tooltip,title:e.state.inputs.macAddress.description},s.a.createElement(b.a,{id:"input-mac-address",variant:"outlined",label:e.state.inputs.macAddress.label,name:e.state.inputs.macAddress.name,onChange:function(a){e.changeNetworkMacAddress(a,t)},fullWidth:!0,disabled:""===e.state.hostname,value:null!==e.state.network_connections&&void 0!==e.state.network_connections[t]?e.state.network_connections[t].mac_address:""}))),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(Ft.a,{placement:"top",open:e.state.inputs.networkConnections.Tooltip,title:e.state.inputs.networkConnections.description},s.a.createElement(me.a,{id:"input-network-ports",options:e.state.assetNumList,includeInputInList:!0,onChange:function(a,n){e.changeNetworkHostname(n,t)},required:""!==e.state.network_connections[t].connection_port,renderInput:function(t){return s.a.createElement(b.a,Object.assign({},t,{label:"Connection Hostname",name:"Connection Hostname",variant:"outlined",fullWidth:!0,disabled:""===e.state.hostname}))}}))),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(Ft.a,{placement:"top",open:e.state.inputs.networkConnections.Tooltip,title:e.state.inputs.networkConnections.description},s.a.createElement(me.a,{id:"input-network-ports",options:e.state.portOptions,includeInputInList:!0,onChange:function(a,n){e.changeNetworkPort(n,t)},renderInput:function(a){return s.a.createElement(b.a,Object.assign({},a,{label:"Connection Port",name:"Connection Port",variant:"outlined",fullWidth:!0,required:""!==e.state.network_connections[t].connection_hostname,disabled:""===e.state.hostname}))}}))))}))):null,this.state.powerPortList&&this.state.powerPortList[this.state.model]?Array.from({length:this.state.powerPortList[this.state.model]},(function(t,a){return s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(f.a,{container:!0,spacing:3},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(W.a,null,"Power Port: "+a)),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(lt.a,{component:"fieldset"},s.a.createElement(Wt.a,{id:"power-port-"+a,"aria-label":"position",name:"position"+a,value:null===e.state.leftRight?"off":void 0===e.state.leftRight[a]?"off":e.state.leftRight[a],onChange:function(t){e.changePowerPortState(t,a)},row:!0},s.a.createElement(Ht.a,{value:ca,control:s.a.createElement(Bt.a,{color:"primary"}),label:"Left",labelPlacement:"bottom"}),s.a.createElement(Ht.a,{value:ma,control:s.a.createElement(Bt.a,{color:"primary"}),label:"Right",labelPlacement:"bottom"}),s.a.createElement(Ht.a,{value:"off",control:s.a.createElement(Bt.a,{color:"primary"}),label:"No Connection",labelPlacement:"bottom"})))),null===e.state.leftRight?null:void 0===e.state.leftRight[a]||"off"===e.state.leftRight[a]?null:s.a.createElement(f.a,{item:!0,xs:2},s.a.createElement(b.a,{type:"number",value:null===e.state.power_connections?1:void 0===e.state.power_connections[a]?1:e.state.power_connections[a],InputProps:{inputProps:{min:1,max:24}},onChange:function(t){e.updatePowerPort(t,a)}}),s.a.createElement(Gt.a,null,"Power Port Number"))))})):null,s.a.createElement(f.a,{item:!0,xs:6},s.a.createElement(b.a,{id:"input-comment",variant:"outlined",label:this.state.inputs.comment.label,name:this.state.inputs.comment.name,onChange:this.updateComment,multiline:!0,fullWidth:!0})),s.a.createElement(f.a,{item:!0,xs:6}),s.a.createElement(f.a,{item:!0,xs:1},s.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",onClick:function(t){e.createAsset(t)},disabled:!this.state.canSubmit},"Create")),s.a.createElement(f.a,{item:!0,xs:9},s.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",onClick:this.closeModal},"Cancel"))))),this.state.statusOpen?s.a.createElement(R.a,{severity:this.statusSeverity,action:s.a.createElement(I.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){e.statusClose()}},s.a.createElement(T.a,{fontSize:"inherit"}))},this.statusMessage):null)}}]),t}(s.a.Component)),da=Object(ne.a)((function(e){return{root:{flexGrow:1},dialogDiv:{padding:e.spacing(2,4,3)},modal:{display:"flex",alignItems:"center",justifyContent:"center",maxWidth:"80%",margin:"0 auto",minWidth:"70%",maxHeight:"600px",overflow:"scroll"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},progress:{display:"flex","& > * + *":{marginLeft:e.spacing(2)}},appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}}}))(ua),pa=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).setFile=function(e){a.setState({importedFile:e})},a.chooseFile=function(e){a.setState({importedFile:e.target.files[0]})},a.uploadFile=function(){var e=new FormData;e.append("file",a.state.importedFile),a.sendUploadedFile(e)},a.closeImport=function(){a.setState({importedFile:null},(function(){a.props.close()}))},a.sendUploadedFile=function(e){p.a.post(A(_t,rt.UPLOAD_FILE),e).then((function(e){e.data.message===Nt?(a.setState({showStatus:!0,statusMessage:e.data.summary,statusSeverity:Nt,showImport:!1}),a.props.close()):a.setState({showStatus:!0,statusMessage:e.data.message,statusSeverity:jt})}))},a.state={importedFile:null},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return s.a.createElement(ge.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:this.props.open,onClose:this.closeImport,closeAfterTransition:!0},s.a.createElement(Ee.a,{in:this.props.open},s.a.createElement(fe.a,{open:this.props.open},s.a.createElement("div",{className:t.grid},s.a.createElement(f.a,{container:!0,spacing:1,direction:"row",justify:"flex-start",alignItems:"center"},s.a.createElement(f.a,{item:!0,xs:9},s.a.createElement(W.a,{variant:"h5"},"Import Models")),s.a.createElement(f.a,{item:!0,xs:3},s.a.createElement(E.a,{onClick:this.closeImport,style:{width:"100%"}},"Close")),s.a.createElement(f.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center",xs:12},s.a.createElement("input",{type:"file",accept:".csv",onChange:this.chooseFile})),s.a.createElement(f.a,{container:!0,item:!0,direciton:"row",justify:"center",alignItems:"center",xs:12},s.a.createElement(E.a,{variant:"contained",color:"primary",style:{width:"40%"},onClick:function(){e.uploadFile()}},"Upload File")))))))}}]),t}(s.a.Component),ha=Object(ne.a)((function(e){return{grid:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3),width:"50%"}}}))(pa),ga=s.a.forwardRef((function(e,t){return s.a.createElement(At.a,Object.assign({direction:"up",ref:t},e))})),fa=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).openImport=function(){a.setState({showImport:!0})},a.closeImport=function(){a.setState({showImport:!1})},a.openCreate=function(){a.setState({showCreate:!0})},a.closeCreate=function(){a.setState({showCreate:!1})},a.state={showCreate:!1,showImport:!1},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return s.a.createElement(s.a.Fragment,null,s.a.createElement(ie.a,{elevation:3},s.a.createElement(f.a,{container:!0,spacing:2,direction:"row",justify:"flex-start",alignItems:"center",style:{padding:"10px"}},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(W.a,{variant:"h5"},"Add")),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{variant:"contained",style:{width:"100%",background:"green",color:"white"},onClick:this.openCreate},"Create")),s.a.createElement(f.a,{container:!0,item:!0,direciton:"row",justify:"center",alignItems:"center",xs:12},s.a.createElement("hr",{style:{width:"5vw"}}),s.a.createElement(W.a,{color:"textSecondary"},"Or"),s.a.createElement("hr",{style:{width:"5vw"}})),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{variant:"contained",color:"primary",style:{width:"100%"},startIcon:s.a.createElement(ve.a,null),onClick:function(){e.openImport()}},"Import")))),s.a.createElement(Pt.a,{fullScreen:!0,open:this.state.showCreate,onClose:this.closeCreate,TransitionComponent:ga,padding:3},s.a.createElement(X.a,{className:t.appBar},s.a.createElement(Q.a,null,s.a.createElement(I.a,{edge:"start",color:"inherit",onClick:this.closeCreate,"aria-label":"close"},s.a.createElement(T.a,null)),s.a.createElement(W.a,{variant:"h6",className:t.title},"Create Asset"))),s.a.createElement(da,{close:this.closeCreate,getAssetList:this.props.getAssetList})),s.a.createElement(ha,{open:this.state.showImport,close:this.closeImport}))}}]),t}(s.a.Component),Ea=Object(ne.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}}}))(fa),ba=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).downloadTable=function(){p.a.post(A(_t,rt.EXPORT_FILE),{filter:a.props.filters}).then((function(e){a.setState({csvData:e.data.csvData}),a.csvLink.link.click()}))},a.state={csvData:""},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(ie.a,{elevation:3},s.a.createElement(f.a,{container:!0,spacing:2,direction:"row",justify:"flex-start",alignItems:"center",style:{padding:"10px"}},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(W.a,{variant:"h6"},"Export")),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(W.a,null,"Download what is currently shown in the table.")),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{onClick:function(){e.downloadTable()},variant:"contained",color:"primary",startIcon:s.a.createElement(le.a,null),style:{width:"100%"}},"Export")))),s.a.createElement(re.CSVLink,{data:this.state.csvData,filename:"assets.csv",className:"hidden",ref:function(t){return e.csvLink=t},target:"_blank"}))}}]),t}(s.a.Component),va={filter:(ia={vendor:null,model_number:null,height:null,model:null,hostname:null,rack:null,rack_position:null,username:null,display_name:null,email:null,privilege:null},Object(h.a)(ia,"model",null),Object(h.a)(ia,"hostname",null),Object(h.a)(ia,"starting_rack_letter",null),Object(h.a)(ia,"ending_rack_letter",null),Object(h.a)(ia,"starting_rack_number",null),Object(h.a)(ia,"ending_rack_number",null),Object(h.a)(ia,"rack",null),Object(h.a)(ia,"rack_position",null),ia),datacenter_name:""};function wa(e,t,a,n,s,r){return{model:e,hostname:t,datacenter_name:a,rack:n,owner:s,asset_number:r}}var Sa,ya=[{id:"datacenter_name",numeric:!1,label:"Datacenter",align:"left"},{id:"hostname",numeric:!1,label:"Hostname",align:"left"},{id:"model",numeric:!1,label:"Model",align:"left"},{id:"rack",numeric:!1,label:"Rack",align:"left"},{id:"owner",numeric:!1,label:"Owner",align:"left"},{id:"asset_number",numeric:!1,label:"Asset Number",align:"right"}],Ca=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).editAsset=function(){var e=a.state.detailedValues.getAssetAsJSON();e[st.RACK_ORIGINAL]=a.state.originalRack,e[st.RACK_U_ORIGINAL]=a.state.originalrack_position,p.a.post(A(_t,rt.edit),e).then((function(e){e.data.message===Nt?a.setState({showStatus:!0,statusMessage:"Successfully edited asset",statusSeverity:Nt,detailedValues:null,showDetailedView:!1}):a.setState({detailStatusOpen:!0,detailStatusMessage:e.data.message,detailStatusSeverity:jt})}))},a.deleteAsset=function(){var e={};e[st.RACK]=a.state.originalRack,e[st.RACK_U]=a.state.originalrack_position,p.a.post(A(_t,rt.delete),e).then((function(e){e.data.message===Nt?a.setState({showStatus:!0,statusMessage:"Successfully deleted asset",statusSeverity:Nt,originalRack:"",originalrack_position:"",showDetailedView:!1}):a.setState({showStatus:!0,statusMessage:e.data.message,statusSeverity:jt})}))},a.getAssetDetails=function(e,t){a.setState({detailViewLoading:!0});var n={};n[st.RACK]=e,n[st.RACK_U]=t,p.a.post(A(_t,rt.detailView),n).then((function(e){return a.setState({detailedValues:e.data.assets[0],detailViewLoading:!1})}))},a.closeDetailedView=function(){a.setState({showDetailedView:!1})},a.closeShowStatus=function(){a.setState({showStatus:!1})},a.createSortHandler=function(e,t){var n=a.state.orderBy===t&&"asc"===a.state.order;a.setState({order:n?"desc":"asc",orderBy:t})},a.openDetailedView=function(e,t){a.setState({detailAsset:t,showDetailedView:!0})},a.updateItems=function(e){var t=[];e.map((function(e){t.push(wa(e.model,e.hostname,e.datacenter_name,e.rack+" U"+e.rack_position,e.owner,e.asset_number))})),a.setState({tableItems:t})},a.getAssetList=function(){p.a.post(A(S,rt.search),va).then((function(e){a.setState({allAssets:e.data.instances})}))},a.state={allAssets:[],tableItems:[],detailStatusOpen:!1,detailStatusSeverity:"",detailStatusMessage:"",deleteAssetRack:"",deleteAssetrack_position:"",showDetailedView:!1,detailViewLoading:!1,detailAsset:-1,detailHostname:"",originalRack:"",originalrack_position:"",order:"asc",orderBy:"datacenter"},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;p.a.post(A(S,rt.search),va).then((function(t){var a=[];t.data.instances.map((function(e){a.push(wa(e.model,e.hostname,e.datacenter_name,e.rack+" U"+e.rack_position,e.owner,e.asset_number))})),e.setState({allAssets:t.data.instances,tableItems:a})}))}},{key:"render",value:function(){var e,t,a=this,n=this.props.classes;return s.a.createElement(s.a.Fragment,null,s.a.createElement(f.a,{container:!0,spacing:3},s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},this.props.privilege===_.ADMIN?s.a.createElement(Ea,{getAssetList:this.getAssetList}):null),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:6},s.a.createElement(na,{updateItems:this.updateItems,getAssetList:this.getAssetList,allAssets:this.state.allAssets})),s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4,lg:3},this.props.privilege===_.ADMIN?s.a.createElement(ba,{downloadTable:this.downloadTable}):null),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(Pe.a,{component:ie.a},s.a.createElement(Ne.a,{className:n.table,"aria-label":"customized table"},s.a.createElement(De.a,null,s.a.createElement(Ie.a,{className:n.styledTableRow},ya.map((function(e){return s.a.createElement(Ae.a,{className:n.tableCellHead,key:e.id,align:e.align,sortDirection:a.state.orderBy===e.id&&a.state.order},s.a.createElement(Mt.a,{active:a.state.orderBy===e.id,direction:a.state.orderBy===e.id?a.state.order:"asc",onClick:function(t){a.createSortHandler(t,e.id)}},s.a.createElement("span",{style:{fontWeight:"bold"}},e.label),a.state.orderBy===e.id?s.a.createElement("span",{className:n.visuallyHidden},"desc"===a.state.order?"sorted descending":"sorted ascending"):null))})),s.a.createElement(Ae.a,{align:"left",className:n.tableCellHead},""))),s.a.createElement(je.a,null,function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(this.state.tableItems,(e=this.state.order,t=this.state.orderBy,"desc"===e?function(e,a){return sa(e,a,t)}:function(e,a){return-sa(e,a,t)})).map((function(e,t){var n="enhanced-table-checkbox-".concat(t);return s.a.createElement(Ie.a,{hover:!0,tabIndex:-1,key:e.assetNum},s.a.createElement(Ae.a,{component:"th",id:n,scope:"row"},e.datacenter_name),s.a.createElement(Ae.a,{align:"left"},e.hostname),s.a.createElement(Ae.a,{align:"left"},e.model),s.a.createElement(Ae.a,{align:"left"},e.rack),s.a.createElement(Ae.a,{align:"left"},e.owner),s.a.createElement(Ae.a,{align:"right"},e.asset_number),s.a.createElement(Ae.a,{align:"center"},s.a.createElement(E.a,{color:"primary",variant:"contained",onClick:function(t){a.openDetailedView(t,e)}},"More Details")))}))))))),s.a.createElement(aa,{open:this.state.showDetailedView,close:this.closeDetailedView,search:this.search,disabled:this.props.privilege===_.USER,asset:this.state.detailAsset}))}}]),t}(s.a.Component),ka=Object(ne.a)((function(e){return{styledTableRow:{},tableCellHead:{},styledTableCell:{fontSize:14},table:{minWidth:700},paper:{width:"100%",marginBottom:e.spacing(2)},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}))(Ca),Oa=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={hasError:!1},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){return this.state.hasError?s.a.createElement("h1",null,"Something went wrong."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return"An unforseen error occurred. Please refresh the page and try again later."}}]),t}(s.a.Component),xa=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={statusSeverity:"",statusMessage:"",showStatus:!1},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(Oa,null,s.a.createElement(f.a,{container:!0,spacing:5,direction:"row",justify:"flex-start",alignItems:"center",style:{margin:"0px",maxWidth:"95vw"}},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(W.a,{variant:"h4"},"Assets")),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(ka,{privilege:this.props.privilege})))))}}]),t}(s.a.Component);!function(e){e.GET_ALL_DATACENTERS="all/",e.CREATE="create/",e.EDIT="edit/",e.DELETE="delete/"}(Sa||(Sa={}));var Ma,_a=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).generateCreateJSON=function(){return{abbreviation:a.state.datacenterAbbreviation,datacenter_name:a.state.datacenterName}},a.createDatacenter=function(){p.a.post(A(k,Sa.CREATE),a.generateCreateJSON()).then((function(e){e.status===j?a.setState({showCreate:!1,datacenterName:"",datacenterAbbreviation:""},(function(){return a.props.search()})):a.setState({})}))},a.updateDatacenterName=function(e){a.setState({datacenterName:e.target.value})},a.updateDatacenterAbbrevation=function(e){a.setState({datacenterAbbreviation:a.getAbbreviation(e.target.value)})},a.getAbbreviation=function(e){return e.length>6?e.substring(0,7):e},a.showCreate=function(){a.setState({showCreate:!0})},a.closeCreate=function(){a.setState({showCreate:!1,datacenterName:"",datacenterAbbreviation:""})},a.state={showCreate:!1,datacenterName:"",datacenterAbbreviation:""},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return s.a.createElement(s.a.Fragment,null,s.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){e.showCreate()}},"Create New Datacenter"),s.a.createElement(ge.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:this.state.showCreate,onClose:this.closeCreate,closeAfterTransition:!0,BackdropComponent:fe.a,scroll:"body",BackdropProps:{timeout:500}},s.a.createElement(Ee.a,{in:this.state.showCreate},s.a.createElement("div",{className:t.paper},s.a.createElement(f.a,{container:!0,spacing:3},s.a.createElement(f.a,{item:!0,xs:2},s.a.createElement(W.a,null,"Datcenter Name:")),s.a.createElement(f.a,{item:!0,xs:9},s.a.createElement(b.a,{id:"input-rack",variant:"outlined",label:"datacenter-name",name:"datacenter-name",onChange:this.updateDatacenterName,required:!0,fullWidth:!0})),s.a.createElement(f.a,{item:!0,xs:2},s.a.createElement(W.a,null,"Datcenter Abbreviation:")),s.a.createElement(f.a,{item:!0,xs:9},s.a.createElement(Ft.a,{placement:"top",title:"Max 6 characters"},s.a.createElement(b.a,{id:"input-rack",variant:"outlined",label:"datacenter-abbreviation",name:"datacenter-abbreviation",onChange:this.updateDatacenterAbbrevation,value:this.state.datacenterAbbreviation,required:!0,fullWidth:!0}))),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",disabled:!(this.state.datacenterAbbreviation&&this.state.datacenterName),onClick:function(){e.createDatacenter()}},"Create Datacenter")))))))}}]),t}(s.a.Component),Na=Object(ne.a)((function(e){return{root:{width:"100%"},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}))(_a),ja=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).generateEditJSON=function(){return console.log("generating edit"),console.log(a.props.dcName),{nameOriginal:a.props.dcName,abbreviation:a.state.datacenterAbbreviation||a.props.dcAbbrev,datacenter_name:a.state.datacenterName||a.props.dcName}},a.editDatacenter=function(){console.log("sending"),console.log(a.state.datacenterName),p.a.post(A(k,Sa.EDIT),a.generateEditJSON()).then((function(e){console.log(e),e.status===j?a.setState({datacenterName:"",datacenterAbbreviation:""},(function(){a.props.search(),a.props.close()})):a.setState({})}))},a.updateDatacenterName=function(e){a.setState({datacenterName:e.target.value})},a.updateDatacenterAbbrevation=function(e){a.setState({datacenterAbbreviation:a.getAbbreviation(e.target.value)})},a.getAbbreviation=function(e){return e.length>6?e.substring(0,7):e},a.state={datacenterName:e.dcName,datacenterAbbreviation:e.dcAbbrev},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return s.a.createElement(s.a.Fragment,null,s.a.createElement(ge.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:this.props.show,onClose:this.props.close,closeAfterTransition:!0,BackdropComponent:fe.a,scroll:"body",BackdropProps:{timeout:500}},s.a.createElement(Ee.a,{in:this.props.show},s.a.createElement("div",{className:t.paper},s.a.createElement(f.a,{container:!0,spacing:3},s.a.createElement(f.a,{item:!0,xs:2},s.a.createElement(W.a,null,"Datcenter Name:")),s.a.createElement(f.a,{item:!0,xs:9},s.a.createElement(b.a,{id:"input-rack",variant:"outlined",label:"datacenter-name",name:"datacenter-name",onChange:this.updateDatacenterName,value:this.state.datacenterName||this.props.dcName,required:!0,fullWidth:!0})),s.a.createElement(f.a,{item:!0,xs:2},s.a.createElement(W.a,null,"Datcenter Abbreviation:")),s.a.createElement(f.a,{item:!0,xs:9},s.a.createElement(Ft.a,{placement:"top",title:"Max 6 characters"},s.a.createElement(b.a,{id:"input-rack",variant:"outlined",label:"datacenter-abbreviation",name:"datacenter-abbreviation",onChange:this.updateDatacenterAbbrevation,value:this.state.datacenterAbbreviation||this.props.dcAbbrev,required:!0,fullWidth:!0}))),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{variant:"contained",color:"primary",type:"submit",onClick:function(){e.editDatacenter()}},"Save Edits")),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{variant:"contained",color:"primary",onClick:this.props.close},"Cancel")))))))}}]),t}(s.a.Component),Aa=Object(ne.a)((function(e){return{root:{width:"100%"},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}))(ja);!function(e){e.GET_ALL_RACKS="all",e.CREATE_RACKS="create",e.DELETE_RACKS="delete",e.GET_RACK_DETAILS="details"}(Ma||(Ma={}));a(500);var Pa="racks/",Da=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleFormat=function(e,t){t.length&&a.setState({formats:t})},a.getAllRacks=function(){p.a.get(A(Pa,Ma.GET_ALL_RACKS)).then((function(e){"success"===e.data.message?a.setState({showStatus:!0,statusMessage:"Success",statusSeverity:"success",racksList:e.data.racks}):a.setState({showStatus:!0,statusMessage:e.data.message,statusSeverity:"error"})}))},a.createRacks=function(){a.updateRacks(Ma.CREATE_RACKS)},a.deleteRacks=function(){a.updateRacks(Ma.DELETE_RACKS)},a.viewRacks=function(){a.updateRacks(Ma.GET_RACK_DETAILS)},a.changeStartingRack=function(e){a.setState({firstRack:e.target.value})},a.changeEndingRack=function(e){a.setState({secondRack:e.target.value})},a.closeShowStatus=function(){a.setState({showStatus:!1})},a.changeRackType=function(e){a.setState({rackType:e})},a.closeConfirmationBox=function(){a.setState({showConfirmationBox:!1})},a.state={items:[],firstRack:"A1",secondRack:"A1",showStatus:!1,statusMessage:"",statusSeverity:"info",showConfirmationBox:!1,racksList:[]},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getAllRacks()}},{key:"updateRacks",value:function(e){var t=this;p.a.post(A(Pa,e),{start_letter:this.state.startingRackLetter,stop_letter:this.state.endingRackLetter,start_number:this.state.startingRackNumber,stop_number:this.state.endingRackNumber,datacenter_name:this.props.datacenter}).then((function(a){if("success"===a.data.message){if(t.setState({showStatus:!0,statusMessage:"Success",statusSeverity:"success",showConfirmationBox:!1}),e===Ma.GET_RACK_DETAILS){var n=window.open(a.data.link,"_blank");null!=n&&n.focus()}}else t.setState({showStatus:!0,statusMessage:a.data.message,statusSeverity:"error"})}))}},{key:"render",value:function(){var e=this,t=this.props.classes;return s.a.createElement(Oa,null,s.a.createElement(f.a,{container:!0},s.a.createElement(f.a,{item:!0,xs:1},s.a.createElement(lt.a,null,s.a.createElement(it.a,{id:"starting-letter-selector",value:this.state.startingRackLetter,onChange:this.changeStartingLetter},w.map((function(e){return s.a.createElement(ee.a,{value:e},e)}))),s.a.createElement(Gt.a,null,"Starting Letter"))),s.a.createElement(f.a,{item:!0,xs:1},s.a.createElement(lt.a,null,s.a.createElement(it.a,{id:"ending-letter-selector",value:this.state.endingRackLetter,onChange:this.changeEndingLetter},w.map((function(e){return s.a.createElement(ee.a,{value:e},e)}))),s.a.createElement(Gt.a,null,"Ending Letter"))),s.a.createElement(f.a,{item:!0,xs:2},s.a.createElement(lt.a,null,s.a.createElement(b.a,{id:"starting-num-selector",type:"number",value:this.state.startingRackNumber,onChange:this.changeStartingNum,InputProps:{inputProps:{min:1}}}),s.a.createElement(Gt.a,null,"Starting Number"))),s.a.createElement(f.a,{item:!0,xs:8},s.a.createElement(lt.a,null,s.a.createElement(b.a,{id:"ending-num-selector",type:"number",value:this.state.endingRackNumber,onChange:this.changeEndingNum,InputProps:{inputProps:{min:1}}}),s.a.createElement(Gt.a,null,"Ending Number"))),s.a.createElement(f.a,{item:!0,xs:2},s.a.createElement(E.a,{variant:"contained",color:"primary",onClick:this.viewRacks},"View Racks")),s.a.createElement(f.a,{item:!0,xs:2},this.props.privilege===_.ADMIN?s.a.createElement(E.a,{variant:"contained",color:"primary",onClick:this.createRacks},"Create Racks"):null),s.a.createElement(f.a,{item:!0,xs:2},this.props.privilege===_.ADMIN?s.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){return e.setState({showConfirmationBox:!0})}},"Delete Racks"):null)),s.a.createElement(ge.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:this.state.showConfirmationBox,onClose:this.closeConfirmationBox,closeAfterTransition:!0,BackdropComponent:fe.a,BackdropProps:{timeout:500}},s.a.createElement(Ee.a,{in:this.state.showConfirmationBox},s.a.createElement("div",{className:t.paper},s.a.createElement(f.a,{container:!0,spacing:5},s.a.createElement(f.a,{item:!0,xs:12},"Are you sure you wish to delete?"),s.a.createElement(f.a,{item:!0,xs:2},s.a.createElement(E.a,{variant:"contained",color:"primary",onClick:this.deleteRacks},"Yes")),s.a.createElement(f.a,{item:!0,xs:1},s.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){return e.setState({showConfirmationBox:!1})}},"No")))))),s.a.createElement(V,{open:this.state.showStatus,severity:this.state.statusSeverity,closeStatus:this.closeShowStatus,message:this.state.statusMessage}))}}]),t}(s.a.Component),Ia=Object(ne.a)((function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}))(Da);function La(e){try{return 0==e.datacentersList.length?s.a.createElement(W.a,null,"There are currently no datacenters being managed."):s.a.createElement("div",null,e.datacentersList.map((function(t){return s.a.createElement(ct.a,null,s.a.createElement(mt.a,{expandIcon:s.a.createElement(pt.a,null),"aria-controls":t.abbreviation,id:t.abbreviation},s.a.createElement(W.a,{className:e.classes.heading},t.name+"/"+t.abbreviation)),s.a.createElement(ut.a,null,s.a.createElement(f.a,{container:!0,spacing:5},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(Ia,{privilege:e.privilege,datacenter:t.name})),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(a){e.editDatacenter(a,t.name,t.abbreviation)}},"Edit Datecenter")),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(a){e.openConfirmationBox(a,t.name)}},"Delete Datecenter")))))})))}catch(t){return s.a.createElement(W.a,null,"Could not load any datacenters at this time")}}var Ta,Ua=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return s.a.createElement(ge.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:this.props.showConfirmationBox,onClose:this.props.closeConfirmationBox,closeAfterTransition:!0,BackdropComponent:fe.a,BackdropProps:{timeout:500}},s.a.createElement(Ee.a,{in:this.props.showConfirmationBox},s.a.createElement("div",{className:t.paper},s.a.createElement(f.a,{container:!0,spacing:5},s.a.createElement(f.a,{item:!0,xs:12},"Are you sure you wish to delete?"),s.a.createElement(f.a,{item:!0,xs:2},s.a.createElement(E.a,{variant:"contained",color:"primary",onClick:this.props.deleteDatacenter},"Yes")),s.a.createElement(f.a,{item:!0,xs:1},s.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){return e.props.closeConfirmationBox()}},"No"))))))}}]),t}(s.a.Component),Ra=Object(ne.a)((function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},progress:{display:"flex","& > * + *":{marginLeft:e.spacing(2)},justify:"center",alignItems:"center"},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}))(Ua),Va=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).getDatacenters=function(){p.a.get(A(k,Sa.GET_ALL_DATACENTERS)).then((function(e){a.setState({datacentersList:e.data.datacenters,loadingDCList:!1})}))},a.deleteDatacenter=function(){p.a.post(A(k,Sa.DELETE),{datacenter_name:a.state.currentDatacenter}).then((function(e){console.log("Deleteting"),console.log(e),"success"===e.data.message&&(a.setState({showConfirmationBox:!1}),a.getDatacenters())}))},a.openConfirmationBox=function(e,t){a.setState({showConfirmationBox:!0,currentDatacenter:t})},a.closeConfirmationBox=function(){a.setState({showConfirmationBox:!1})},a.openEditDatacenter=function(e,t,n){a.setState({editDCName:t,editDCAbbr:n},(function(){return a.setState({showEditDC:!0})}))},a.closeEditDatacenter=function(){a.setState({showEditDC:!1,editDCName:"",editDCAbbr:""})},a.state={datacentersList:[],loadingDCList:!0,showConfirmationBox:!1,currentDatacenter:"",showEditDC:!1,editDCName:"",editDCAbbr:""},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getDatacenters()}},{key:"render",value:function(){var e=this.props.classes;return s.a.createElement(s.a.Fragment,null,s.a.createElement(Oa,null,this.props.privilege===_.ADMIN?s.a.createElement(Na,{search:this.getDatacenters}):null,this.state.loadingDCList?s.a.createElement("div",{className:e.progress},s.a.createElement(Ge.a,null)):s.a.createElement(La,{classes:e,datacentersList:this.state.datacentersList,privilege:this.props.privilege,openConfirmationBox:this.openConfirmationBox,editDatacenter:this.openEditDatacenter}),s.a.createElement(Aa,{show:this.state.showEditDC,close:this.closeEditDatacenter,dcName:this.state.editDCName,dcAbbrev:this.state.editDCAbbr,search:this.getDatacenters}),s.a.createElement(Ra,{showConfirmationBox:this.state.showConfirmationBox,closeConfirmationBox:this.closeConfirmationBox,deleteDatacenter:this.deleteDatacenter,close:this.closeEditDatacneter})))}}]),t}(s.a.Component),Fa=Object(ne.a)((function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},progress:{display:"flex","& > * + *":{marginLeft:e.spacing(2)},justify:"center",alignItems:"center"},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}))(Va),Ba=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){this.props.classes;return s.a.createElement(s.a.Fragment,null,s.a.createElement(Oa,null,s.a.createElement(ie.a,null,s.a.createElement(Fa,{privilege:this.props.privilege}))))}}]),t}(s.a.Component),Wa=Object(ne.a)((function(e){return{}}))(Ba);function Ha(e){var t={};try{t=JSON.parse(e)}catch(n){t=e}if(0===Object.entries(t).length&&t.constructor===Object)return[];var a=[];return Object.keys(t).map((function(e){var n=[];return n.push(e),n.push(t[e]),a.push(n),e})),a}!function(e){e.GENERATE_REPORT="generate-report",e.TEST="test"}(Ta||(Ta={}));var Ga,Ka={totalUsage:"Total Usage",spaceUsage:"Space Usage",vendorUsage:"Vendor Usage",modelUsage:"Model Usage",ownerUsage:"Owner Usage"},qa={totalUsage:["Total","Usage"],spaceUsage:["Rack","Usage"],vendorUsage:["Vendor","Usage"],modelUsage:["Model","Usage"],ownerUsage:["Ownder","Usage"]},za=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={tableValues:{totalUsage:[],spaceUsage:[],vendorUsage:[],modelUsage:[],ownerUsage:[]},totalUsage:[],spaceUsage:[],vendorUsage:[],modelUsage:[],ownerUsage:[],showStatus:!1,statusMessage:"",statusSeverity:""},a.closeShowStatus=a.closeShowStatus.bind(Object(g.a)(a)),a.generateReport=a.generateReport.bind(Object(g.a)(a)),p.a.defaults.headers.common.token=a.props.token,p.a.defaults.headers.common.privilege=a.props.privilege,a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"generateReport",value:function(){var e=this;p.a.post(A("stats/",Ta.GENERATE_REPORT)).then((function(t){try{var a=t.data,n=[],s=["Total Usage"];s.push(a.totalUsage),n.push(s);var r=Ha(a.spaceUsage);0===r.length&&r.push(["No space is currently being used",[]]);var i=Ha(a.vendorUsage);0===i.length&&i.push(["No vendors currently using space",[]]);var o=Ha(a.modelUsage);0===o.length&&o.push(["No models currently using space",[]]);var l=Ha(a.ownerUsage);0===l.length&&l.push(["No owners currently using space",[]]),e.setState({showStatus:!0,statusSeverity:"success",statusMessage:"Success",tableValues:{totalUsage:n,spaceUsage:r,vendorUsage:i,modelUsage:o,ownerUsage:l}})}catch(c){e.setState({showStatus:!0,statusMessage:t.data.message,statusSeverity:"error"})}}))}},{key:"closeShowStatus",value:function(){this.setState({showStatus:!1})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(Oa,null,s.a.createElement(V,{open:this.state.showStatus,severity:this.state.statusSeverity,closeStatus:this.closeShowStatus,message:this.state.statusMessage}),s.a.createElement(f.a,{container:!0,spacing:5,direction:"row",justify:"flex-start",alignItems:"center",style:{margin:"0px",maxWidth:"95vw"}},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(W.a,{variant:"h4"},"Reports"))),s.a.createElement("div",null,s.a.createElement(E.a,{variant:"contained",color:"primary",onClick:this.generateReport},"Generate New Report")),Object.keys(Ka).map((function(t){return s.a.createElement(ct.a,null,s.a.createElement(mt.a,{expandIcon:s.a.createElement(pt.a,null)},s.a.createElement(W.a,null,Ka[t])),s.a.createElement(ut.a,null,s.a.createElement(Pe.a,{component:ie.a},s.a.createElement(Ne.a,null,s.a.createElement(De.a,null,s.a.createElement(Ie.a,null,qa[t].map((function(e){return s.a.createElement(Ae.a,null,s.a.createElement("span",{id:e},e))})))),s.a.createElement(je.a,null,e.state.tableValues[t].map((function(e){return s.a.createElement(Ie.a,null,e.map((function(e){return s.a.createElement(Ae.a,null,s.a.createElement("span",{id:e},e+(isNaN(e)?"":"%")))})))})))))))}))))}}]),t}(s.a.Component);!function(e){e.TEST="test/",e.GET_LOGS="getlogs/"}(Ga||(Ga={}));var Ja="type",Xa="timestamp",Ya="user",Qa="asset",Za=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).getLogs=function(){p.a.get(A(O,Ga.GET_LOGS)).then((function(e){return a.parseLog(e.data.log)}))},a.parseLog=function(e){var t=[];e.map((function(e,a){var n="";Object.entries(e).map((function(e){var t=Object(Dt.a)(e,2),a=t[0],s=t[1];a!==Ja&&a!==Xa&&(n+=s+"\n")})),t.push(function(e,t,a,n){return{index:e,timestamp:t,type:a,message:n}}(a,e[Xa],e[Ja],n))})),a.setState({logItems:t,filteredLogs:t,allLogs:e})},a.filter=function(){a.filterByUser()},a.filterByUser=function(){var e=a.state.filterUser,t=[];a.state.logItems.map((function(n){var s=a.state.allLogs[n.index];Ya in s&&s[Ya].includes(e)&&t.push(n)}));var n=""===e?a.state.logItems:t;a.setState({filteredLogs:n},(function(){a.filterByAsset()}))},a.filterByAsset=function(){var e=a.state.filterAsset,t=[];a.state.filteredLogs.map((function(n){var s=a.state.allLogs[n.index];Qa in s&&s[Qa].includes(e)&&t.push(n)}));var n=""===e?a.state.filteredLogs:t;a.setState({filteredLogs:n})},a.updateFilterUser=function(e){a.setState({filterUser:e.target.value},(function(){a.filter()}))},a.updateFilterAsset=function(e){a.setState({filterAsset:e.target.value},(function(){a.filter()}))},a.state={logItems:[],filteredLogs:[],allLogs:null,filterUser:"",filterAsset:""},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getLogs()}},{key:"render",value:function(){var e=this.props.classes;return s.a.createElement(s.a.Fragment,null,s.a.createElement(E.a,{variant:"contained",color:"primary",onClick:this.getLogs},"Refresh Logs"),s.a.createElement(b.a,{className:e.searchbar,name:"filter-users",placeholder:"Search users",fullWidth:!0,onChange:this.updateFilterUser}),s.a.createElement(b.a,{className:e.searchbar,name:"filter-assets",placeholder:"Search assets",fullWidth:!0,onChange:this.updateFilterAsset}),s.a.createElement(Pe.a,{component:ie.a},s.a.createElement(Ne.a,{className:e.table,"aria-label":"simple table"},s.a.createElement(De.a,null,s.a.createElement(Ie.a,null,s.a.createElement(Ae.a,{align:"left"},"Timestamp"),s.a.createElement(Ae.a,{align:"left"},"type"),s.a.createElement(Ae.a,{align:"left"},"Message"))),s.a.createElement(je.a,null,this.state.filteredLogs.map((function(e){return s.a.createElement(Ie.a,{key:e.timestamp},s.a.createElement(Ae.a,{aligh:"left"},e.timestamp),s.a.createElement(Ae.a,{align:"left"},e.type),s.a.createElement(Ae.a,{align:"left"},e.message))}))))))}}]),t}(s.a.Component),$a=Object(ne.a)({table:{minWidth:650},searchbar:{minWidth:"200px",flexGrow:1}})(Za),en=(a(501),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleProfileMenuOpen=function(e){a.setState({anchorEl:e.currentTarget,isMenuOpen:!0})},a.handleMenuClose=function(){a.setState({anchorEl:null,isMenuOpen:!1})},a.state={currentTabID:0,anchorEl:null,isMenuOpen:!1},a.handleChange=a.handleChange.bind(Object(g.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e,t){this.setState({currentTabID:t})}},{key:"render",value:function(){var e=this.props.classes;return s.a.createElement("div",{className:e.root},s.a.createElement(Oa,null,s.a.createElement(X.a,{position:"static"},s.a.createElement(Q.a,null,s.a.createElement(W.a,{variant:"h6",className:e.title},"Hyposoft Server Management"),s.a.createElement("div",null,s.a.createElement(I.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",color:"inherit",onClick:this.handleProfileMenuOpen},s.a.createElement(ae.a,null)),s.a.createElement($.a,{anchorEl:this.state.anchorEl,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-search-account-menu",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:this.state.isMenuOpen,onClose:this.handleMenuClose},s.a.createElement(ee.a,null,"Username: "+this.props.username),s.a.createElement(ee.a,null,"Privilege: "+this.props.privilege),s.a.createElement(ee.a,{onClick:this.props.logout},"LOGOUT"))))),s.a.createElement(Y.a,{value:this.state.currentTabID,onChange:this.handleChange,indicatorColor:"primary",textColor:"primary",centered:!0},s.a.createElement(Z.a,{value:0,style:{flexGrow:1},label:"Models"}," "),s.a.createElement(Z.a,{value:1,style:{flexGrow:1},label:"Assets"}),this.props.privilege===_.ADMIN?s.a.createElement(Z.a,{value:2,style:{flexGrow:1},label:"Users"}):null,s.a.createElement(Z.a,{value:3,style:{flexGrow:1},label:"Datcenters"}),s.a.createElement(Z.a,{value:4,style:{flexGrow:1},label:"Statistics"}),s.a.createElement(Z.a,{value:5,style:{flexGrow:1},label:"Logs"})),0!==this.state.currentTabID?null:s.a.createElement(W.a,{component:"div",role:"tabpanel",id:"simple-tabpanel-0","aria-labelledby":"simple-tab-0"},s.a.createElement(se.a,{className:e.tab},s.a.createElement(nt,{token:this.props.token,privilege:this.props.privilege}))),1!==this.state.currentTabID?null:s.a.createElement(W.a,{component:"div",role:"tabpanel",id:"simple-tabpanel-0","aria-labelledby":"simple-tab-0"},s.a.createElement(se.a,{className:e.tab},s.a.createElement(xa,{token:this.props.token,privilege:this.props.privilege}))),2!==this.state.currentTabID?null:s.a.createElement(W.a,{component:"div",role:"tabpanel",id:"simple-tabpanel-0","aria-labelledby":"simple-tab-0"},s.a.createElement(se.a,{className:e.tab},s.a.createElement(xt,{token:this.props.token,privilege:this.props.privilege}))),3!==this.state.currentTabID?null:s.a.createElement(W.a,{component:"div",role:"tabpanel",id:"simple-tabpanel-0","aria-labelledby":"simple-tab-0"},s.a.createElement(se.a,{className:e.tab},s.a.createElement(Wa,{token:this.props.token,privilege:this.props.privilege}))),4!==this.state.currentTabID?null:s.a.createElement(W.a,{component:"div",role:"tabpanel",hidden:4!==this.state.currentTabID,id:"simple-tabpanel-0","aria-labelledby":"simple-tab-0"},s.a.createElement(se.a,{className:e.tab},s.a.createElement(za,{token:this.props.token,privilege:this.props.privilege}))),5!==this.state.currentTabID?null:s.a.createElement(W.a,{component:"div",role:"tabpanel",hidden:5!==this.state.currentTabID,id:"tab-panel-logs","aria-labelledby":"tab-panel-logs"},s.a.createElement(se.a,{className:e.tab},s.a.createElement($a,null)))))}}]),t}(s.a.Component)),tn=Object(ne.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},tab:{flexGrow:"flex",alignItems:"center",justifyContent:"center",maxWidth:"100%",width:"100%",margin:"0 auto"}}}))(en),an="token",nn="privilege",sn="loggedIn",rn="username",on=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).login=function(e,t,n){sessionStorage.setItem(an,e),sessionStorage.setItem(nn,n),sessionStorage.setItem(sn,!0),sessionStorage.setItem(rn,t),p.a.defaults.headers.common.token=e,p.a.defaults.headers.common.privilege=n,a.setState({token:e,privilege:n,loggedIn:!0,username:t}),window.history.replaceState({},"Hyposoft Asset Management","/")},a.loginWithOAuth=function(e,t,n){sessionStorage.setItem(an,e),sessionStorage.setItem(nn,n),sessionStorage.setItem(sn,!0),sessionStorage.setItem(rn,t),p.a.defaults.headers.common.token=e,p.a.defaults.headers.common.privilege=n,a.setState({token:e,privilege:n,loggedIn:!0,username:t},(function(){window.history.replaceState({},"Hyposoft Asset Management","/")}))},a.logout=function(){p.a.get(A("users/","logout")),a.setState({token:"",privilege:"",loggedIn:!1,username:""}),sessionStorage.removeItem(an),sessionStorage.removeItem(nn),sessionStorage.removeItem(sn),sessionStorage.removeItem(rn),window.history.replaceState({},"Hyposoft Asset Management","/"),console.log(window.location.href),console.log(M)},a.state={token:sessionStorage.getItem(an)||"",privilege:sessionStorage.getItem(nn)||"",loggedIn:sessionStorage.getItem(sn)||"",username:sessionStorage.getItem(rn)||""},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){p.a.defaults.headers.common.token=this.state.token,p.a.defaults.headers.common.privilege=this.state.privilege}},{key:"render",value:function(){return s.a.createElement("div",null,this.state.loggedIn?s.a.createElement(tn,{token:this.state.token,username:this.state.username,privilege:this.state.privilege,logout:this.logout}):s.a.createElement(J,{loginFunc:this.login,shib:this.props.redirected,loginFuncOAuth:this.loginWithOAuth}))}}]),t}(s.a.Component);i.a.render(s.a.createElement(on,{redirected:document.referrer}),document.getElementById("root"))}},[[276,1,2]]]);
//# sourceMappingURL=main.b0d80647.chunk.js.map
